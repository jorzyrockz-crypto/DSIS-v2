:root{
  --a:#2563eb;
  --as:#eaf1ff;
  --ah:#1d4ed8;
  --bg:#f3f6fb;
  --m:#eef2f7;
  --t:#0f172a;
  --tm:#64748b;
  --border:#dbe3ef;
  --surface:#ffffff;
  --surface-soft:#f8fbff;
  --sidebar-bg:linear-gradient(180deg,#ffffff 0%,#f8fbff 100%);
  --topbar-bg:rgba(255,255,255,.9);
  --icon-btn-bg:#ffffff;
  --icon-btn-text:#475569;
  --icon-btn-border:var(--border);
  --modal-bg:#ffffff;
  --modal-border:#dbeafe;
  --modal-head-bg:linear-gradient(180deg,#fbfdff 0%,#f5f9ff 100%);
  --modal-head-border:#e5edf7;
  --modal-foot-bg:rgba(255,255,255,.96);
  --modal-foot-border:#e5edf7;
  --btn-add-bg:var(--as);
  --btn-add-text:var(--ah);
  --btn-primary-bg:var(--a);
  --btn-primary-text:#ffffff;
  --btn-del-bg:#fee2e2;
  --btn-del-text:#b91c1c;
  --btn-secondary-bg:var(--m);
  --btn-secondary-text:var(--t);
  --btn-ghost-bg:transparent;
  --btn-ghost-text:var(--btn-secondary-text);
  --btn-ghost-border:var(--border);
  --par-accent:color-mix(in srgb, var(--a) 58%, #06b6d4 42%);
  --par-accent-hover:color-mix(in srgb, var(--par-accent) 84%, #0f172a 16%);
  --par-accent-soft:color-mix(in srgb, var(--par-accent) 18%, transparent);
  --bg-bottom-glow:radial-gradient(1350px 520px at 50% 112%, rgba(37,99,235,.34) 0%, rgba(37,99,235,0) 76%);
  --btn-focus-ring:0 0 0 3px rgba(59,130,246,.22);
  --btn-shadow-rest:0 1px 2px rgba(15,23,42,.06);
  --btn-shadow-hover:0 8px 16px rgba(15,23,42,.12);
  --btn-shadow-active:0 2px 6px rgba(15,23,42,.12);
  --staged-card-bg:linear-gradient(180deg,#dce7f2 0%,#d4e0ec 100%);
  --staged-card-border:#b8c9da;
  --staged-context-text:#334155;
  --staged-table-wrap-bg:rgba(255,255,255,.9);
  --staged-table-wrap-border:#c8d6e5;
  --staged-row-bg:#fbfdff;
  --staged-row-alt-bg:#f6faff;
  --staged-action-icon-bg:#f8fafc;
  --staged-action-icon-border:#cbd5e1;
  --staged-action-icon-text:#475569;
  --staged-action-icon-hover-bg:#f1f5f9;
  --staged-action-icon-hover-border:#94a3b8;
  --staged-action-icon-hover-text:#334155;
  --staged-eul-bg:#f8fafc;
  --staged-eul-border:#94a3b8;
  --staged-eul-text:#334155;
  --staged-eul-hover-bg:#eef2ff;
  --staged-eul-hover-border:#64748b;
  --sheet-bg:linear-gradient(160deg,#ecf4ff 0%,#dbeafe 100%);
  --sheet-border:#93c5fd;
  --sheet-shadow:0 14px 30px rgba(30,64,175,.28);
  --sheet-heading:#1d4ed8;
  --sheet-label:#1e3a8a;
  --sheet-input-bg:#f8fbff;
  --sheet-input-border:#93c5fd;
  --sheet-input-text:#0f172a;
  --sheet-input-placeholder:#94a3b8;
  --sheet-input-focus-border:var(--a);
  --sheet-input-focus-ring:0 0 0 2px rgba(59,130,246,.25);
  --fab-focus-ring:0 0 0 3px rgba(191,219,254,.9),0 10px 22px rgba(37,99,235,.34);
  --tbl-body-size:12.5px;
  --tbl-head-size:11.5px;
  --tbl-meta-size:10.5px;
  --r1:18px;
  --r2:12px;
  --r3:9px;
  --sh:0 10px 28px rgba(15,23,42,.08);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Manrope,"Plus Jakarta Sans","Segoe UI",sans-serif;
  background:
    radial-gradient(1600px 760px at 0% -10%, #dbeafe 0%, rgba(219,234,254,0) 72%),
    radial-gradient(1380px 700px at 100% -5%, #e0f2fe 0%, rgba(224,242,254,0) 64%),
    var(--bg-bottom-glow),
    var(--bg);
  color:var(--t);
}
body[data-theme="playful-sunflower"]{
  --bg-bottom-glow:radial-gradient(1350px 520px at 50% 112%, rgba(249,115,22,.42) 0%, rgba(249,115,22,0) 76%);
  background:
    radial-gradient(1600px 760px at 0% -10%, #fde68a 0%, rgba(253,230,138,0) 72%),
    radial-gradient(1380px 700px at 100% -5%, #bfdbfe 0%, rgba(191,219,254,0) 64%),
    var(--bg-bottom-glow),
    var(--bg);
}
body[data-theme="playful-flamingo"]{
  --bg-bottom-glow:radial-gradient(1350px 520px at 50% 112%, rgba(239,68,68,.38) 0%, rgba(239,68,68,0) 76%);
  background:
    radial-gradient(1600px 760px at 0% -10%, #fecdd3 0%, rgba(254,205,211,0) 72%),
    radial-gradient(1380px 700px at 100% -5%, #fda4af 0%, rgba(253,164,175,0) 64%),
    var(--bg-bottom-glow),
    var(--bg);
}
body[data-theme="playful-lotus"]{
  --bg-bottom-glow:radial-gradient(1350px 520px at 50% 112%, rgba(20,184,166,.38) 0%, rgba(20,184,166,0) 76%);
  background:
    radial-gradient(1600px 760px at 0% -10%, #99f6e4 0%, rgba(153,246,228,0) 72%),
    radial-gradient(1380px 700px at 100% -5%, #67e8f9 0%, rgba(103,232,249,0) 64%),
    var(--bg-bottom-glow),
    var(--bg);
}
body[data-theme="playful-kingfisher"]{
  --bg-bottom-glow:radial-gradient(1350px 520px at 50% 112%, rgba(14,165,233,.38) 0%, rgba(14,165,233,0) 76%);
  background:
    radial-gradient(1600px 760px at 0% -10%, #bae6fd 0%, rgba(186,230,253,0) 72%),
    radial-gradient(1380px 700px at 100% -5%, #7dd3fc 0%, rgba(125,211,252,0) 64%),
    var(--bg-bottom-glow),
    var(--bg);
}
body[data-theme="playful-fern"]{
  --bg-bottom-glow:radial-gradient(1350px 520px at 50% 112%, rgba(16,185,129,.38) 0%, rgba(16,185,129,0) 76%);
  background:
    radial-gradient(1600px 760px at 0% -10%, #bbf7d0 0%, rgba(187,247,208,0) 72%),
    radial-gradient(1380px 700px at 100% -5%, #86efac 0%, rgba(134,239,172,0) 64%),
    var(--bg-bottom-glow),
    var(--bg);
}
body[data-theme="elegant-white"]{
  --bg-bottom-glow:radial-gradient(1350px 520px at 50% 112%, rgba(37,99,235,.3) 0%, rgba(37,99,235,0) 76%);
  background:
    radial-gradient(1600px 760px at 0% -10%, #eef2ff 0%, rgba(238,242,255,0) 72%),
    radial-gradient(1380px 700px at 100% -5%, #f1f5f9 0%, rgba(241,245,249,0) 64%),
    var(--bg-bottom-glow),
    var(--bg);
}
body[data-theme="crimson-black"]{
  --bg-bottom-glow:radial-gradient(1350px 520px at 50% 112%, rgba(190,18,60,.42) 0%, rgba(190,18,60,0) 76%);
  background:
    radial-gradient(1600px 760px at 0% -10%, rgba(127,29,29,.6) 0%, rgba(127,29,29,0) 72%),
    radial-gradient(1380px 700px at 100% -5%, rgba(136,19,55,.4) 0%, rgba(136,19,55,0) 64%),
    var(--bg-bottom-glow),
    #0b0b10;
}
body[data-theme="dracula"]{
  --bg-bottom-glow:radial-gradient(1350px 520px at 50% 112%, rgba(111,45,189,.48) 0%, rgba(111,45,189,0) 76%);
  background:
    radial-gradient(1600px 760px at 0% -10%, #6f2dbd 0%, rgba(111,45,189,0) 72%),
    radial-gradient(1380px 700px at 100% -5%, #a663cc 0%, rgba(166,99,204,0) 64%),
    var(--bg-bottom-glow),
    #171123;
}
body[data-theme="dracula"][data-theme-variant="dracula-nocturne"]{
  --bg-bottom-glow:radial-gradient(1350px 520px at 50% 112%, rgba(139,92,246,.56) 0%, rgba(139,92,246,0) 76%);
  background:
    radial-gradient(1600px 760px at 0% -10%, #8b5cf6 0%, rgba(139,92,246,0) 72%),
    radial-gradient(1380px 700px at 100% -5%, #4338ca 0%, rgba(67,56,202,0) 64%),
    var(--bg-bottom-glow),
    #130f1f;
}
body[data-theme="dracula"][data-theme-variant="dracula-bloody"]{
  --bg-bottom-glow:radial-gradient(1350px 520px at 50% 112%, rgba(225,29,72,.56) 0%, rgba(225,29,72,0) 76%);
  background:
    radial-gradient(1600px 760px at 0% -10%, #be123c 0%, rgba(190,18,60,0) 72%),
    radial-gradient(1380px 700px at 100% -5%, #7f1d3f 0%, rgba(127,29,63,0) 64%),
    var(--bg-bottom-glow),
    #150d14;
}
body[data-theme="crimson-black"] .app-sidebar,
body[data-theme="crimson-black"] .app-topbar,
body[data-theme="crimson-black"] .app-topbar-v2-wrap,
body[data-theme="crimson-black"] .ics-card,
body[data-theme="crimson-black"] .actions-modal,
body[data-theme="crimson-black"] .modal,
body[data-theme="crimson-black"] .search-box{
  color:#e2e8f0;
  border-color:#3a1f27;
  box-shadow:0 16px 34px rgba(0,0,0,.45);
}
body[data-theme="dracula"] .app-sidebar,
body[data-theme="dracula"] .app-topbar,
body[data-theme="dracula"] .app-topbar-v2-wrap,
body[data-theme="dracula"] .ics-card,
body[data-theme="dracula"] .actions-modal,
body[data-theme="dracula"] .modal,
body[data-theme="dracula"] .search-box{
  color:#e2e8f0;
  border-color:#3d3156;
  box-shadow:0 16px 34px rgba(0,0,0,.45);
}
body[data-theme="dracula"] .app-sidebar{background:linear-gradient(180deg,#1a1730 0%,#201a36 100%)}
body[data-theme="dracula"] .app-topbar,
body[data-theme="dracula"] .app-topbar-v2-wrap{background:linear-gradient(135deg,rgba(45,36,69,.58) 0%,rgba(35,27,55,.36) 100%)}
body[data-theme="dracula"] .ics-card,
body[data-theme="dracula"] .actions-modal,
body[data-theme="dracula"] .modal,
body[data-theme="dracula"] .search-box{background:#1c1730}
body[data-theme="dracula"] .card-subtext,
body[data-theme="dracula"] .dash-note,
body[data-theme="dracula"] .modal-sub,
body[data-theme="dracula"] .search-empty,
body[data-theme="dracula"] .search-item-meta{
  color:#b8c1d8;
}
body[data-theme="dracula"] .ics-table th,
body[data-theme="dracula"] .detail-table thead th{
  background:#241f3b;
  color:#d8def0;
}
body[data-theme="dracula"] .records .ics-table tbody tr:nth-child(even){background:#1f1934}
body[data-theme="dracula"] .records .ics-table tbody tr:hover{background:#2a2142}
body[data-theme="dracula"] .stage-input,
body[data-theme="dracula"] .search-input{
  background:#171329;
  border-color:#4b3f6d;
  color:#f8fafc;
}
body[data-theme="dracula"]{
  --par-accent:color-mix(in srgb, var(--a) 52%, #22d3ee 48%);
}
body[data-theme="crimson-black"] .app-sidebar{background:linear-gradient(180deg,#140f16 0%,#1a1118 100%)}
body[data-theme="crimson-black"] .app-topbar,
body[data-theme="crimson-black"] .app-topbar-v2-wrap{background:linear-gradient(135deg,rgba(35,22,30,.58) 0%,rgba(27,18,24,.36) 100%)}
body[data-theme="crimson-black"] .ics-card,
body[data-theme="crimson-black"] .actions-modal,
body[data-theme="crimson-black"] .modal,
body[data-theme="crimson-black"] .search-box{background:#17111a}
body[data-theme="crimson-black"] .card-subtext,
body[data-theme="crimson-black"] .dash-note,
body[data-theme="crimson-black"] .modal-sub,
body[data-theme="crimson-black"] .search-empty,
body[data-theme="crimson-black"] .search-item-meta{
  color:#94a3b8;
}
body[data-theme="crimson-black"] .ics-table th,
body[data-theme="crimson-black"] .detail-table thead th{
  background:#1f1722;
  color:#cbd5e1;
}
body[data-theme="crimson-black"] .records .ics-table tbody tr:nth-child(even){background:#18121d}
body[data-theme="crimson-black"] .records .ics-table tbody tr:hover{background:#231826}
body[data-theme="crimson-black"] .stage-input,
body[data-theme="crimson-black"] .search-input{
  background:#120d14;
  border-color:#4b2a33;
  color:#f8fafc;
}
body[data-theme="crimson-black"]{
  --par-accent:color-mix(in srgb, var(--a) 50%, #22d3ee 50%);
}
body[data-theme="crimson-black"] .dash-kpi{
  background:linear-gradient(180deg,#18131a 0%,#221722 100%);
  border-color:#3a1f27;
}
body[data-theme="crimson-black"] .dash-kpi .k,
body[data-theme="crimson-black"] .dash-kpi-sub{color:#94a3b8}
body[data-theme="crimson-black"] .dash-kpi .v{color:#f8fafc}

/* Top navigation - SaaS style */
.app-topbar-v2-wrap{
  margin:0;
  position:sticky;
  top:0;
  z-index:160;
  background:linear-gradient(135deg,rgba(255,255,255,.56) 0%,rgba(255,255,255,.26) 100%);
  backdrop-filter:blur(14px) saturate(140%);
  -webkit-backdrop-filter:blur(14px) saturate(140%);
  border-bottom:0;
  box-shadow:0 10px 24px rgba(15,23,42,.08);
  padding:8px 14px 10px;
}
.app-topbar-v2{
  min-height:40px;
  border:0;
  border-radius:0;
  background:transparent;
  backdrop-filter:none;
  box-shadow:none;
  display:grid;
  grid-template-columns:minmax(0,1fr) auto minmax(0,1fr);
  align-items:center;
  gap:12px;
  padding:0;
}
.app-topbar-v2 .topbar-title{
  min-width:0;
  font-size:14px;
  font-weight:800;
  letter-spacing:.01em;
}
.topbar-v2-left{
  display:flex;
  align-items:center;
  gap:12px;
  min-width:auto;
  justify-self:center;
}
.topbar-v2-left .logo{
  width:40px;
  height:40px;
  border-radius:12px;
  font-size:11px;
  flex:0 0 auto;
}
.topbar-v2-left .brand-copy{
  min-width:auto;
  display:flex;
  flex-direction:row;
  align-items:baseline;
  gap:8px;
}
body.sidebar-collapsed .app-topbar-v2 .brand-copy{
  display:flex;
}
.topbar-v2-left .brand-title,
.topbar-v2-left .brand-sub{
  white-space:normal;
  overflow:visible;
  text-overflow:clip;
}
.topbar-v2-left .brand-sub{
  font-size:12px;
  font-weight:700;
  color:var(--tm);
}
.topbar-version-link{
  cursor:pointer;
}
.topbar-version-link:hover,
.topbar-version-link:focus-visible{
  color:var(--ah);
  text-decoration:underline;
  outline:none;
}
.audit-logs-toolbar{
  display:grid;
  grid-template-columns:1.2fr .8fr .8fr .8fr .8fr auto;
  gap:8px;
  margin-bottom:10px;
}
.audit-logs-modal{
  width:min(1220px,98vw);
  max-height:94vh;
}
.audit-logs-modal .modal-head h3{
  display:inline-flex;
  align-items:center;
  gap:8px;
  margin:0;
}
.audit-logs-modal .detail-table-wrap{
  max-height:56vh;
  overflow:auto;
  border:1px solid var(--border);
  border-radius:12px;
  background:var(--surface);
}
.audit-logs-toolbar .stage-input{
  width:100%;
  background:var(--surface);
  color:var(--t);
  border-color:var(--border);
}
.audit-logs-summary{
  font-size:12px;
  color:var(--tm);
  margin:0 0 8px;
}
.audit-logs-pagination{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  margin-top:10px;
}
.audit-logs-page-info{
  font-size:12px;
  color:var(--tm);
}
.audit-logs-table th,
.audit-logs-table td{
  font-size:12px;
}
.audit-logs-table thead th{
  background:var(--surface-soft);
  color:var(--tm);
}
.audit-logs-table tbody td{
  color:var(--t);
  border-bottom:1px solid var(--border);
}
.audit-logs-table tbody tr:nth-child(even) td{
  background:color-mix(in srgb, var(--surface) 92%, var(--m) 8%);
}
.audit-logs-table tbody tr:hover td{
  background:color-mix(in srgb, var(--surface) 82%, var(--as) 18%);
}
.audit-logs-table .meta{
  font-size:11px;
  color:var(--tm);
}
/* Help & Documentation modal */
.help-docs-modal{
  width:min(980px,97vw);
}
.help-docs-modal .modal-head h3{
  display:inline-flex;
  align-items:center;
  gap:8px;
}
.help-docs-sections{
  display:grid;
  gap:12px;
}
.help-docs-card{
  border:1px solid var(--border);
  border-radius:12px;
  background:var(--surface-soft);
  padding:12px;
}
.help-docs-card h4{
  margin:0 0 8px;
  font-size:14px;
  color:var(--t);
}
.help-docs-card p,
.help-docs-card li{
  font-size:12px;
  color:var(--tm);
  line-height:1.45;
}
.help-docs-card ul{
  margin:0;
  padding-left:18px;
  display:grid;
  gap:6px;
}
body[data-theme="dracula"] .help-docs-card,
body[data-theme="crimson-black"] .help-docs-card{
  background:rgba(15,23,42,.45);
  border-color:rgba(148,163,184,.28);
}
body[data-theme="dracula"] .help-docs-card h4,
body[data-theme="crimson-black"] .help-docs-card h4{
  color:#f8fafc;
}
body[data-theme="dracula"] .help-docs-card p,
body[data-theme="dracula"] .help-docs-card li,
body[data-theme="crimson-black"] .help-docs-card p,
body[data-theme="crimson-black"] .help-docs-card li{
  color:#cbd5e1;
}
body[data-theme="dracula"] .audit-logs-modal .detail-table-wrap,
body[data-theme="crimson-black"] .audit-logs-modal .detail-table-wrap{
  background:rgba(15,23,42,.35);
  border-color:rgba(148,163,184,.28);
}
body[data-theme="dracula"] .audit-logs-modal .stage-input,
body[data-theme="crimson-black"] .audit-logs-modal .stage-input{
  background:rgba(15,23,42,.55);
  border-color:rgba(148,163,184,.45);
  color:#e2e8f0;
}
body[data-theme="dracula"] .audit-logs-table thead th,
body[data-theme="crimson-black"] .audit-logs-table thead th{
  background:rgba(15,23,42,.72);
  color:#cbd5e1;
}
body[data-theme="dracula"] .audit-logs-table tbody td,
body[data-theme="crimson-black"] .audit-logs-table tbody td{
  color:#e2e8f0;
  border-bottom-color:rgba(148,163,184,.22);
}
body[data-theme="dracula"] .audit-logs-table tbody tr:nth-child(even) td{
  background:rgba(91,74,128,.16);
}
body[data-theme="crimson-black"] .audit-logs-table tbody tr:nth-child(even) td{
  background:rgba(91,39,58,.16);
}
body[data-theme="dracula"] .audit-logs-table tbody tr:hover td{
  background:rgba(88,75,148,.26);
}
body[data-theme="crimson-black"] .audit-logs-table tbody tr:hover td{
  background:rgba(98,46,66,.24);
}
body[data-theme="dracula"] .audit-logs-summary,
body[data-theme="dracula"] .audit-logs-page-info,
body[data-theme="dracula"] .audit-logs-table .meta,
body[data-theme="crimson-black"] .audit-logs-summary,
body[data-theme="crimson-black"] .audit-logs-page-info,
body[data-theme="crimson-black"] .audit-logs-table .meta{
  color:#a7b4cc;
}
@media (max-width:980px){
  .audit-logs-modal{
    width:min(100vw,100vw);
    max-height:100vh;
    border-radius:0;
    border-left:0;
    border-right:0;
  }
  .audit-logs-modal .modal-body{
    padding:10px;
  }
  .audit-logs-toolbar{
    grid-template-columns:1fr;
  }
  .audit-logs-pagination{
    flex-direction:column;
    align-items:stretch;
  }
  .audit-logs-pagination > div:last-child{
    display:grid !important;
    grid-template-columns:1fr 1fr;
    gap:8px !important;
  }
  .audit-logs-modal .detail-table-wrap{
    max-height:52vh;
  }
  .help-docs-modal{
    width:min(100vw,100vw);
    max-height:100vh;
    border-radius:0;
  }
}
@media (max-width:640px){
  .audit-logs-modal .modal-head{
    padding:12px;
  }
  .audit-logs-modal .modal-head h3{
    font-size:18px;
  }
  .audit-logs-modal .modal-sub{
    font-size:12px;
  }
  .audit-logs-modal .detail-table-wrap{
    max-height:48vh;
  }
  .audit-logs-pagination > div:last-child{
    grid-template-columns:1fr;
  }
}
/* Uniform close controls across modal headers */
.modal-head .modal-close-btn,
.modal-head .inspection-history-close,
.modal-head .archived-history-close,
.modal-head .dm-hub-close,
.modal-head .my-profile-close,
.modal-head .setup-close-btn,
.wmr-modal .icsd-head-actions .wmr-close-btn{
  border:1px solid var(--modal-border);
  background:var(--modal-bg);
  color:var(--t);
  border-radius:999px;
  min-height:32px;
  padding:0 12px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  font-size:12px;
  font-weight:700;
  line-height:1;
  cursor:pointer;
}
.modal-head .modal-close-btn:hover,
.modal-head .inspection-history-close:hover,
.modal-head .archived-history-close:hover,
.modal-head .dm-hub-close:hover,
.modal-head .my-profile-close:hover,
.modal-head .setup-close-btn:hover,
.wmr-modal .icsd-head-actions .wmr-close-btn:hover{
  border-color:var(--a);
  background:var(--as);
  color:var(--ah);
}
.modal-head .modal-close-btn .lucide,
.modal-head .inspection-history-close .lucide,
.modal-head .archived-history-close .lucide,
.modal-head .dm-hub-close .lucide,
.modal-head .my-profile-close .lucide,
.modal-head .setup-close-btn .lucide,
.wmr-modal .icsd-head-actions .wmr-close-btn .lucide{
  width:14px;
  height:14px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.topbar-v2-left .brand-title{
  color:var(--ah);
  text-transform:uppercase;
  letter-spacing:.09em;
  font-size:15px;
  line-height:1.1;
}
body[data-theme="dracula"] .app-topbar-v2 .brand-title,
body[data-theme="crimson-black"] .app-topbar-v2 .brand-title{
  color:var(--as);
}
.topbar-v2-views{
  display:flex;
  align-items:center;
  gap:6px;
  min-width:0;
  justify-self:start;
  overflow:auto hidden;
  scrollbar-width:none;
}
.topbar-v2-views::-webkit-scrollbar{display:none}
.topbar-v2-view-btn{
  border:0;
  background:transparent;
  color:var(--icon-btn-text);
  border-radius:999px;
  height:32px;
  padding:0 12px;
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-size:12px;
  font-weight:700;
  letter-spacing:.01em;
  white-space:nowrap;
  cursor:default;
  position:relative;
  transition:color .15s ease, transform .15s ease;
}
.topbar-v2-view-btn:hover{
  background:transparent;
  color:var(--ah);
  transform:translateY(-1px);
}
.topbar-v2-view-btn:focus-visible{
  outline:none;
  color:var(--ah);
  transform:translateY(-1px);
}
.topbar-v2-view-btn .lucide{
  width:13px;
  height:13px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
  transition:transform .18s ease;
}
.topbar-v2-view-btn:hover .lucide,
.topbar-v2-view-btn:focus-visible .lucide{
  transform:translateY(-1px) scale(1.08) rotate(-6deg);
}
.topbar-v2-view-btn::after{
  content:"";
  position:absolute;
  left:12px;
  right:12px;
  bottom:2px;
  height:2px;
  border-radius:999px;
  background:currentColor;
  opacity:0;
  transform:scaleX(.4);
  transition:opacity .15s ease, transform .15s ease;
}
.topbar-v2-view-btn:hover::after,
.topbar-v2-view-btn:focus-visible::after{
  opacity:.9;
  transform:scaleX(1);
}
.topbar-v2-view-btn.is-primary{
  background:var(--as);
  color:var(--ah);
  box-shadow:none;
}
.topbar-v2-view-btn.is-primary::after{
  opacity:0;
  transform:scaleX(.4);
}
.topbar-v2-search-btn{
  min-width:190px;
  height:32px;
  border-radius:999px;
  border:1px solid var(--border);
  background:rgba(255,255,255,.72);
  color:var(--icon-btn-text);
  display:inline-flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  padding:0 10px;
  cursor:pointer;
  transition:.15s;
  position:relative;
}
.topbar-v2-search-btn:hover{
  background:rgba(255,255,255,.92);
  border-color:#bfdbfe;
  color:var(--ah);
}
.topbar-v2-search-btn::after{
  content:attr(data-tooltip);
  position:absolute;
  left:50%;
  top:calc(100% + 8px);
  bottom:auto;
  transform:translateX(-50%) translateY(-4px);
  border:1px solid var(--border);
  background:var(--surface);
  color:var(--tm);
  border-radius:8px;
  padding:3px 7px;
  font-size:10px;
  font-weight:700;
  letter-spacing:.03em;
  opacity:0;
  visibility:hidden;
  pointer-events:none;
  transition:opacity .15s ease, transform .15s ease, visibility .15s ease;
  max-width:calc(100vw - 24px);
  white-space:nowrap;
  z-index:220;
}
.topbar-v2-search-btn:hover::after,
.topbar-v2-search-btn:focus-visible::after{
  opacity:1;
  visibility:visible;
  transform:translateX(-50%) translateY(0);
}
.app-topbar-v2 .icon-btn{
  width:32px;
  height:32px;
  border-radius:9px;
  border:0;
  background:transparent;
  box-shadow:none;
}
.app-topbar-v2 .icon-btn:hover,
.app-topbar-v2 .icon-btn:focus-visible{
  background:transparent;
  box-shadow:none;
}
.app-topbar-v2 .right{
  display:flex;
  align-items:center;
  gap:8px;
  justify-self:end;
  position:relative;
}
.app-topbar-v2 .topbar-profile-btn{
  width:auto;
  min-width:136px;
  height:40px;
  border-radius:999px;
  border:1px solid var(--border);
  background:rgba(255,255,255,.9);
  display:inline-flex;
  align-items:center;
  justify-content:flex-start;
  gap:8px;
  padding:3px 7px 3px 10px;
  color:var(--t);
}
.app-topbar-v2 .topbar-profile-btn:hover,
.app-topbar-v2 .topbar-profile-btn:focus-visible{
  border-color:#bfdbfe;
  background:rgba(255,255,255,.98);
}
.topbar-profile-copy{
  min-width:0;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  line-height:1.1;
}
.topbar-profile-name{
  max-width:110px;
  font-size:12px;
  font-weight:800;
  color:var(--t);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.topbar-profile-role{
  max-width:110px;
  font-size:11px;
  color:var(--tm);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.topbar-profile-avatar-wrap{
  position:relative;
  width:30px;
  height:30px;
  border-radius:999px;
  flex:0 0 auto;
}
.topbar-profile-avatar{
  width:100%;
  height:100%;
  border-radius:999px;
  border:1px dashed #94a3b8;
  background:rgba(148,163,184,.12) center/cover no-repeat;
  display:grid;
  place-items:center;
  color:var(--ah);
  font-size:11px;
  font-weight:800;
  line-height:1;
}
.topbar-profile-avatar.has-image{
  border:1px solid #bfdbfe;
  background-color:transparent;
}
.topbar-profile-avatar.has-icon{
  font-size:0;
}
.topbar-profile-avatar .profile-avatar-icon{
  width:14px;
  height:14px;
}
.topbar-profile-status{
  position:absolute;
  right:-1px;
  bottom:-1px;
  width:9px;
  height:9px;
  border-radius:999px;
  background:#22c55e;
  border:2px solid #fff;
}
.topbar-profile-menu{
  position:absolute;
  top:calc(100% + 10px);
  right:0;
  width:min(92vw,320px);
  border:1px solid var(--border);
  border-radius:16px;
  background:var(--surface);
  box-shadow:0 18px 36px rgba(15,23,42,.16);
  overflow:hidden;
  display:none;
  z-index:260;
}
.topbar-profile-menu.show{
  display:block;
}
.topbar-menu-head{
  padding:12px;
  border-bottom:1px solid #eef2f7;
  display:flex;
  align-items:center;
  gap:10px;
}
.topbar-menu-avatar{
  width:52px;
  height:52px;
  border-radius:999px;
  border:1px solid var(--border);
  background:rgba(148,163,184,.12) center/cover no-repeat;
  display:grid;
  place-items:center;
  color:var(--ah);
  font-size:16px;
  font-weight:800;
  flex:0 0 auto;
}
.topbar-menu-avatar.has-image{
  background-color:transparent;
}
.topbar-menu-avatar.has-icon{
  font-size:0;
}
.topbar-menu-avatar .profile-avatar-icon{
  width:20px;
  height:20px;
}
.topbar-menu-meta{
  min-width:0;
}
.topbar-menu-name{
  margin:0;
  font-size:14px;
  font-weight:800;
  color:var(--t);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.topbar-menu-email{
  margin:3px 0 0;
  font-size:12px;
  color:var(--tm);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.topbar-menu-list{
  padding:6px;
}
.topbar-menu-item{
  width:100%;
  border:0;
  background:transparent;
  color:var(--t);
  border-radius:10px;
  height:38px;
  padding:0 10px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  cursor:pointer;
}
.topbar-menu-item:hover,
.topbar-menu-item:focus-visible{
  background:var(--as);
  color:var(--ah);
  outline:none;
}
.topbar-menu-item-left{
  display:inline-flex;
  align-items:center;
  gap:8px;
  min-width:0;
}
.topbar-menu-item .lucide{
  width:15px;
  height:15px;
  display:inline-block;
  vertical-align:middle;
  stroke:currentColor;
  stroke-width:2;
  fill:none;
}
.topbar-menu-badge{
  padding:2px 8px;
  border-radius:999px;
  font-size:11px;
  font-weight:700;
  line-height:1.2;
}
.topbar-menu-badge.new{
  background:#f43f5e;
  color:#fff;
}
.topbar-menu-badge.mode{
  background:#e2e8f0;
  color:#334155;
}
.topbar-menu-foot{
  border-top:1px solid #eef2f7;
  padding:6px;
}
.topbar-menu-item.danger{
  color:#dc2626;
}
.topbar-menu-item.danger:hover,
.topbar-menu-item.danger:focus-visible{
  background:#fee2e2;
  color:#b91c1c;
}
.app-topbar-v2 .mobile-profile-btn{display:grid}
.topbar-v2-search-main{
  display:inline-flex;
  align-items:center;
  gap:7px;
  min-width:0;
}
.topbar-v2-search-main .lucide{
  width:14px;
  height:14px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.topbar-v2-search-label{
  font-size:12px;
  font-weight:700;
  white-space:nowrap;
}
body[data-theme="dracula"] .app-topbar-v2-wrap,
body[data-theme="crimson-black"] .app-topbar-v2-wrap{
  background:linear-gradient(135deg,rgba(16,23,42,.72) 0%,rgba(30,18,41,.5) 100%);
  border-bottom:1px solid rgba(148,163,184,.34);
  box-shadow:0 14px 30px rgba(0,0,0,.42);
}
body[data-theme="dracula"] .app-topbar-v2 .brand-title,
body[data-theme="crimson-black"] .app-topbar-v2 .brand-title{
  color:#f8fafc;
  text-shadow:0 1px 14px rgba(0,0,0,.5);
}
body[data-theme="dracula"] .topbar-v2-view-btn,
body[data-theme="crimson-black"] .topbar-v2-view-btn{
  color:rgba(248,250,252,.9);
}
body[data-theme="dracula"] .topbar-v2-view-btn:hover,
body[data-theme="dracula"] .topbar-v2-view-btn:focus-visible,
body[data-theme="crimson-black"] .topbar-v2-view-btn:hover,
body[data-theme="crimson-black"] .topbar-v2-view-btn:focus-visible{
  color:#ffffff;
  background:rgba(148,163,184,.16);
}
body[data-theme="dracula"] .topbar-v2-view-btn.is-primary,
body[data-theme="crimson-black"] .topbar-v2-view-btn.is-primary{
  color:var(--ah);
  background:var(--as);
  box-shadow:none;
}
body[data-theme="dracula"] .topbar-v2-view-btn.is-primary::after,
body[data-theme="crimson-black"] .topbar-v2-view-btn.is-primary::after{
  opacity:0;
  transform:scaleX(.4);
}
body[data-theme="dracula"] .topbar-v2-search-btn,
body[data-theme="crimson-black"] .topbar-v2-search-btn{
  background:rgba(15,23,42,.66);
  border-color:rgba(148,163,184,.46);
  color:#f8fafc;
}
body[data-theme="dracula"] .topbar-v2-search-btn:hover,
body[data-theme="dracula"] .topbar-v2-search-btn:focus-visible,
body[data-theme="crimson-black"] .topbar-v2-search-btn:hover,
body[data-theme="crimson-black"] .topbar-v2-search-btn:focus-visible{
  background:rgba(30,41,59,.8);
  border-color:rgba(191,219,254,.72);
  color:#ffffff;
}
body[data-theme="dracula"] .topbar-v2-search-label,
body[data-theme="crimson-black"] .topbar-v2-search-label{
  color:#f8fafc;
}
body[data-theme="dracula"] .app-topbar-v2 .icon-btn,
body[data-theme="crimson-black"] .app-topbar-v2 .icon-btn{
  color:rgba(248,250,252,.9);
}
body[data-theme="dracula"] .topbar-profile-avatar,
body[data-theme="crimson-black"] .topbar-profile-avatar{
  border-color:rgba(148,163,184,.6);
}
body[data-theme="dracula"] .topbar-profile-avatar.has-image,
body[data-theme="crimson-black"] .topbar-profile-avatar.has-image{
  border-color:rgba(191,219,254,.72);
}
body[data-theme="dracula"] .app-topbar-v2 .topbar-profile-btn,
body[data-theme="crimson-black"] .app-topbar-v2 .topbar-profile-btn{
  background:rgba(15,23,42,.66);
  border-color:rgba(148,163,184,.46);
}
body[data-theme="dracula"] .app-topbar-v2 .topbar-profile-name,
body[data-theme="crimson-black"] .app-topbar-v2 .topbar-profile-name{
  color:#f8fafc;
}
body[data-theme="dracula"] .app-topbar-v2 .topbar-profile-role,
body[data-theme="crimson-black"] .app-topbar-v2 .topbar-profile-role{
  color:#cbd5e1;
}
body[data-theme="dracula"] .app-topbar-v2 .topbar-profile-avatar,
body[data-theme="crimson-black"] .app-topbar-v2 .topbar-profile-avatar{
  color:#e2e8f0;
}
body[data-theme="dracula"] .topbar-profile-menu,
body[data-theme="crimson-black"] .topbar-profile-menu{
  background:#111827;
  border-color:#334155;
}
body[data-theme="dracula"] .topbar-menu-head,
body[data-theme="crimson-black"] .topbar-menu-head,
body[data-theme="dracula"] .topbar-menu-foot,
body[data-theme="crimson-black"] .topbar-menu-foot{
  border-color:rgba(148,163,184,.2);
}
body[data-theme="dracula"] .topbar-menu-name,
body[data-theme="crimson-black"] .topbar-menu-name{
  color:#f8fafc;
}
body[data-theme="dracula"] .topbar-menu-email,
body[data-theme="crimson-black"] .topbar-menu-email{
  color:#94a3b8;
}
body[data-theme="dracula"] .topbar-menu-item,
body[data-theme="crimson-black"] .topbar-menu-item{
  color:#e2e8f0;
}
body[data-theme="dracula"] .topbar-menu-item:hover,
body[data-theme="dracula"] .topbar-menu-item:focus-visible,
body[data-theme="crimson-black"] .topbar-menu-item:hover,
body[data-theme="crimson-black"] .topbar-menu-item:focus-visible{
  background:rgba(148,163,184,.16);
  color:#ffffff;
}
body[data-theme="dracula"] .topbar-menu-badge.mode,
body[data-theme="crimson-black"] .topbar-menu-badge.mode{
  background:#334155;
  color:#e2e8f0;
}
body[data-theme="dracula"] .topbar-profile-status,
body[data-theme="crimson-black"] .topbar-profile-status{
  border-color:#0f172a;
}
body[data-theme="dracula"] .app-topbar-v2 .icon-btn:hover,
body[data-theme="dracula"] .app-topbar-v2 .icon-btn:focus-visible,
body[data-theme="crimson-black"] .app-topbar-v2 .icon-btn:hover,
body[data-theme="crimson-black"] .app-topbar-v2 .icon-btn:focus-visible{
  color:#ffffff;
  background:rgba(148,163,184,.22);
}
body[data-theme="dracula"] .topbar-v2-search-btn::after,
body[data-theme="crimson-black"] .topbar-v2-search-btn::after{
  background:#020617;
  border-color:#475569;
  color:#e2e8f0;
}
.app-shell{
  min-height:100vh;
  display:grid;
  grid-template-columns:246px 1fr;
  gap:16px;
  padding:14px;
  transition:grid-template-columns .2s ease;
}
body.sidebar-collapsed .app-shell{grid-template-columns:86px 1fr}
.app-shell.hide-sidebar{
  grid-template-columns:1fr;
}
body.sidebar-collapsed .app-shell.hide-sidebar{
  grid-template-columns:1fr;
}
.app-sidebar{
  position:sticky;
  top:14px;
  height:calc(100vh - 28px);
  border:1px solid var(--border);
  border-radius:var(--r1);
  background:var(--sidebar-bg);
  box-shadow:var(--sh);
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:12px;
  transition:padding .2s ease;
}
.brand{display:flex;align-items:center;gap:10px;padding:8px 8px 10px}
.brand-toggle{
  width:30px;
  height:30px;
  border-radius:9px;
  border:1px solid var(--icon-btn-border);
  background:var(--icon-btn-bg);
  color:var(--icon-btn-text);
  display:grid;
  place-items:center;
  margin-left:auto;
  cursor:pointer;
}
.brand-toggle:hover{
  background:var(--as);
  color:var(--ah);
  border-color:#bfdbfe;
}
.brand-toggle .lucide{
  width:15px;
  height:15px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.logo{
  width:36px;
  height:36px;
  border-radius:11px;
  background:linear-gradient(145deg,var(--a) 0%,var(--ah) 100%);
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  color:#fff;
  display:grid;
  place-items:center;
  font-size:11px;
  font-weight:800;
  letter-spacing:.06em;
}
.logo.has-image{
  color:transparent;
  text-shadow:none;
}
.brand-copy{display:flex;flex-direction:column}
.brand-title{font-size:13px;font-weight:800;line-height:1.1}
.brand-sub{font-size:11px;color:var(--tm);font-weight:600;line-height:1.1}
.sidebar-nav{
  display:flex;
  flex-direction:column;
  gap:8px;
  margin-top:4px;
}
.sidebar-nav .item{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-radius:12px;
  font-size:13px;
  font-weight:800;
  color:#334155;
  cursor:pointer;
  transition:background .16s ease,color .16s ease,transform .16s ease,box-shadow .16s ease;
}
.sidebar-nav .item.item-new-ics{display:none}
.sidebar-nav .item:hover{
  background:var(--as);
  color:var(--ah);
  transform:translateX(1px);
}
.sidebar-nav .item.active{
  background:var(--as);
  color:var(--ah);
  box-shadow:0 6px 14px rgba(15,23,42,.12);
}
.nav-ico{
  width:28px;
  height:28px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:9px;
  border:1px solid #e2e8f0;
  background:#fff;
  color:#334155;
  flex-shrink:0;
}
.nav-ico svg{width:14px;height:14px;fill:currentColor}
.nav-ico .lucide{
  width:14px;
  height:14px;
  stroke:currentColor;
  stroke-width:2;
  fill:none;
}
.lucide{
  display:block;
  pointer-events:none;
  stroke-linecap:round;
  stroke-linejoin:round;
}
.nav-ico,
.sidebar-signout-icon,
.icon-btn,
.dm-hub-ico,
.dm-hub-title-ico,
.dash-kpi-ico,
.dash-action-card .ico,
.dash-note-ico,
.icon-only-btn,
.avatar-picker-btn,
.fab,
.icsd-title-icon,
.archived-inline-icon{
  line-height:0;
  font-size:0;
}
.sidebar-nav .item > span:last-child{letter-spacing:.01em}
.sidebar-nav .item:hover .nav-ico{
  border-color:#bfdbfe;
  background:#eff6ff;
}
.sidebar-nav .item.active .nav-ico{
  border-color:var(--a);
  background:var(--surface);
  color:var(--a);
}
body[data-theme="dracula"] .sidebar-nav .item,
body[data-theme="crimson-black"] .sidebar-nav .item{
  color:#e2e8f0;
}
body[data-theme="dracula"] .sidebar-nav .item .nav-ico,
body[data-theme="crimson-black"] .sidebar-nav .item .nav-ico{
  background:rgba(15,23,42,.45);
  border-color:rgba(148,163,184,.36);
  color:#e2e8f0;
}
body[data-theme="dracula"] .sidebar-nav .item:hover .nav-ico,
body[data-theme="crimson-black"] .sidebar-nav .item:hover .nav-ico{
  background:rgba(59,130,246,.22);
  border-color:rgba(96,165,250,.6);
}
.sidebar-foot{
  margin-top:auto;
  padding:10px 8px 6px;
  border-top:1px solid #e7edf6;
}
.sidebar-collapse-row{
  display:flex;
  justify-content:flex-end;
  margin-bottom:8px;
}
body.sidebar-collapsed .app-sidebar{padding:10px 8px}
.app-shell.hide-sidebar .app-sidebar{
  display:none;
}
body.sidebar-collapsed .brand{
  display:grid;
  justify-items:center;
  gap:8px;
  padding:6px 4px 8px;
}
body.sidebar-collapsed .brand-copy{display:none}
body.sidebar-collapsed .sidebar-collapse-row{
  justify-content:center;
  margin-bottom:6px;
}
body.sidebar-collapsed .sidebar-nav .item{
  justify-content:center;
  padding:9px;
}
body.sidebar-collapsed .sidebar-nav .item > span:last-child{display:none}
body.sidebar-collapsed .sidebar-foot{
  padding:8px 2px 4px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
}
body.sidebar-collapsed .sidebar-install{display:none}
body.sidebar-collapsed .sidebar-profile{
  background:transparent;
  border:none;
  padding:6px 0 0;
}
body.sidebar-collapsed .sidebar-profile-main{
  flex-direction:column;
  gap:6px;
  align-items:center;
}
body.sidebar-collapsed .sidebar-profile-left{
  justify-content:center;
  align-items:center;
}
body.sidebar-collapsed .sidebar-profile-identity{display:none}
body.sidebar-collapsed .sidebar-profile-avatar{cursor:pointer}
.sidebar-install{
  margin-bottom:8px;
  display:grid;
  gap:6px;
}
.sidebar-install-btn{
  width:100%;
  justify-content:center;
}
.sidebar-profile{
  display:grid;
  gap:8px;
  border:1px solid #dbe3ef;
  border-radius:12px;
  padding:10px;
  background:rgba(255,255,255,.72);
}
.sidebar-profile-main{
  display:flex;
  align-items:center;
  gap:8px;
  justify-content:space-between;
}
.sidebar-profile-avatar{
  width:34px;
  height:34px;
  border-radius:10px;
  background:linear-gradient(145deg,var(--a) 0%,var(--ah) 100%);
  color:#fff;
  display:grid;
  place-items:center;
  font-size:11px;
  font-weight:800;
  letter-spacing:.04em;
}
.sidebar-profile-left{
  display:flex;
  align-items:center;
  gap:8px;
  min-width:0;
}
.sidebar-profile-identity{
  border:none;
  background:transparent;
  padding:0;
  text-align:left;
  cursor:pointer;
  min-width:0;
}
.sidebar-profile-name{
  font-size:12px;
  font-weight:800;
  color:var(--t);
  line-height:1.1;
}
.sidebar-profile-role{
  font-size:11px;
  color:var(--tm);
  line-height:1.1;
  margin-top:2px;
}
.sidebar-signout-icon{
  width:30px;
  height:30px;
  border-radius:9px;
  border:1px solid var(--icon-btn-border);
  background:var(--icon-btn-bg);
  color:var(--btn-del-text);
  display:grid;
  place-items:center;
  cursor:pointer;
}
.sidebar-signout-icon svg,
.sidebar-signout-icon .lucide{
  width:15px;
  height:15px;
}
.sidebar-signout-icon .lucide{
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.app-main{
  min-width:0;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.app-topbar{
  display:none;
  position:sticky;
  top:14px;
  z-index:100;
  height:58px;
  border:1px solid var(--border);
  border-radius:14px;
  background:var(--topbar-bg);
  backdrop-filter:blur(8px);
  box-shadow:var(--sh);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:0 14px 0 16px;
}
.topbar-title{
  flex:1 1 auto;
  min-width:0;
  font-size:13px;
  font-weight:800;
  letter-spacing:.02em;
  color:var(--t);
  display:flex;
  align-items:center;
  gap:8px;
}
.topbar-title .school-name{
  min-width:0;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.topbar-title .school-id-chip{
  flex:0 0 auto;
  border:1px solid var(--a);
  background:var(--as);
  color:var(--ah);
  border-radius:999px;
  padding:2px 8px;
  font-size:10px;
  font-weight:800;
  letter-spacing:.03em;
}
.right{display:flex;align-items:center;gap:10px;font-size:12px;color:var(--tm);flex:0 0 auto}
.top-user-meta{
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  min-width:140px;
  line-height:1.15;
}
.top-user-name{
  font-size:12px;
  font-weight:800;
  color:var(--t);
}
.top-user-role{
  font-size:10px;
  color:var(--tm);
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:.05em;
}
.icon-btn{
  width:34px;
  height:34px;
  border-radius:10px;
  border:1px solid var(--icon-btn-border);
  background:var(--icon-btn-bg);
  color:var(--icon-btn-text);
  display:grid;
  place-items:center;
  cursor:pointer;
  transition:.15s;
}
.icon-btn:hover{background:var(--as);color:var(--ah);border-color:#bfdbfe}
.icon-btn svg,.icon-btn .lucide{width:16px;height:16px}
.icon-btn .lucide{fill:none;stroke:currentColor;stroke-width:2}
.mobile-profile-btn{display:none}
.search-overlay{
  position:fixed;
  inset:0;
  background:rgba(15,23,42,.35);
  backdrop-filter:blur(3px);
  display:none;
  align-items:flex-start;
  justify-content:center;
  padding-top:80px;
  z-index:140;
}
.search-overlay.show{display:flex}
.search-box{
  width:min(760px,94vw);
  background:#fff;
  border:1px solid #e2e8f0;
  border-radius:14px;
  box-shadow:0 20px 40px rgba(15,23,42,.2);
  overflow:hidden;
}
.search-input{
  width:100%;
  border:0;
  border-bottom:1px solid #e2e8f0;
  padding:12px 14px;
  font-size:14px;
}
.search-input:focus{outline:none}
.search-results{
  max-height:360px;
  overflow:auto;
}
.search-empty{
  padding:12px 14px;
  color:var(--tm);
  font-size:12px;
}
.search-item{
  border:0;
  background:#fff;
  width:100%;
  text-align:left;
  padding:10px 14px;
  border-bottom:1px solid #f1f5f9;
  cursor:pointer;
}
.search-item:hover,
.search-item.active{background:#eff6ff}
.search-item-title{font-size:13px;font-weight:700;color:var(--t)}
.search-item-meta{font-size:11px;color:var(--tm);margin-top:2px}
.search-item-type{
  display:inline-block;
  margin-left:6px;
  padding:1px 6px;
  border-radius:999px;
  font-size:10px;
  font-weight:700;
  color:#475569;
  background:#e2e8f0;
}
.welcome-title{
  margin:0px 0 0;
  font-size:36px;
  line-height:1.02;
  font-weight:900;
  letter-spacing:-.02em;
  color:#0f172a;
  text-align:center;
}
.welcome-icon{
  display:inline-block;
  transform-origin:50% 70%;
  animation:welcomeIconFloat 2.2s ease-in-out infinite;
}
@keyframes welcomeIconFloat{
  0%,100%{transform:translateY(0) rotate(0deg)}
  30%{transform:translateY(-2px) rotate(-5deg)}
  65%{transform:translateY(-1px) rotate(4deg)}
}
.welcome-subtitle{
  margin:0 0 20px;
  color:#475569;
  font-size:14px;
  line-height:1.35;
  max-width:760px;
  text-align:center;
  margin-inline:auto;
}
body[data-theme="dracula"] .welcome-title,
body[data-theme="crimson-black"] .welcome-title{
  color:#f8fafc;
  text-shadow:0 1px 0 rgba(15,23,42,.55), 0 8px 22px rgba(2,6,23,.4);
}
body[data-theme="dracula"] .welcome-subtitle,
body[data-theme="crimson-black"] .welcome-subtitle{
  color:#e2e8f0;
  max-width:840px;
  padding:8px 12px;
  border-radius:10px;
  background:rgba(2,6,23,.26);
  border:1px solid rgba(148,163,184,.28);
  box-shadow:0 8px 22px rgba(2,6,23,.24);
  backdrop-filter:blur(2px);
}
body[data-theme="dracula"] .welcome-icon,
body[data-theme="crimson-black"] .welcome-icon{
  filter:drop-shadow(0 3px 9px rgba(250,204,21,.4));
}
.actions-hero{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:12px;
}
.actions-kpis{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin:12px 0 16px;
}
.actions-kpi{
  border:1px solid #e2e8f0;
  border-radius:10px;
  padding:10px;
  background:#fff;
}
.actions-kpi .label{font-size:11px;color:var(--tm)}
.actions-kpi .value{font-size:24px;font-weight:700}
.actions-kpi.crit{background:#fef2f2}
.actions-kpi.warn{background:#fffbeb}
.actions-kpi.good{background:#f0fdf4}
.actions-modal-overlay{
  position:fixed;
  inset:0;
  background:rgba(15,23,42,.4);
  backdrop-filter:blur(3px);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:190;
}
.actions-modal-overlay.show{display:flex}
.actions-modal{
  width:min(1100px,96vw);
  max-height:88vh;
  overflow:hidden;
  background:var(--modal-bg);
  border:1px solid var(--modal-border);
  border-radius:16px;
  box-shadow:0 24px 42px rgba(15,23,42,.25);
  display:flex;
  flex-direction:column;
}
.setup-overlay{
  background:rgba(2,6,23,.96);
  backdrop-filter:none;
}
.setup-modal{
  width:min(760px,96vw);
  border:2px solid transparent;
  background:
    linear-gradient(180deg,#0b1220 0%,#101a2f 100%) padding-box,
    linear-gradient(120deg,#22d3ee,#3b82f6,#22c55e,#3b82f6,#22d3ee) border-box;
  background-size:100% 100%,300% 300%;
  animation:setupBorderMove 8s linear infinite;
  color:#e2e8f0;
}
.setup-modal .modal-head{
  padding:20px 24px 16px;
  background:rgba(15,23,42,.88);
  border-bottom:1px solid rgba(56,189,248,.35);
}
.setup-title-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.setup-close-btn{
  display:none;
}
.setup-modal .modal-foot{
  padding:14px 24px 18px;
  background:rgba(15,23,42,.9);
  border-top:1px solid rgba(56,189,248,.35);
}
.setup-modal .modal-body{
  padding:22px 24px 20px;
}
.setup-modal .modal-head h3{
  font-size:22px;
  display:flex;
  align-items:center;
  gap:8px;
}
.setup-modal .modal-sub{
  margin-top:8px;
  font-size:14px;
}
.setup-modal .modal-sub,
.setup-modal .dm-muted{color:#93c5fd}
.setup-modal label{
  color:#cbd5e1;
  font-size:12px;
}
.setup-modal .field-label,
.login-modal .field-label{
  display:flex;
  align-items:center;
  gap:6px;
}
.setup-modal .field-label .lucide,
.login-modal .field-label .lucide{
  width:14px;
  height:14px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.setup-input-shell{
  position:relative;
}
.setup-input-shell > i,
.setup-input-shell > .lucide{
  position:absolute;
  left:12px;
  top:50%;
  transform:translateY(-50%);
  color:#94a3b8;
  pointer-events:none;
}
.setup-input-shell > i .lucide,
.setup-input-shell > .lucide{
  width:14px;
  height:14px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.setup-input-shell .stage-input{
  padding-left:34px;
}
.setup-input-shell select.stage-input{
  padding-right:34px;
}
.setup-modal .stage-input{
  background:rgba(15,23,42,.72);
  border-color:#334155;
  color:#f8fafc;
  min-height:42px;
}
.setup-modal .stage-input::placeholder{color:#94a3b8}
.setup-modal .setup-layout{
  gap:18px;
}
.setup-modal .profile-section{
  background:rgba(15,23,42,.58);
  border-color:#334155;
  border-radius:16px;
  padding:18px;
  box-shadow:0 8px 20px rgba(2,6,23,.24);
}
.setup-modal .profile-section .profile-grid{
  gap:16px 18px;
}
.setup-section-head{
  margin:0 0 10px;
}
.setup-section-sub{
  display:none;
}
.setup-field-head{
  margin:0 0 6px;
}
.setup-field-meta{
  display:none;
}
.setup-overlay.personnel-mode .setup-section-school{
  opacity:.75;
  padding:8px 0;
}
.setup-overlay.personnel-mode .setup-section-profile{
  padding:8px 0 0;
}
.setup-overlay.personnel-mode .setup-modal{
  width:min(560px,94vw);
  max-height:92vh;
  border:6px solid transparent;
  background:
    linear-gradient(var(--modal-bg),var(--modal-bg)) padding-box,
    linear-gradient(120deg,#60a5fa,#34d399,#f472b6,#60a5fa) border-box;
  animation:none;
  color:var(--t);
  box-shadow:
    0 22px 46px rgba(15,23,42,.26),
    0 0 0 1px rgba(255,255,255,.78),
    0 0 16px rgba(255,255,255,.58),
    0 0 34px rgba(255,255,255,.36);
}
.setup-overlay.personnel-mode .setup-modal .modal-head{
  padding:14px 16px 10px;
  background:var(--modal-head-bg);
  border-bottom:1px solid var(--modal-head-border);
}
.setup-overlay.personnel-mode .setup-close-btn{
  display:inline-flex;
}
.setup-overlay.personnel-mode .setup-modal .modal-head h3{
  font-size:18px;
  color:#0f172a;
}
.setup-overlay.personnel-mode .setup-modal .modal-sub{
  margin-top:4px;
  margin-left:30px;
  font-size:12px;
  color:var(--tm);
}
.setup-overlay.personnel-mode .setup-modal .modal-body{
  padding:12px 16px;
}
.setup-overlay.personnel-mode .setup-modal .modal-foot{
  padding:10px 16px 12px;
  background:var(--modal-foot-bg);
  border-top:1px solid var(--modal-foot-border);
}
.setup-overlay.personnel-mode .setup-modal .setup-layout{
  gap:10px;
}
.setup-overlay.personnel-mode .setup-modal .setup-section{
  border:0;
  background:transparent;
  box-shadow:none;
  border-radius:0;
  padding:0;
  opacity:1;
}
.setup-overlay.personnel-mode .setup-modal .setup-section-head{
  margin:0 0 8px;
}
.setup-overlay.personnel-mode .setup-modal .setup-section-sub{
  display:none;
}
.setup-overlay.personnel-mode .setup-modal .setup-section-sub:empty{
  display:none;
}
.setup-overlay.personnel-mode .setup-modal .setup-field-head{
  margin:0 0 4px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}
.setup-overlay.personnel-mode .setup-modal .setup-field-meta{
  display:inline-flex;
  font-size:12px;
  color:var(--tm);
}
.setup-overlay.personnel-mode .setup-modal .setup-field-meta{
  text-transform:uppercase;
  letter-spacing:.03em;
  font-size:10px;
  font-weight:700;
}
.setup-overlay.personnel-mode .setup-modal .setup-field-meta:empty{
  display:none;
}
.setup-overlay.personnel-mode .setup-modal .setup-section-school .setup-field-meta{
  text-transform:none;
  letter-spacing:0;
  font-size:11px;
  font-weight:500;
}
.setup-overlay.personnel-mode .setup-modal .setup-section-profile .setup-field-head:first-child .setup-field-meta{
  border:1px solid #e2e8f0;
  border-radius:6px;
  background:#f8fafc;
  padding:2px 6px;
}
.setup-overlay.personnel-mode .setup-modal .setup-section-profile .setup-field-head:last-child .setup-field-meta{
  text-transform:none;
  font-style:italic;
  font-size:11px;
}
.setup-overlay.personnel-mode .setup-modal .setup-section-profile{
  border-top:1px solid var(--border);
  padding:8px 0 0;
}
.setup-overlay.personnel-mode .setup-modal .setup-section .profile-grid{
  gap:8px 10px;
}
.setup-overlay.personnel-mode .setup-modal .profile-section-title{
  margin:0 0 4px;
  font-size:11px;
  letter-spacing:.01em;
  color:var(--tm);
}
.setup-overlay.personnel-mode .setup-modal .setup-step{
  display:none;
}
.setup-overlay.personnel-mode .setup-modal label{
  color:#334155;
  font-size:11px;
  font-weight:700;
}
.setup-overlay.personnel-mode .setup-modal .field-label .lucide{
  opacity:.85;
}
.setup-overlay.personnel-mode .setup-modal .stage-input{
  min-height:36px;
  padding:0 12px;
  font-size:13px;
  border-radius:10px;
  background:var(--modal-bg);
  border-color:var(--border);
  color:var(--t);
}
.setup-overlay.personnel-mode .setup-modal .setup-input-shell .stage-input{
  padding-left:34px;
}
.setup-overlay.personnel-mode .setup-modal .setup-input-shell select.stage-input{
  padding-right:34px;
}
.setup-overlay.personnel-mode .setup-modal .setup-input-shell > i{
  color:#94a3b8;
}
.setup-overlay.personnel-mode .setup-modal .stage-input:focus{
  border-color:var(--a);
  box-shadow:0 0 0 2px rgba(59,130,246,.2);
}
.setup-overlay.personnel-mode .setup-hint{
  margin:8px 0 0;
  font-size:12px;
  color:var(--tm);
}
.setup-overlay.personnel-mode .setup-hint.error{
  color:#b91c1c;
}
.setup-overlay.personnel-mode .setup-hint.success{
  color:#166534;
}
.setup-overlay.personnel-mode .setup-foot-actions{
  justify-content:space-between !important;
}
.setup-overlay.personnel-mode .setup-cancel-btn{
  display:inline-flex;
}
.setup-cancel-btn{
  display:none;
}
.setup-modal .profile-section-title{
  color:#bfdbfe;
  margin:0 0 14px;
  font-size:14px;
  letter-spacing:.02em;
  display:flex;
  align-items:center;
  gap:10px;
}
.setup-step{
  width:24px;
  height:24px;
  border-radius:999px;
  border:1px solid rgba(147,197,253,.55);
  background:rgba(59,130,246,.22);
  color:#dbeafe;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:12px;
  font-weight:800;
}
.setup-hint{
  margin:14px 0 0;
  font-size:13px;
  color:#93c5fd;
}
.setup-hint:empty{display:none}
.setup-hint.error{color:#fca5a5}
.setup-hint.success{color:#86efac}
@keyframes setupBorderMove{
  0%{background-position:0 0,0% 50%}
  50%{background-position:0 0,100% 50%}
  100%{background-position:0 0,0% 50%}
}
@media (max-width:700px){
  .setup-modal{
    width:min(96vw,760px);
  }
  .setup-modal .modal-head,
  .setup-modal .modal-body,
  .setup-modal .modal-foot{
    padding-left:16px;
    padding-right:16px;
  }
  .setup-modal .profile-section{
    padding:14px;
  }
  .setup-overlay.personnel-mode .setup-section-profile{
    padding:0;
  }
  .setup-overlay.personnel-mode .setup-modal .modal-head,
  .setup-overlay.personnel-mode .setup-modal .modal-body,
  .setup-overlay.personnel-mode .setup-modal .modal-foot{
    padding-left:16px;
    padding-right:16px;
  }
  .login-modal .modal-head,
  .login-modal .modal-body,
  .login-modal .modal-foot{
    padding-left:16px;
    padding-right:16px;
  }
}
@media (max-height:760px){
  .setup-overlay.personnel-mode .setup-modal{
    max-height:96vh;
  }
  .setup-overlay.personnel-mode .setup-modal .modal-head{
    padding:10px 14px 8px;
  }
  .setup-overlay.personnel-mode .setup-modal .modal-body{
    padding:10px 14px;
  }
  .setup-overlay.personnel-mode .setup-modal .modal-foot{
    padding:8px 14px 10px;
  }
  .setup-overlay.personnel-mode .setup-modal .setup-layout{
    gap:8px;
  }
  .setup-overlay.personnel-mode .setup-modal .stage-input{
    min-height:34px;
    font-size:12px;
  }
  .setup-overlay.personnel-mode .setup-modal .setup-field-meta{
    display:none;
  }
}
.modal-sm{width:min(520px,94vw)}
.modal-md{width:min(620px,95vw)}
.modal-lg{width:min(980px,97vw)}
.modal-xl{width:min(1120px,98vw)}
/* Keep Data Manager overlays inside viewport */
.actions-modal-overlay#dataImportOverlay,
.actions-modal-overlay#dataValidationOverlay,
.actions-modal-overlay#dataExportOverlay{
  align-items:flex-start;
  overflow:auto;
  padding:56px 12px 12px;
}
.actions-modal-overlay#dataImportOverlay .actions-modal,
.actions-modal-overlay#dataValidationOverlay .actions-modal,
.actions-modal-overlay#dataExportOverlay .actions-modal{
  width:min(1120px, calc(100vw - 24px));
  max-height:calc(100vh - 68px);
}
.actions-modal-overlay#dataImportOverlay .actions-modal{
  width:min(980px, calc(100vw - 24px));
}
.actions-modal-overlay#dataImportOverlay .modal-head{
  padding:10px 14px 8px;
}
.actions-modal-overlay#dataImportOverlay .modal-body{
  padding:10px 14px;
}
.actions-modal-overlay#dataImportOverlay .modal-foot{
  padding:8px 14px;
}
.actions-modal-overlay#dataImportOverlay .dm-layout{
  gap:8px;
}
.actions-modal-overlay#dataImportOverlay .dm-section{
  padding:8px;
  border-radius:10px;
}
.actions-modal-overlay#dataImportOverlay .dm-section-head{
  margin-bottom:6px;
}
.actions-modal-overlay#dataImportOverlay .data-manager-bar{
  gap:8px;
}
.actions-modal-overlay#dataImportOverlay .data-manager-file{
  min-width:180px;
  padding:6px 8px;
}
.actions-modal-overlay#dataImportOverlay .data-manager-mode{
  gap:6px;
  margin:0 0 8px;
}
.actions-modal-overlay#dataImportOverlay .data-manager-mode label{
  padding:4px 8px;
  font-size:11px;
}
.actions-modal-overlay#dataImportOverlay .dm-inline-status{
  margin:0 0 8px;
  padding:7px 8px;
  font-size:11px;
}
.actions-modal-overlay#dataImportOverlay .btn.btn-sm{
  min-height:30px;
  padding:0 9px;
  font-size:11px;
}
.actions-modal-overlay#dataExportOverlay .actions-modal{
  width:min(980px, calc(100vw - 24px));
}
.actions-modal-overlay#dataExportOverlay{
  align-items:center;
  padding-top:12px;
}
@media (max-height:760px){
  .actions-modal-overlay#dataImportOverlay,
  .actions-modal-overlay#dataValidationOverlay,
  .actions-modal-overlay#dataExportOverlay{
    padding-top:44px;
  }
}
.modal-head{
  padding:14px 16px 12px;
  border-bottom:1px solid var(--modal-head-border);
  background:var(--modal-head-bg);
}
.modal-head h3{
  margin:0;
  font-size:17px;
  font-weight:800;
}
.modal-head .small-btn,
.modal-head .btn,
.modal-head .archived-history-close{
  min-height:32px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding-top:0;
  padding-bottom:0;
}
.modal-sub{
  margin:6px 0 0;
  font-size:12px;
  color:#64748b;
}
.modal-body{
  padding:14px 16px;
  overflow:auto;
}
.modal-foot{
  padding:10px 16px;
  border-top:1px solid var(--modal-foot-border);
  background:var(--modal-foot-bg);
  backdrop-filter:blur(5px);
  position:sticky;
  bottom:0;
  z-index:2;
  box-shadow:none;
  transition:box-shadow .18s ease;
}
.actions-modal.modal-body-scrolled .modal-foot{
  box-shadow:0 -8px 20px rgba(15,23,42,.12);
}
.modal-foot .ics-card-actions{
  margin-top:0;
}
.modal-toast{
  position:absolute;
  top:12px;
  left:50%;
  transform:translateX(-50%);
  min-width:280px;
  max-width:min(88vw,720px);
  border-radius:10px;
  padding:10px 12px;
  font-size:12px;
  font-weight:700;
  box-shadow:0 12px 24px rgba(15,23,42,.2);
  border:1px solid #cbd5e1;
  z-index:200;
}
.modal-toast.success{background:#f0fdf4;color:#166534;border-color:#86efac}
.modal-toast.error{background:#fef2f2;color:#991b1b;border-color:#fecaca}
.modal-toast.warn{background:#fffbeb;color:#92400e;border-color:#fde68a}
.modal-toast.info{background:#eff6ff;color:#1d4ed8;border-color:#bfdbfe}
.login-modal{
  width:min(640px,95vw);
  border:4px solid transparent;
  background:
    linear-gradient(var(--modal-bg),var(--modal-bg)) padding-box,
    linear-gradient(120deg,#60a5fa,#34d399,#f472b6,#60a5fa) border-box;
  box-shadow:
    0 22px 46px rgba(15,23,42,.26),
    0 0 0 1px rgba(255,255,255,.74),
    0 0 14px rgba(255,255,255,.52),
    0 0 28px rgba(255,255,255,.3);
}
.login-modal .modal-head{
  padding:18px 22px 14px;
}
.login-modal .modal-head h3{
  font-size:21px;
  display:flex;
  align-items:center;
  gap:8px;
}
.login-modal .modal-sub{
  margin-top:8px;
  font-size:13px;
}
.login-modal .modal-body{
  padding:18px 22px;
}
.login-layout{
  display:grid;
  gap:14px;
}
.login-section{
  border:1px solid #dbe3ef;
  border-radius:14px;
  background:linear-gradient(180deg,#ffffff 0%,#f8fbff 100%);
  padding:16px;
}
.login-modal .field-label{
  font-size:12px;
  font-weight:700;
  letter-spacing:.01em;
  color:#475569;
}
.login-modal .field-label .lucide{
  opacity:.85;
}
.login-section .stage-input{
  min-height:42px;
  border-radius:10px;
  font-size:14px;
  padding:0 12px;
}
.login-section select.stage-input{
  padding-right:38px;
}
.login-section-soft{
  background:#f8fafc;
}
.login-section-soft label{
  font-size:13px;
  font-weight:600;
}
.login-remember{
  font-size:13px;
  font-weight:600;
}
.login-section-soft input[type="checkbox"]{
  width:15px;
  height:15px;
  accent-color:var(--a);
}
.login-remember input[type="checkbox"]{
  width:15px;
  height:15px;
  accent-color:var(--a);
}
.login-modal .stage-input:focus{
  border-color:var(--a);
  box-shadow:0 0 0 2px rgba(59,130,246,.2);
}
.login-modal .modal-foot{
  padding:12px 22px 16px;
}
.login-hint{
  font-size:13px;
  line-height:1.4;
  color:#64748b;
  margin:12px 0 0;
}
.login-hint.error{color:#b91c1c}
.login-hint.success{color:#166534}
.data-manager-bar{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
  margin:0;
}
.dm-layout{display:grid;gap:12px}
.dm-layout-top{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
  align-items:start;
}
.dm-section{
  border:1px solid var(--modal-border);
  border-radius:12px;
  background:linear-gradient(180deg,var(--modal-bg) 0%,var(--modal-head-bg) 100%);
  box-shadow:0 8px 18px rgba(15,23,42,.08);
  padding:10px;
}
.dm-section-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:8px;
}
.dm-section-head h4{
  margin:0;
  font-size:13px;
  color:var(--t);
}
.dm-step-mark{
  display:none;
  font-size:11px;
  font-weight:800;
  letter-spacing:.2px;
  text-transform:uppercase;
  border-radius:999px;
  padding:4px 8px;
  border:1px solid #86efac;
  background:#f0fdf4;
  color:#166534;
}
.dm-step-mark.show{display:inline-flex;align-items:center}
.dm-section-head p{
  margin:0;
  font-size:11px;
  color:var(--tm);
}
.data-manager-file{
  flex:1;
  min-width:220px;
  border:1px dashed color-mix(in srgb, var(--modal-border) 78%, var(--a) 22%);
  border-radius:10px;
  padding:8px 10px;
  font-size:12px;
  color:var(--t);
  background:var(--modal-head-bg);
}
.data-manager-mode{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin:0 0 10px;
}
.data-manager-mode label{
  display:inline-flex;
  gap:6px;
  align-items:center;
  border:1px solid var(--modal-border);
  border-radius:999px;
  padding:6px 10px;
  font-size:12px;
  font-weight:700;
  color:var(--t);
  background:var(--modal-bg);
}
.dm-kpis{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
  gap:8px;
  margin:10px 0;
}
.dm-kpi{
  border:1px solid var(--modal-border);
  border-radius:10px;
  padding:8px;
  background:var(--modal-bg);
}
.dm-kpi .k{
  font-size:10px;
  text-transform:uppercase;
  letter-spacing:.3px;
  color:var(--tm);
}
.dm-kpi .v{
  font-size:17px;
  font-weight:800;
  color:var(--t);
  margin-top:2px;
}
.dm-kpi.warn{background:color-mix(in srgb,#f59e0b 14%, var(--modal-bg) 86%);border-color:color-mix(in srgb,#f59e0b 42%, var(--modal-border) 58%)}
.dm-kpi.err{background:color-mix(in srgb,#ef4444 12%, var(--modal-bg) 88%);border-color:color-mix(in srgb,#ef4444 38%, var(--modal-border) 62%)}
.dm-preview-table{
  width:100%;
  border-collapse:collapse;
  font-size:12px;
}
.dm-preview-table th,.dm-preview-table td{
  border-bottom:1px solid var(--border);
  padding:7px 6px;
  text-align:left;
}
.dm-preview-table th{
  font-size:11px;
  color:var(--tm);
  background:var(--modal-head-bg);
}
.actions-modal-overlay#dataImportOverlay .stage-input,
.actions-modal-overlay#dataValidationOverlay .stage-input,
.actions-modal-overlay#dataExportOverlay .stage-input{
  background:var(--modal-bg);
  border-color:var(--modal-border);
  color:var(--t);
}
.actions-modal-overlay#dataImportOverlay .stage-input::placeholder,
.actions-modal-overlay#dataValidationOverlay .stage-input::placeholder,
.actions-modal-overlay#dataExportOverlay .stage-input::placeholder{
  color:var(--tm);
}
.dm-muted{
  font-size:12px;
  color:var(--tm);
}
.data-manager-export-filters{
  display:flex;
  gap:8px;
  align-items:flex-end;
  flex-wrap:wrap;
}
.data-manager-export-filters label{
  display:flex;
  flex-direction:column;
  gap:4px;
  font-size:11px;
  color:var(--tm);
  font-weight:700;
}
.data-manager-export-filters .stage-input{
  min-width:150px;
}
.dm-export-actions{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-top:8px;
}
.dm-foot-actions{
  display:flex;
  width:100%;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}
.dm-foot-left,.dm-foot-right{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.dm-switch-btn{
  background:linear-gradient(135deg,var(--a) 0%,var(--ah) 100%);
  color:#fff !important;
  border:1px solid rgba(255,255,255,.22);
  box-shadow:0 8px 18px rgba(37,99,235,.28);
  font-weight:800;
}
.dm-switch-btn:hover{
  transform:translateY(-1px);
  box-shadow:0 12px 24px rgba(37,99,235,.34);
}
.dm-inline-status{
  margin:0 0 10px;
  padding:8px 10px;
  border-radius:8px;
  font-size:12px;
  font-weight:700;
  display:none;
}
.dm-inline-status.show{display:block}
.dm-inline-status.success{background:#f0fdf4;border:1px solid #86efac;color:#166534}
.dm-inline-status.error{background:#fef2f2;border:1px solid #fecaca;color:#991b1b}
.dm-inline-status.info{background:#eff6ff;border:1px solid #bfdbfe;color:#1d4ed8}
.dm-verify-panel{
  margin:8px 0 10px;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--surface-soft);
  color:var(--t);
  padding:9px 10px;
  font-size:12px;
  font-weight:700;
}
.dm-verify-panel.success{background:#f0fdf4;border-color:#86efac;color:#166534}
.dm-verify-panel.error{background:#fef2f2;border-color:#fecaca;color:#991b1b}
.dm-verify-panel.warn{background:#fffbeb;border-color:#fde68a;color:#92400e}
.dm-verify-panel.info{background:#eff6ff;border-color:#bfdbfe;color:#1d4ed8}
.dm-verify-meta{
  display:block;
  margin-top:5px;
  font-weight:600;
  font-size:11px;
  word-break:break-all;
  color:inherit;
  opacity:.95;
}
.import-history-modal{
  width:min(960px,96vw);
}
.dm-history-list{
  margin:0;
  padding-left:18px;
  display:grid;
  gap:6px;
}
.dm-history-list li{
  font-size:12px;
  color:var(--t);
}
.dm-history-time{
  color:var(--tm);
  font-size:11px;
}
.ics-no-wrap{
  display:flex;
  align-items:center;
  width:100%;
}
.ics-no-line{
  display:flex;
  align-items:center;
  gap:6px;
  width:100%;
  min-width:0;
}
.ics-status-dot{
  display:inline-flex;
  justify-content:center;
  align-items:center;
  width:16px;
  height:16px;
  border-radius:50%;
  border:1px solid transparent;
  font-size:10px;
  font-weight:900;
  line-height:1;
  cursor:help;
  flex-shrink:0;
}
.ics-status-dot.new{background:#e0f2fe;border-color:#7dd3fc;color:#0c4a6e}
.ics-status-dot.imported{background:#dcfce7;border-color:#86efac;color:#14532d}
.ics-status-dot.updated{background:#fef3c7;border-color:#fcd34d;color:#78350f}
.ics-status-chip{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height:18px;
  border-radius:999px;
  border:1px solid #cbd5e1;
  padding:0 7px;
  font-size:var(--tbl-meta-size);
  font-weight:800;
  letter-spacing:.01em;
  line-height:1;
  cursor:help;
  white-space:nowrap;
}
.ics-status-chip.new{background:#e0f2fe;border-color:#7dd3fc;color:#0c4a6e}
.ics-status-chip.imported{background:#dcfce7;border-color:#86efac;color:#14532d}
.ics-status-chip.updated{background:#fef3c7;border-color:#fcd34d;color:#78350f}
.ics-status-chip.danger{background:#fee2e2;border-color:#fca5a5;color:#991b1b}
.ics-status-mini{
  display:inline-flex;
  align-items:center;
  gap:5px;
  border:1px solid #dbe3ef;
  border-radius:999px;
  padding:2px 7px;
  font-size:var(--tbl-meta-size);
  font-weight:700;
  color:#334155;
  background:#f8fafc;
  white-space:nowrap;
}
.ics-status-mini .dot{
  width:6px;
  height:6px;
  border-radius:999px;
  background:currentColor;
}
.ics-status-mini.new{color:#0369a1;border-color:#7dd3fc;background:#e0f2fe}
.ics-status-mini.imported{color:#166534;border-color:#86efac;background:#dcfce7}
.ics-status-mini.updated{color:#92400e;border-color:#fcd34d;background:#fef3c7}
.ics-status-mini.muted{color:#64748b;border-color:#e2e8f0;background:#f8fafc}
.ics-status-mini[data-warn="1"]{
  box-shadow:inset 0 0 0 1px #fca5a5;
}
.u-truncate{
  display:block;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  min-width:0;
}
.u-mono{
  font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;
  letter-spacing:.01em;
}
.ics-table td .ics-link-btn,
.detail-table td .ics-link-btn,
.actions-table td .ics-link-btn,
.ics-table td .u-mono,
.detail-table td .u-mono{
  font-size:inherit;
}
.dm-hub-actions{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}
.dm-hub-btn{
  display:flex;
  align-items:flex-start;
  gap:12px;
  text-align:left;
  border:1px solid var(--border);
  border-radius:16px;
  background:var(--surface);
  padding:14px 16px;
  cursor:pointer;
  box-shadow:0 2px 8px rgba(15,23,42,.08);
  transition:transform .14s ease, box-shadow .14s ease, border-color .14s ease;
}
.dm-hub-ico{
  width:36px;
  height:36px;
  border-radius:12px;
  display:grid;
  place-items:center;
  flex-shrink:0;
  background:var(--surface-soft);
  color:var(--t);
}
.dm-hub-ico svg,.dm-hub-ico .lucide{width:18px;height:18px}
.dm-hub-ico .lucide{fill:none;stroke:currentColor;stroke-width:2}
.dm-hub-copy{
  display:grid;
  gap:5px;
  min-width:0;
}
.dm-hub-copy strong{
  display:block;
  font-size:13px;
  line-height:1.2;
  color:var(--t);
}
.dm-hub-copy span{
  display:block;
  font-size:11px;
  color:var(--tm);
  line-height:1.65;
}
.dm-hub-btn:hover{
  border-color:var(--modal-head-border);
  box-shadow:0 6px 14px rgba(15,23,42,.12);
  transform:translateY(-1px);
}
body[data-theme="dracula"] .dm-hub-btn,
body[data-theme="crimson-black"] .dm-hub-btn,
body[data-theme="dracula-nocturne"] .dm-hub-btn{
  background:var(--modal-bg);
  border-color:var(--modal-border);
}
body[data-theme="dracula"] .dm-hub-ico,
body[data-theme="crimson-black"] .dm-hub-ico,
body[data-theme="dracula-nocturne"] .dm-hub-ico{
  background:var(--modal-head-bg);
}
body[data-theme="dracula"] .dm-hub-btn:hover,
body[data-theme="crimson-black"] .dm-hub-btn:hover,
body[data-theme="dracula-nocturne"] .dm-hub-btn:hover{
  border-color:var(--a);
}
.dm-hub-modal{
  width:min(860px,94vw);
  border-radius:24px;
  overflow:hidden;
  background:var(--surface-soft);
}
.dm-hub-modal .modal-head{
  padding:20px;
}
.dm-hub-head-row{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
}
.dm-hub-title-wrap{
  display:flex;
  align-items:flex-start;
  gap:12px;
}
.dm-hub-title-ico{
  width:34px;
  height:34px;
  border-radius:12px;
  background:var(--m);
  color:var(--t);
  display:grid;
  place-items:center;
  flex-shrink:0;
}
.dm-hub-title-ico .lucide{
  width:17px;
  height:17px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.dm-hub-modal .modal-sub{
  margin-top:2px;
  color:var(--tm);
}
.dm-hub-close{
  /* Unified by modal-close-btn */
}
.dm-hub-modal .modal-body{
  padding:20px;
}
.dm-hub-foot{
  margin-top:18px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.dm-hub-foot-note{
  font-size:12px;
  color:var(--tm);
}
.dm-hub-version{
  font-size:11px;
  font-weight:700;
  color:var(--t);
  border:1px solid var(--border);
  background:var(--surface-soft);
  border-radius:999px;
  padding:3px 11px;
}
@media (max-width:640px){
  .dm-layout-top{grid-template-columns:1fr}
  .dm-section-head{flex-direction:column;align-items:flex-start}
  .dm-hub-actions{grid-template-columns:1fr}
  .dm-hub-modal .modal-head,
  .dm-hub-modal .modal-body{padding:14px}
}
.actions-table{width:100%;border-collapse:collapse;font-size:var(--tbl-body-size)}
.actions-table th,.actions-table td{border-bottom:1px solid #e2e8f0;padding:8px 6px;text-align:left;font-size:var(--tbl-body-size)}
.actions-table th{text-transform:none;color:#475569;font-size:var(--tbl-head-size)}
.dash-grid{display:grid;grid-template-columns:repeat(6,minmax(0,1fr));gap:12px;margin:12px 0 16px}
.dash-kpi{
  border:1px solid #cbd5e1;
  border-radius:14px;
  background:linear-gradient(180deg,#ffffff 0%,#f8fafc 100%);
  padding:12px;
  box-shadow:0 6px 14px rgba(15,23,42,.06);
  position:relative;
  overflow:hidden;
}
.dash-kpi-btn{
  width:100%;
  text-align:left;
  cursor:pointer;
  border:1px solid #cbd5e1;
  transition:transform .18s ease, box-shadow .2s ease;
}
.dash-kpi-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 10px 20px rgba(15,23,42,.1);
}
.dash-kpi::before{
  content:'';
  position:absolute;
  left:0;top:0;bottom:0;
  width:4px;
  background:#60a5fa;
}
.dash-kpi .k{font-size:11px;color:#64748b;text-transform:uppercase;letter-spacing:.35px}
.dash-kpi .v{font-size:24px;font-weight:800;color:#0f172a;line-height:1.2;margin-top:4px}
.dash-kpi.warn{background:linear-gradient(180deg,#fffdf2 0%,#fffbeb 100%)}
.dash-kpi.warn::before{background:#f59e0b}
.dash-kpi.danger{background:linear-gradient(180deg,#fff5f5 0%,#fef2f2 100%)}
.dash-kpi.danger::before{background:#ef4444}
.dash-kpi.good{background:linear-gradient(180deg,#f4fff8 0%,#f0fdf4 100%)}
.dash-kpi.good::before{background:#16a34a}
.dash-panels{display:grid;grid-template-columns:1.2fr 1fr;gap:14px}
.dash-chipbar{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0 0}
.dash-chip{
  border:1px solid #cbd5e1;
  background:#fff;
  color:var(--tm);
  border-radius:999px;
  padding:5px 10px;
  font-size:11px;
  font-weight:700;
  cursor:pointer;
  transition:background .16s ease, border-color .16s ease, transform .16s ease;
}
.dash-chip:hover{background:#eff6ff;border-color:#93c5fd;transform:translateY(-1px)}
.dash-list{margin:0;padding-left:18px}
.dash-list li{margin:7px 0;color:#334155;font-size:12px}
.dash-actions{display:flex;flex-wrap:wrap;gap:8px}
.dash-actions .small-btn,
.dash-actions .btn{box-shadow:0 4px 10px rgba(15,23,42,.08)}
.dash-2col{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:14px}
.dash-note{font-size:11px;color:#64748b}
.dash-empty{
  border:1px dashed #cbd5e1;
  border-radius:12px;
  padding:12px;
  background:#f8fafc;
  margin-top:12px;
}
.dash-topbar{
  border:1px solid #dbe3ef;
  border-radius:16px;
  background:#fff;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:12px 14px;
  box-shadow:0 8px 18px rgba(15,23,42,.05);
}
.dash-topbar-left h2{
  margin:0;
  font-size:35px;
  line-height:1.05;
  color:#0f172a;
}
.dash-topbar-left p{
  margin:4px 0 0;
  font-size:24px;
  color:#64748b;
}
.dash-topbar-actions{
  display:flex;
  gap:8px;
  align-items:center;
}
.dash-top-icon-btn{
  width:38px;
  height:38px;
  border-radius:12px;
  border:1px solid #dbe3ef;
  background:#fff;
  color:#334155;
  display:grid;
  place-items:center;
  cursor:pointer;
}
.dash-top-icon-btn svg{
  width:18px;
  height:18px;
  fill:currentColor;
}
.dash-notif-btn{position:relative}
.dash-notif-badge{
  position:absolute;
  top:-6px;
  right:-6px;
  min-width:18px;
  height:18px;
  border-radius:999px;
  background:#ea580c;
  color:#fff;
  font-size:10px;
  font-weight:800;
  display:grid;
  place-items:center;
  padding:0 4px;
  border:2px solid #fff;
}
.dash-overview,
.dash-recent-wrap,
.dash-notes-wrap{
  --dash-space:20px;
}
.dash-overview{
  margin-top:var(--dash-space);
  border:0;
  border-radius:0;
  background:transparent;
  padding:0;
  box-shadow:none;
}
.dash-overview-actions-row{
  display:flex;
  justify-content:flex-end;
  gap:var(--dash-space);
  margin-bottom:var(--dash-space);
}
.dash-overview-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:var(--dash-space);
}
.dash-overview-chips{
  display:flex;
  gap:var(--dash-space);
}
.dash-overview-chip{
  border:1px solid #cbd5e1;
  background:#fff;
  border-radius:999px;
  color:#0f172a;
  font-size:12px;
  font-weight:700;
  padding:3px 10px;
}
.dash-overview-chip.muted{
  color:#334155;
  background:#eef2ff;
  border-color:#c7d2fe;
}
.dash-overview-head-left h3{
  margin:8px 0 2px;
  font-size:56px;
  line-height:1.05;
  color:#0f172a;
}
.dash-overview-head-left p{
  margin:0;
  font-size:34px;
  color:#475569;
}
.dash-overview-head-actions{
  display:flex;
  gap:var(--dash-space);
  margin-top:52px;
}
.dash-overview-kpis{
  margin-top:var(--dash-space);
  display:grid;
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:var(--dash-space);
}
.dash-overview-kpi{
  border:1px solid #dbe3ef;
  border-radius:16px;
  background:#fff;
  padding:14px 14px 12px;
  position:relative;
  min-height:136px;
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
  box-shadow:0 8px 18px rgba(15,23,42,.05);
}
.dash-overview-kpi.base{
  background:linear-gradient(180deg,#ffffff 0%,#f8fbff 100%);
  border-color:#dbe3ef;
}
.dash-overview-kpi.good{
  background:linear-gradient(180deg,#f3fdf8 0%,#e8f8f1 100%);
  border-color:#86efac;
}
.dash-overview-kpi.warn{
  background:linear-gradient(180deg,#fff6f7 0%,#ffecef 100%);
  border-color:#fda4af;
}
.dash-overview-kpi.asset{
  background:linear-gradient(180deg,#ffffff 0%,#f8fafc 100%);
  border-color:#cbd5e1;
}
.dash-overview-kpi.asset .v{
  font-size:clamp(34px,3.1vw,52px);
  padding-right:4px;
}
.dash-overview-kpi .k{
  font-size:12px;
  color:#64748b;
  font-weight:700;
  letter-spacing:.01em;
}
.dash-overview-kpi .v{
  margin-top:8px;
  font-size:52px;
  line-height:1;
  color:#0f172a;
  font-weight:900;
  letter-spacing:-.03em;
  font-variant-numeric:tabular-nums;
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.dash-overview-kpi .v.value-scroll{
  position:relative;
  text-overflow:clip;
}
.dash-overview-kpi .v.value-scroll .value-scroll-track{
  display:inline-block;
  white-space:nowrap;
  will-change:transform;
}
.dash-overview-kpi .v.value-scroll.is-overflow .value-scroll-track{
  padding-right:24px;
  animation:dashValueTicker var(--ticker-duration, 8s) linear infinite alternate;
}
@keyframes dashValueTicker{
  from{transform:translateX(0)}
  to{transform:translateX(calc(var(--ticker-distance, 0px) * -1))}
}
@media (prefers-reduced-motion: reduce){
  .dash-overview-kpi .v.value-scroll.is-overflow .value-scroll-track{
    animation:none;
  }
}
.dash-overview-kpi .s{
  margin-top:8px;
  color:#64748b;
  font-size:14px;
}
.dash-kpi-ico{
  position:absolute;
  top:14px;
  right:14px;
  width:36px;
  height:36px;
  border-radius:999px;
  border:1px solid #dbe3ef;
  background:#ffffffcf;
  color:#475569;
  display:grid;
  place-items:center;
  box-shadow:0 2px 6px rgba(15,23,42,.07);
}
.dash-kpi-ico svg,.dash-kpi-ico .lucide{
  width:16px;
  height:16px;
}
.dash-kpi-ico .lucide{fill:none;stroke:currentColor;stroke-width:2}
.dash-overview-kpi.base .dash-kpi-ico{color:#2563eb;border-color:#bfdbfe}
.dash-overview-kpi.good .dash-kpi-ico{color:#059669;border-color:#a7f3d0}
.dash-overview-kpi.warn .dash-kpi-ico{color:#e11d48;border-color:#fecdd3}
.dash-overview-kpi.asset .dash-kpi-ico{color:#2563eb;border-color:#bfdbfe}
.dash-overview-grid{
  margin-top:var(--dash-space);
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:var(--dash-space);
}
.dash-action-card,.dash-compliance-card{
  border:1px solid #dbe3ef;
  border-radius:14px;
  background:#fff;
  padding:12px;
  box-shadow:0 6px 14px rgba(15,23,42,.04);
}
.dash-action-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  margin-bottom:8px;
}
.dash-action-card .ico{
  width:40px;
  height:40px;
  border-radius:12px;
  background:#fff7ed;
  border:1px solid #fed7aa;
  display:grid;
  place-items:center;
  color:#ea580c;
}
.dash-action-card .ico svg,.dash-action-card .ico .lucide{
  width:18px;
  height:18px;
}
.dash-action-card .ico .lucide{fill:none;stroke:currentColor;stroke-width:2}
.dash-action-card h4,.dash-compliance-card h4{
  margin:0;
  font-size:16px;
  color:#0f172a;
}
.dash-action-card p{
  margin:6px 0 0;
  font-size:14px;
  color:#64748b;
}
.dash-compliance-card{
  grid-row:span 2;
}
.dash-comp-status-label{
  margin:0 0 8px;
  color:#64748b;
  font-size:14px;
}
.dash-compliance-badge{
  border-radius:999px;
  color:#fff;
  padding:3px 10px;
  font-size:12px;
  font-weight:800;
}
.dash-compliance-badge.ok{background:#059669}
.dash-compliance-badge.warn{background:#d97706}
.dash-compliance-badge.danger{background:#dc2626}
.dash-comp-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-top:10px;
  font-size:14px;
  color:#334155;
}
.dash-comp-bar{
  margin-top:6px;
  height:8px;
  border-radius:999px;
  background:#e2e8f0;
  overflow:hidden;
}
.dash-comp-bar span{
  display:block;
  height:100%;
  background:linear-gradient(90deg,#10b981,#22c55e);
}
.dash-comp-bar.danger span{
  background:linear-gradient(90deg,#fb7185,#ef4444);
}
.dash-comp-tip{
  margin:12px 0 0;
  border:1px solid #dbe3ef;
  border-radius:12px;
  background:#f8fafc;
  padding:10px;
  color:#64748b;
  font-size:13px;
}
.dash-recent-wrap{
  margin-top:var(--dash-space);
  border:0;
  border-radius:0;
  background:transparent;
  box-shadow:none;
  padding:0;
}
.dash-recent-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--dash-space);
  margin-bottom:var(--dash-space);
}
.dash-recent-head h3{
  margin:0;
  font-size:18px;
  color:#0f172a;
}
.dash-recent-cards{
  display:grid;
  grid-template-columns:repeat(5,minmax(0,1fr));
  gap:var(--dash-space);
}
.dash-recent-card{
  border:1px solid #cbd5e1;
  border-radius:16px;
  background:#ffffff;
  padding:14px;
  box-shadow:0 8px 18px rgba(15,23,42,.05);
}
.dash-recent-card.tone-ok{
  border-color:#86efac;
  background:linear-gradient(180deg,#f7fef9 0%,#ecfdf3 100%);
}
.dash-recent-card.tone-new{
  border-color:#c4b5fd;
  background:linear-gradient(180deg,#faf8ff 0%,#f3eeff 100%);
}
.dash-recent-card.tone-imported{
  border-color:#93c5fd;
  background:linear-gradient(180deg,#f8fbff 0%,#eef6ff 100%);
}
.dash-recent-card.tone-risk{
  border-color:#fda4af;
  background:linear-gradient(180deg,#fff6f7 0%,#ffeef1 100%);
}
.dash-recent-card.source-ics{
  border-color:#93c5fd;
  background:linear-gradient(180deg,#f5f9ff 0%,#eaf3ff 100%);
}
.dash-recent-card.source-par{
  border-color:#fdba74;
  background:linear-gradient(180deg,#fff8ef 0%,#ffefdc 100%);
}
.dash-recent-card-top{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}
.dash-recent-card-ics-row{
  display:flex;
  align-items:center;
  gap:8px;
  min-width:0;
}
.dash-recent-card-idx{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:28px;
  height:22px;
  border:1px solid #dbe3ef;
  border-radius:999px;
  color:#64748b;
  font-size:11px;
  font-weight:600;
  background:#f8fafc;
}
.dash-recent-card-ics-link{
  font-size:16px;
  font-weight:700;
  letter-spacing:.01em;
  text-decoration:none;
  line-height:1.2;
  color:#2563eb;
}
.dash-recent-card-ics-link.is-long{
  font-size:14px;
}
.dash-recent-card-open{
  width:24px;
  height:24px;
  border-radius:6px;
  border:0;
  background:transparent;
  color:#b7c1cf;
  display:grid;
  place-items:center;
  cursor:pointer;
  flex:0 0 auto;
}
.dash-recent-card-open:hover{
  background:#eef2ff7a;
  color:#94a3b8;
}
.dash-recent-card-open .lucide{
  width:15px;
  height:15px;
}
.dash-recent-card-badges{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin-top:10px;
}
.dash-recent-pill{
  display:inline-flex;
  align-items:center;
  gap:5px;
  border-radius:999px;
  padding:3px 9px;
  font-size:10px;
  font-weight:700;
  letter-spacing:.03em;
}
.dash-recent-pill.status-updated{
  background:#ffedd5;
  color:#d97706;
}
.dash-recent-pill.status-imported{
  background:#dbeafe;
  color:#2563eb;
}
.dash-recent-pill.status-new{
  background:#ede9fe;
  color:#7c3aed;
}
.dash-recent-pill.source-ics{
  background:#dbeafe;
  color:#1d4ed8;
}
.dash-recent-pill.source-par{
  background:#ffedd5;
  color:#c2410c;
}
.dash-recent-pill.ok{
  background:#dcfce7;
  color:#059669;
}
.dash-recent-pill.danger{
  background:#fee2e2;
  color:#dc2626;
}
.dash-recent-pill .lucide{
  width:12px;
  height:12px;
}
.dash-recent-card-details{
  margin-top:12px;
  max-height:0;
  opacity:0;
  overflow:hidden;
  transform:translateY(-4px);
  transition:max-height .28s ease, opacity .18s ease, transform .2s ease;
}
.dash-recent-card:hover .dash-recent-card-details,
.dash-recent-card:focus-within .dash-recent-card-details{
  max-height:280px;
  opacity:1;
  transform:translateY(0);
}
.dash-recent-card-grid{
  display:grid;
  gap:10px;
}
.dash-recent-card-field{
  display:grid;
  grid-template-columns:28px 1fr;
  grid-template-areas:
    "icon key"
    "icon val";
  gap:1px 8px;
  min-width:0;
}
.dash-recent-card-field-icon{
  grid-area:icon;
  width:24px;
  height:24px;
  border-radius:7px;
  border:1px solid #e2e8f0;
  background:#f8fafc;
  color:#64748b;
  display:grid;
  place-items:center;
}
.dash-recent-card-field-icon .lucide{
  width:13px;
  height:13px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.dash-recent-card-field .k{
  grid-area:key;
  color:#64748b;
  font-size:10px;
  font-weight:700;
  letter-spacing:.04em;
}
.dash-recent-card-field .v{
  grid-area:val;
  color:#0f172a;
  font-size:12.5px;
  font-weight:600;
  line-height:1.28;
  white-space:normal;
  overflow-wrap:anywhere;
}
.dash-recent-card-field.info .v{
  text-transform:uppercase;
}
.dash-recent-card-field.money .v{
  font-size:16px;
  letter-spacing:.01em;
  line-height:1.2;
  font-weight:700;
}
.dash-recent-card-foot{
  margin-top:12px;
  padding-top:10px;
  border-top:1px solid #e2e8f0;
  display:flex;
  flex-direction:column;
  gap:3px;
}
.dash-recent-card-foot .k{
  color:#94a3b8;
  font-size:10px;
  font-weight:700;
  letter-spacing:.04em;
  display:flex;
  align-items:center;
  gap:6px;
}
.dash-recent-card-foot .k .lucide{
  width:12px;
  height:12px;
}
.dash-recent-card-foot .v{
  color:#334155;
  font-size:11.5px;
  font-weight:600;
}
.dash-notes-wrap{
  margin-top:var(--dash-space);
  border:1px solid #dbe3ef;
  border-radius:16px;
  background:#fff;
  box-shadow:0 8px 18px rgba(15,23,42,.05);
  padding:12px;
}
.dash-notes-wrap h3{
  margin:0 0 var(--dash-space);
  font-size:18px;
  color:#0f172a;
}
.dash-notes-grid{
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:var(--dash-space);
}
.dash-note-card{
  border:1px solid #dbe3ef;
  border-radius:14px;
  background:#fff;
  padding:12px;
}
.dash-note-card-head{
  display:flex;
  align-items:center;
  gap:8px;
  color:#0f172a;
}
.dash-note-ico{
  width:22px;
  height:22px;
  color:#334155;
  display:grid;
  place-items:center;
}
.dash-note-ico svg,.dash-note-ico .lucide{
  width:18px;
  height:18px;
}
.dash-note-ico .lucide{fill:none;stroke:currentColor;stroke-width:2}
.dash-note-card p{
  margin:8px 0 0;
  color:#64748b;
  font-size:14px;
}
.dash-overview-kpi,
.dash-action-card,
.dash-compliance-card,
.dash-recent-card,
.dash-note-card{
  transition:transform .18s ease, box-shadow .22s ease, border-color .2s ease;
}
.dash-overview-kpi:hover,
.dash-overview-kpi:focus-within,
.dash-action-card:hover,
.dash-action-card:focus-within,
.dash-compliance-card:hover,
.dash-compliance-card:focus-within,
.dash-recent-card:hover,
.dash-recent-card:focus-within,
.dash-note-card:hover,
.dash-note-card:focus-within{
  transform:translateY(-2px);
  box-shadow:0 14px 28px rgba(15,23,42,.14);
}
.dash-overview-kpi.base:hover,
.dash-overview-kpi.base:focus-within{border-color:#bfdbfe}
.dash-overview-kpi.good:hover,
.dash-overview-kpi.good:focus-within{border-color:#34d399}
.dash-overview-kpi.warn:hover,
.dash-overview-kpi.warn:focus-within{border-color:#fb7185}
.dash-overview-kpi.asset:hover,
.dash-overview-kpi.asset:focus-within{border-color:#93c5fd}
.dash-action-card:hover .ico,
.dash-action-card:focus-within .ico{
  transform:translateY(-1px);
  box-shadow:0 8px 14px rgba(234,88,12,.18);
}
.dash-action-card .ico{
  transition:transform .18s ease, box-shadow .22s ease, border-color .2s ease;
}
@media (prefers-reduced-motion: reduce){
  .dash-overview-kpi,
  .dash-action-card,
  .dash-compliance-card,
  .dash-recent-card,
  .dash-note-card,
  .dash-recent-card-details,
  .dash-action-card .ico{
    transition:none;
  }
  .dash-overview-kpi:hover,
  .dash-overview-kpi:focus-within,
  .dash-action-card:hover,
  .dash-action-card:focus-within,
  .dash-compliance-card:hover,
  .dash-compliance-card:focus-within,
  .dash-recent-card:hover,
  .dash-recent-card:focus-within,
  .dash-note-card:hover,
  .dash-note-card:focus-within,
  .dash-action-card:hover .ico,
  .dash-action-card:focus-within .ico{
    transform:none;
    box-shadow:none;
  }
  .dash-recent-card:hover .dash-recent-card-details,
  .dash-recent-card:focus-within .dash-recent-card-details{
    max-height:none;
    opacity:1;
    transform:none;
  }
}
@media (max-width:1200px){
  .dash-overview-head-left h3{font-size:32px}
  .dash-overview-head-left p{font-size:18px}
  .dash-overview-kpi .v{font-size:40px}
  .dash-topbar-left h2{font-size:28px}
  .dash-topbar-left p{font-size:16px}
  .dash-recent-cards{grid-template-columns:repeat(2,minmax(0,1fr))}
  .dash-notes-grid{grid-template-columns:1fr}
  .dash-recent-card-field.money .v{font-size:15px}
  .dash-recent-card-ics-link{font-size:15px}
  .dash-recent-card-ics-link.is-long{font-size:13px}
}
@media (max-width:980px){
  .dash-overview-head{
    flex-direction:column;
  }
  .dash-overview-head-actions{
    margin-top:0;
  }
  .dash-overview-kpis{
    grid-template-columns:repeat(2,minmax(0,1fr));
  }
  .dash-overview-grid{
    grid-template-columns:1fr 1fr;
  }
  .dash-compliance-card{
    grid-column:1 / -1;
    grid-row:auto;
  }
  .dash-recent-card-details{
    max-height:none;
    opacity:1;
    overflow:visible;
    transform:none;
  }
}
@media (max-width:640px){
  .dash-topbar{
    flex-direction:column;
    align-items:flex-start;
  }
  .dash-topbar-left h2{font-size:24px}
  .dash-topbar-left p{font-size:14px}
  .dash-overview-head-left h3{font-size:28px}
  .dash-overview-head-left p{font-size:16px}
  .dash-overview-kpis{
    grid-template-columns:1fr;
  }
  .dash-overview-grid{
    grid-template-columns:1fr;
  }
  .dash-recent-cards{grid-template-columns:1fr}
}
@media (hover:none){
  .dash-recent-card-details{
    max-height:none;
    opacity:1;
    overflow:visible;
    transform:none;
  }
}
.dash-rev{
  font-family:"Trebuchet MS","Verdana","Tahoma",sans-serif;
  display:grid;
  gap:14px;
  margin-top:8px;
}
.dash-rev-hero{
  display:grid;
  grid-template-columns:1.35fr 1fr;
  gap:14px;
  border:1px solid #dbeafe;
  border-radius:18px;
  background:
    radial-gradient(120% 120% at 100% 0%,#dbeafe 0%,rgba(219,234,254,0) 44%),
    linear-gradient(135deg,#f8fbff 0%,#eef6ff 46%,#fffef7 100%);
  padding:16px;
  box-shadow:0 12px 28px rgba(15,23,42,.08);
}
.dash-rev-kicker{
  display:inline-flex;
  align-items:center;
  border:1px solid #cbd5e1;
  border-radius:999px;
  background:#ffffffd4;
  color:#334155;
  padding:4px 10px;
  font-size:10px;
  font-weight:800;
  letter-spacing:.12em;
  text-transform:uppercase;
}
.dash-rev-title{
  margin:10px 0 4px;
  font-size:28px;
  line-height:1.12;
  letter-spacing:-.02em;
  color:#0f172a;
}
.dash-rev-sub{
  margin:0;
  font-size:13px;
  color:#475569;
  max-width:660px;
}
.dash-rev-mini{
  margin-top:12px;
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:8px;
}
.dash-rev-mini-card{
  border:1px solid #dbe3ef;
  border-radius:11px;
  background:#ffffffcc;
  padding:8px 10px;
}
.dash-rev-mini-card .k{
  color:#64748b;
  font-size:10px;
  text-transform:uppercase;
  letter-spacing:.05em;
}
.dash-rev-mini-card .v{
  margin-top:3px;
  color:#0f172a;
  font-size:16px;
  font-weight:800;
}
.dash-rev-hero-art{
  border:1px solid #dbeafe;
  border-radius:14px;
  background:#ffffffbd;
  display:grid;
  place-items:center;
  min-height:160px;
}
.dash-rev-hero-art svg{
  width:min(100%,260px);
  height:auto;
}
.dash-rev-health{
  border:1px solid #dbe3ef;
  border-radius:16px;
  background:linear-gradient(180deg,#fff 0%,#f9fbff 100%);
  padding:12px 14px;
  box-shadow:0 8px 20px rgba(15,23,42,.06);
}
.dash-rev-health-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.dash-rev-health-head h3{
  margin:0;
  font-size:13px;
  color:#1e293b;
}
.dash-rev-health-score{
  border:1px solid #bfdbfe;
  border-radius:999px;
  background:#eff6ff;
  color:#1d4ed8;
  padding:4px 10px;
  font-size:11px;
  font-weight:800;
}
.dash-rev-kpis{
  display:grid;
  grid-template-columns:repeat(6,minmax(0,1fr));
  gap:10px;
}
.dash-rev-kpi{
  border:1px solid #cbd5e1;
  border-radius:14px;
  background:#fff;
  padding:10px;
  text-align:left;
  cursor:pointer;
  transition:transform .16s ease, box-shadow .2s ease, border-color .2s ease;
}
.dash-rev-kpi:hover{
  transform:translateY(-2px);
  box-shadow:0 10px 20px rgba(15,23,42,.1);
}
.dash-rev-kpi .k{
  color:#64748b;
  font-size:10px;
  text-transform:uppercase;
  letter-spacing:.05em;
}
.dash-rev-kpi .v{
  margin-top:4px;
  color:#0f172a;
  font-size:24px;
  font-weight:900;
  line-height:1.15;
}
.dash-rev-kpi .s{
  margin-top:5px;
  color:#64748b;
  font-size:11px;
}
.dash-rev-kpi.warn{
  background:linear-gradient(180deg,#fffbeb 0%,#fff7dc 100%);
  border-color:#fde68a;
}
.dash-rev-kpi.danger{
  background:linear-gradient(180deg,#fff1f2 0%,#ffe4e6 100%);
  border-color:#fecdd3;
}
.dash-rev-kpi.good{
  background:linear-gradient(180deg,#f0fdf4 0%,#dcfce7 100%);
  border-color:#86efac;
}
.dash-rev-main{
  display:grid;
  grid-template-columns:1.2fr 1fr;
  gap:12px;
}
.dash-rev-grid2{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
.dash-rev-panel{
  border:1px solid #dbe3ef;
  border-radius:14px;
  background:linear-gradient(180deg,#fff 0%,#f8fbff 100%);
  box-shadow:0 8px 18px rgba(15,23,42,.06);
  padding:11px;
}
.dash-rev-panel-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:8px;
}
.dash-rev-panel-head h3{
  margin:0;
  font-size:13px;
  color:#1e293b;
}
.dash-rev-tag{
  border:1px solid #cbd5e1;
  border-radius:999px;
  background:#f8fafc;
  color:#475569;
  padding:2px 9px;
  font-size:10px;
  font-weight:800;
  text-transform:uppercase;
  letter-spacing:.06em;
}
@media (max-width:1200px){
  .dash-rev-kpis{grid-template-columns:repeat(3,minmax(0,1fr))}
  .dash-rev-hero{grid-template-columns:1fr}
}
@media (max-width:900px){
  .dash-rev-main,.dash-rev-grid2{grid-template-columns:1fr}
  .dash-rev-mini{grid-template-columns:1fr}
}
@media (max-width:640px){
  .dash-rev-title{font-size:22px}
  .dash-rev-kpis{grid-template-columns:repeat(2,minmax(0,1fr))}
}
.dash-story{
  display:grid;
  grid-template-columns:1.45fr 1fr;
  gap:14px;
  margin:6px 0 14px;
}
.dash-hero{
  border:1px solid #bfdbfe;
  border-radius:16px;
  background:linear-gradient(140deg,#f8fbff 0%,#eef4ff 48%,#ffffff 100%);
  box-shadow:0 12px 24px rgba(15,23,42,.08);
  padding:14px;
  position:relative;
  overflow:hidden;
}
.dash-hero::before{
  content:'';
  position:absolute;
  right:-84px;
  top:-84px;
  width:220px;
  height:220px;
  border-radius:50%;
  background:radial-gradient(circle,#bfdbfe 0%,rgba(191,219,254,0) 72%);
  pointer-events:none;
}
.dash-hero-top{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:10px;
}
.dash-hero-kicker{
  font-size:10px;
  color:#475569;
  font-weight:800;
  letter-spacing:.14em;
  text-transform:uppercase;
}
.dash-hero h3{
  margin:6px 0 4px;
  font-size:20px;
  line-height:1.2;
  color:#0f172a;
}
.dash-hero p{
  margin:0;
  font-size:12px;
  color:#475569;
}
.dash-hero-graphic{
  width:150px;
  min-width:150px;
  height:96px;
}
.dash-hero-graphic svg{
  width:100%;
  height:100%;
  display:block;
}
.dash-mini-metrics{
  margin-top:12px;
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:8px;
}
.dash-mini{
  border:1px solid #dbeafe;
  border-radius:10px;
  background:#ffffffc9;
  padding:8px 10px;
}
.dash-mini .k{
  font-size:10px;
  color:#64748b;
  text-transform:uppercase;
  letter-spacing:.06em;
}
.dash-mini .v{
  margin-top:4px;
  font-size:15px;
  font-weight:800;
  color:#0f172a;
}
.dash-health{
  border:1px solid #dbeafe;
  border-radius:16px;
  background:#fff;
  box-shadow:0 10px 22px rgba(15,23,42,.06);
  padding:12px;
}
.dash-health-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:8px;
}
.dash-health-title{
  font-size:12px;
  font-weight:800;
  color:#1e293b;
}
.dash-health-score{
  min-width:64px;
  text-align:center;
  border-radius:999px;
  padding:4px 9px;
  font-size:11px;
  font-weight:800;
  background:#eff6ff;
  color:#1d4ed8;
  border:1px solid #bfdbfe;
}
.dash-bars{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.dash-bar-row{
  display:grid;
  grid-template-columns:88px 1fr auto;
  gap:8px;
  align-items:center;
}
.dash-bar-label{
  font-size:11px;
  color:#475569;
  font-weight:700;
}
.dash-bar-track{
  height:8px;
  border-radius:999px;
  background:#e2e8f0;
  overflow:hidden;
}
.dash-bar-fill{
  display:block;
  height:100%;
  border-radius:inherit;
}
.dash-bar-fill.ok{background:linear-gradient(90deg,#34d399,#10b981)}
.dash-bar-fill.near{background:linear-gradient(90deg,#f59e0b,#f97316)}
.dash-bar-fill.past{background:linear-gradient(90deg,#fb7185,#ef4444)}
.dash-bar-fill.archive{background:linear-gradient(90deg,#60a5fa,#2563eb)}
.dash-bar-val{
  font-size:11px;
  color:#334155;
  font-weight:700;
}
.dash-analytics{
  display:grid;
  grid-template-columns:1.2fr 1fr;
  gap:14px;
  margin-top:14px;
}
.dash-chart-box{
  border:1px solid #e2e8f0;
  border-radius:12px;
  background:#fbfdff;
  padding:10px;
}
.dash-chart-title{
  margin:0 0 8px;
  font-size:12px;
  font-weight:800;
  color:#334155;
}
.dash-trend-chart{
  display:flex;
  gap:8px;
  align-items:flex-end;
  height:164px;
  padding:8px 6px 2px;
}
.dash-trend-col{
  flex:1;
  min-width:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-end;
  gap:6px;
}
.dash-trend-bars{
  width:100%;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  gap:4px;
  min-height:124px;
}
.dash-trend-bar{
  width:42%;
  border-radius:8px 8px 3px 3px;
  min-height:3px;
}
.dash-trend-bar.finalized{background:linear-gradient(180deg,#93c5fd 0%,#2563eb 100%)}
.dash-trend-bar.archived{background:linear-gradient(180deg,#c4b5fd 0%,#7c3aed 100%)}
.dash-trend-label{
  font-size:10px;
  color:#64748b;
  font-weight:700;
  text-align:center;
}
.dash-trend-legend{
  display:flex;
  gap:10px;
  font-size:11px;
  color:#475569;
  margin-top:6px;
}
.dash-trend-legend span{
  display:inline-flex;
  align-items:center;
  gap:5px;
}
.dash-trend-legend i{
  width:10px;
  height:10px;
  border-radius:999px;
  display:inline-block;
}
.dash-trend-legend .f{background:#2563eb}
.dash-trend-legend .a{background:#7c3aed}
.dash-kpi-head{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:10px;
}
.dash-kpi-ico{
  width:24px;
  height:24px;
  border-radius:8px;
  display:grid;
  place-items:center;
  background:#eff6ff;
  color:#1d4ed8;
}
.dash-kpi-ico svg{
  width:14px;
  height:14px;
  fill:currentColor;
}
.dash-kpi.warn .dash-kpi-ico{
  background:#fffbeb;
  color:#b45309;
}
.dash-kpi.danger .dash-kpi-ico{
  background:#fef2f2;
  color:#dc2626;
}
.dash-kpi.good .dash-kpi-ico{
  background:#f0fdf4;
  color:#15803d;
}
.dash-kpi-sub{
  margin-top:4px;
  font-size:10px;
  color:#64748b;
}
.dash-spark{
  margin-top:10px;
  height:44px;
  width:100%;
}
.dash-spark svg{
  width:100%;
  height:100%;
  display:block;
}
.dash-table-tight .detail-table th,
.dash-table-tight .detail-table td{
  padding:7px 8px;
}
.inspection-history-modal{padding:0}
.inspection-history-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:0;
}
.inspection-history-title{
  margin:0;
  font-size:18px;
  font-weight:800;
  color:#1f2937;
  letter-spacing:.2px;
}
.inspection-history-close{
  /* Unified by modal-close-btn */
}
.inspection-history-table-wrap{
  border:1px solid #e2e8f0;
  border-radius:8px;
  overflow:auto;
}
.inspection-history-table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}
.inspection-history-table thead th{
  background:#e5e7eb;
  color:#334155;
  font-weight:700;
  padding:12px 10px;
  text-align:left;
  white-space:nowrap;
}
.inspection-history-table tbody td{
  border-bottom:1px solid #e5e7eb;
  padding:12px 10px;
  color:#1f2937;
  vertical-align:middle;
}
.inspection-history-table tbody tr:last-child td{border-bottom:none}
.insp-status-pill{
  display:inline-block;
  border-radius:6px;
  padding:3px 10px;
  font-size:12px;
  line-height:1.2;
  text-transform:lowercase;
}
.insp-status-pill.ok{background:#dcfce7;color:#166534}
.insp-status-pill.danger{background:#fee2e2;color:#b91c1c}
.inspection-history-empty{
  border:1px dashed #cbd5e1;
  border-radius:8px;
  padding:14px;
  text-align:center;
  color:#64748b;
}
.inspection-history-meta{color:#64748b}
.ics-link-btn{
  border:0;
  background:transparent;
  color:#1d4ed8;
  font-weight:700;
  padding:0;
  cursor:pointer;
}
.ics-link-btn:hover{text-decoration:underline}
.detail-grid{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:10px 14px;
  margin-bottom:12px;
}
.detail-item{
  border:1px solid #e2e8f0;
  border-radius:10px;
  background:#f8fafc;
  padding:8px 10px;
}
.detail-item .k{font-size:11px;color:#475569;text-transform:uppercase}
.detail-item .v{font-size:13px;font-weight:600;color:#1f2937}
.detail-section-title{
  margin:10px 0 6px;
  font-size:13px;
  font-weight:700;
  color:#334155;
}
.detail-table-wrap{
  border:1px solid #e2e8f0;
  border-radius:10px;
  overflow:auto;
  max-height:240px;
}
.detail-table{
  width:100%;
  border-collapse:collapse;
  font-size:var(--tbl-body-size);
}
.detail-table th,.detail-table td{
  padding:8px 10px;
  border-bottom:1px solid #eef2f7;
  text-align:left;
  white-space:nowrap;
  font-size:var(--tbl-body-size);
}
.detail-table thead th{
  position:sticky;
  top:0;
  background:#f8fafc;
  color:#475569;
  z-index:1;
  font-size:var(--tbl-head-size);
}
.detail-table tbody tr:last-child td{border-bottom:none}
.detail-focus{background:#eff6ff}
.ics-details-modal{
  width:min(1040px,95vw);
  max-height:90vh;
}
.ics-details-modal .modal-head{
  padding:11px 14px 10px;
}
.ics-details-modal .modal-head h3{
  font-size:16px;
}
.ics-details-modal .modal-body{
  padding:10px 14px 8px;
}
.ics-details-foot{
  padding-top:8px;
}
.ics-details-foot .ics-card-actions{
  justify-content:flex-end;
}
.icsd-shell{
  display:flex;
  flex-direction:column;
  gap:10px;
}
.icsd-head{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:10px;
  border-bottom:1px solid var(--border);
  padding-bottom:10px;
}
.icsd-head-title-row{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:wrap;
}
.icsd-ics-btn{
  font-size:15px;
  font-weight:800;
  color:var(--t);
}
.icsd-head-meta{
  margin-top:5px;
  display:flex;
  align-items:center;
  gap:6px;
  font-size:12px;
  color:var(--tm);
  flex-wrap:wrap;
}
.icsd-dot-sep{opacity:.8}
.icsd-head-title-row .risk-badge{
  margin:0;
}
.icsd-head-title-row .risk-badge.ok{
  background:var(--btn-primary-bg);
  color:var(--btn-primary-text);
}
.icsd-head-actions{
  display:flex;
  align-items:center;
  gap:8px;
}
.icsd-grid{
  display:grid;
  grid-template-columns:1fr 1.4fr;
  gap:12px;
}
.icsd-col{
  display:flex;
  flex-direction:column;
  gap:12px;
  min-width:0;
}
.icsd-card{
  border:1px solid var(--border);
  border-radius:14px;
  background:var(--surface);
  box-shadow:0 6px 16px rgba(15,23,42,.05);
  padding:12px;
}
.icsd-card-title{
  display:inline-flex;
  align-items:center;
  gap:8px;
  font-size:15px;
  font-weight:800;
  color:var(--t);
  margin-bottom:8px;
}
.icsd-title-icon{
  display:inline-flex;
  width:16px;
  height:16px;
  color:var(--tm);
  flex-shrink:0;
}
.icsd-title-icon svg,.icsd-title-icon .lucide{
  width:100%;
  height:100%;
}
.icsd-title-icon .lucide{fill:none;stroke:currentColor;stroke-width:2}
.icsd-row-between{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}
.icsd-summary-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.icsd-kv{
  border:1px solid var(--border);
  border-radius:10px;
  background:var(--surface-soft);
  padding:8px 9px;
}
.icsd-kv .k{
  font-size:10px;
  text-transform:uppercase;
  color:var(--tm);
}
.icsd-kv .v{
  margin-top:4px;
  font-size:14px;
  font-weight:700;
  color:var(--t);
}
.icsd-kv-full{
  grid-column:1 / -1;
}
.icsd-inline-actions{
  display:flex;
  align-items:center;
  gap:8px;
}
.icsd-table-meta{
  margin-top:8px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  color:var(--tm);
  font-size:12px;
}
.icsd-meta-pills{
  display:flex;
  gap:8px;
}
.icsd-mini-pill{
  display:inline-flex;
  align-items:center;
  border:1px solid var(--border);
  border-radius:999px;
  background:var(--surface-soft);
  color:var(--t);
  font-size:11px;
  font-weight:700;
  padding:2px 9px;
  white-space:nowrap;
}
.icsd-activity-card{
  border:1px solid var(--border);
  border-radius:10px;
  background:var(--surface-soft);
  padding:10px;
  margin-bottom:8px;
}
.icsd-activity-main{
  display:flex;
  align-items:center;
  gap:6px;
}
.icsd-activity-meta{
  margin-top:6px;
  color:var(--tm);
  font-size:11px;
}
.icsd-activity-summary{
  margin-top:4px;
  color:var(--tm);
  font-size:11px;
}
.icsd-empty-box{
  border:1px solid var(--border);
  border-radius:10px;
  padding:14px;
  color:var(--tm);
  font-size:14px;
}
.icsd-tip{
  margin:0;
  color:var(--tm);
  font-size:12px;
}
.icsd-card .detail-table-wrap{
  max-height:240px;
}
.icsd-card .detail-table{
  font-size:12px;
}
.icsd-card .detail-table th,
.icsd-card .detail-table td{
  padding:8px 9px;
}
.icsd-card .ics-items-table th:nth-child(1),
.icsd-card .ics-items-table td:nth-child(1){
  min-width:180px;
  white-space:normal;
}
.icsd-card .ics-items-table th:nth-child(2),
.icsd-card .ics-items-table td:nth-child(2){
  min-width:130px;
}
.icsd-card .ics-items-table th:nth-child(8),
.icsd-card .ics-items-table td:nth-child(8),
.icsd-card .ics-items-table th:nth-child(9),
.icsd-card .ics-items-table td:nth-child(9){
  min-width:120px;
}
.icsd-card .ics-items-table td:nth-child(3),
.icsd-card .ics-items-table td:nth-child(5),
.icsd-card .ics-items-table td:nth-child(6),
.icsd-card .ics-items-table td:nth-child(7){
  font-variant-numeric:tabular-nums;
}
.icsd-card .ics-archived-table th:nth-child(3),
.icsd-card .ics-archived-table td:nth-child(3){
  min-width:200px;
  white-space:normal;
}
.icsd-items-full{
  padding:12px 10px;
}
.icsd-items-full .detail-table-wrap{
  max-height:340px;
}
.ics-details-modal{
  width:min(980px,94vw);
}
.ics-details-modal .modal-head{
  padding:10px 12px 9px;
}
.ics-details-modal .modal-body{
  padding:8px 12px 7px;
}
.ics-details-modal .icsd-shell{
  gap:8px;
}
.ics-details-modal .icsd-head{
  padding-bottom:8px;
}
.ics-details-modal .icsd-grid{
  gap:10px;
}
.ics-details-modal .icsd-col{
  gap:10px;
}
.ics-details-modal .icsd-card{
  border-radius:12px;
  padding:9px;
}
.ics-details-modal .icsd-card-title{
  font-size:14px;
  margin-bottom:6px;
}
.ics-details-modal .icsd-summary-grid{
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:8px;
}
.ics-details-modal .icsd-kv{
  padding:7px 8px;
}
.ics-details-modal .icsd-kv .k{
  font-size:9px;
}
.ics-details-modal .icsd-kv .v{
  margin-top:3px;
  font-size:12.5px;
}
.ics-details-modal .icsd-table-meta{
  margin-top:6px;
  font-size:11px;
}
.ics-details-modal .icsd-mini-pill{
  font-size:10px;
  padding:1px 8px;
}
.ics-details-modal .icsd-activity-card{
  padding:8px;
  margin-bottom:6px;
}
.ics-details-modal .icsd-activity-meta,
.ics-details-modal .icsd-activity-summary{
  font-size:10.5px;
}
.ics-details-modal .icsd-empty-box{
  padding:10px;
  font-size:12px;
}
.ics-details-modal .icsd-card .detail-table-wrap{
  max-height:210px;
}
.ics-details-modal .icsd-items-full .detail-table-wrap{
  max-height:280px;
}
.ics-details-modal .icsd-card .detail-table{
  font-size:11.5px;
}
.ics-details-modal .icsd-card .detail-table th,
.ics-details-modal .icsd-card .detail-table td{
  padding:6px 7px;
}
.ics-details-modal .icsd-card .ics-items-table th:nth-child(1),
.ics-details-modal .icsd-card .ics-items-table td:nth-child(1){
  min-width:150px;
}
.ics-details-modal .icsd-card .ics-items-table th:nth-child(2),
.ics-details-modal .icsd-card .ics-items-table td:nth-child(2){
  min-width:112px;
}
.ics-details-modal .icsd-card .ics-items-table th:nth-child(8),
.ics-details-modal .icsd-card .ics-items-table td:nth-child(8),
.ics-details-modal .icsd-card .ics-items-table th:nth-child(9),
.ics-details-modal .icsd-card .ics-items-table td:nth-child(9){
  min-width:100px;
}
.ics-details-modal .icsd-items-full{
  padding:9px;
}
.ics-history-modal{
  width:min(920px,96vw);
}
.ics-history-modal .profile-readonly{
  max-height:60vh;
  overflow:auto;
}
.ics-details-content{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.ics-details-content .detail-grid{
  gap:8px;
  margin-bottom:4px;
}
.ics-details-content .detail-item{
  padding:7px 9px;
}
.ics-details-content .detail-item .k{
  font-size:10px;
  color:var(--tm);
}
.ics-details-content .detail-item .v{
  font-size:12px;
  line-height:1.25;
}
.ics-details-content .detail-section-title{
  margin:6px 0 4px;
  font-size:12px;
}
.ics-details-content .profile-readonly{
  max-height:110px;
  overflow:auto;
  font-size:11px;
  line-height:1.35;
  margin-bottom:2px;
  padding:8px 9px;
  color:var(--t);
  background:var(--surface-soft);
  border-color:var(--border);
  font-weight:500;
}
.lineage-row{
  border:1px solid var(--border);
  border-radius:9px;
  background:var(--surface);
  padding:7px 8px;
}
.lineage-row + .lineage-row{
  margin-top:6px;
}
.lineage-row-main{
  display:flex;
  align-items:center;
  gap:6px;
  flex-wrap:wrap;
}
.lineage-version{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:28px;
  height:18px;
  border-radius:999px;
  border:1px solid var(--a);
  background:var(--as);
  color:var(--ah);
  font-size:10px;
  font-weight:800;
}
.lineage-action{
  color:var(--t);
  font-weight:700;
  font-size:11px;
}
.lineage-time{
  color:var(--tm);
  font-size:11px;
}
.lineage-row-meta{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin-top:5px;
}
.lineage-meta-chip{
  display:inline-flex;
  align-items:center;
  max-width:100%;
  border:1px solid var(--border);
  border-radius:999px;
  background:var(--surface-soft);
  color:var(--t);
  padding:2px 8px;
  font-size:10px;
  font-weight:600;
}
.lineage-summary{
  margin-top:5px;
  color:var(--tm);
  font-size:11px;
  line-height:1.3;
}
.lineage-empty{
  color:var(--tm);
  font-size:11px;
}
.ics-details-content .detail-table-wrap{
  max-height:210px;
  border-radius:8px;
}
.ics-details-content .detail-table{
  font-size:11px;
}
.ics-details-content .detail-table th,
.ics-details-content .detail-table td{
  padding:6px 8px;
}
.ics-details-content .ics-items-table th:nth-child(2),
.ics-details-content .ics-items-table td:nth-child(2){
  min-width:220px;
  white-space:normal;
}
.ics-details-content .ics-items-table th:nth-child(3),
.ics-details-content .ics-items-table td:nth-child(3){
  min-width:130px;
}
.ics-details-content .ics-items-table th:nth-child(9),
.ics-details-content .ics-items-table td:nth-child(9),
.ics-details-content .ics-items-table th:nth-child(10),
.ics-details-content .ics-items-table td:nth-child(10){
  min-width:120px;
}
.ics-details-content .ics-items-table td:nth-child(4),
.ics-details-content .ics-items-table td:nth-child(6),
.ics-details-content .ics-items-table td:nth-child(7),
.ics-details-content .ics-items-table td:nth-child(8){
  font-variant-numeric:tabular-nums;
}
.ics-details-content .ics-archived-table th:nth-child(3),
.ics-details-content .ics-archived-table td:nth-child(3){
  min-width:130px;
}
.ics-details-content .ics-archived-table th:nth-child(4),
.ics-details-content .ics-archived-table td:nth-child(4){
  min-width:200px;
  white-space:normal;
}
.ics-details-content .detail-table th:nth-child(2),
.ics-details-content .detail-table td:nth-child(2){
  white-space:normal;
  min-width:210px;
}
.wmr-section-title{
  margin:0 0 8px;
  font-size:11px;
  font-weight:700;
  color:#64748b;
  text-transform:uppercase;
  letter-spacing:.05em;
  display:flex;
  align-items:center;
  gap:6px;
}
.wmr-section-title .lucide{
  width:14px;
  height:14px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
  opacity:.9;
}
.wmr-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:8px 10px;
}
.wmr-icsd-shell{
  display:grid;
  gap:10px;
}
.wmr-icsd-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
.wmr-modal{
  width:min(1180px,96vw);
  max-height:min(90vh,900px);
  padding:0;
}
.wmr-modal .modal-head{
  margin-bottom:0;
  padding:11px 14px 10px;
}
.wmr-modal .icsd-head{
  display:grid;
  grid-template-columns:minmax(0,1fr) auto;
  align-items:flex-start;
  column-gap:10px;
}
.wmr-modal .icsd-head-title-row h3{
  font-size:16px;
  line-height:1.1;
}
.wmr-modal .icsd-head-meta{
  margin-top:5px;
  font-size:12px;
}
.wmr-modal .icsd-head-actions{
  margin-left:auto;
  justify-self:end;
  align-self:start;
}
.wmr-modal .icsd-head-actions .wmr-close-btn{
  width:32px;
  height:32px;
  border-radius:10px;
  margin-top:0;
}
.wmr-modal .modal-body{
  padding:10px 14px 8px;
}
.wmr-modal .modal-foot{
  padding:10px 14px;
}
.wmr-modal .detail-grid{
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:8px;
}
.wmr-modal .detail-item{
  padding:8px 10px;
}
.wmr-modal .detail-item .k{
  font-size:11px;
}
.wmr-modal .detail-item .v{
  margin-top:4px;
  font-size:13px;
  font-weight:600;
}
.wmr-modal label{
  font-size:11px;
  color:#64748b;
  margin-bottom:4px;
}
.wmr-modal .stage-input{
  min-height:32px;
  padding:5px 9px;
  font-size:12px;
}
.wmr-modal textarea.stage-input{
  min-height:54px;
}
.wmr-modal .detail-table-wrap{
  max-height:300px !important;
}
.wmr-modal .detail-table{
  font-size:12px;
}
.wmr-modal .detail-table th,
.wmr-modal .detail-table td{
  padding:8px 9px;
}
.wmr-modal .detail-table td .stage-input{
  min-width:110px;
}
.wmr-modal .wmr-sale-note{
  margin-top:6px;
  font-size:10px;
}
.wmr-modal .icsd-card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:14px;
  box-shadow:0 6px 16px rgba(15,23,42,.05);
  padding:12px;
}
.wmr-modal .icsd-card-title{
  margin-bottom:8px;
}
@media (max-width: 760px){
  .archived-history-modal{
    width:min(100vw,100vw);
    max-height:100vh;
    border-radius:0;
  }
  .archived-history-modal .modal-head,
  .archived-history-modal .modal-body{
    padding-left:10px;
    padding-right:10px;
  }
  .archived-title-main{
    font-size:18px;
  }
  .archived-sheet-main{
    grid-template-columns:1fr;
  }
  .archived-sheet-side{
    border-right:none;
    border-bottom:1px solid var(--border);
  }
  .archived-top-cards{
    grid-template-columns:1fr;
  }
  .archived-top-card{
    border-right:none;
    border-bottom:1px solid var(--border);
  }
  .archived-top-card:last-child{
    border-bottom:none;
  }
  .archived-log-table{
    min-width:0;
    width:100%;
  }
  .archived-sheet-foot{
    flex-direction:column;
    align-items:flex-start;
  }
  .archived-export-btn{
    width:100%;
  }
  .ics-details-modal{
    width:min(98vw,740px);
  }
  .ics-details-content .detail-grid{
    grid-template-columns:1fr;
  }
  .ics-details-content .detail-table-wrap{
    max-height:190px;
  }
  .ics-details-content .detail-table th,
  .ics-details-content .detail-table td{
    padding:6px;
  }
  .icsd-head{
    flex-direction:column;
  }
  .icsd-head-actions{
    width:100%;
  }
  .icsd-head-actions .small-btn,
  .icsd-head-actions .btn{
    flex:1;
  }
  .icsd-grid{
    grid-template-columns:1fr;
  }
  .icsd-summary-grid{
    grid-template-columns:1fr;
  }
  .icsd-inline-actions{
    width:100%;
    flex-wrap:wrap;
  }
  .icsd-inline-actions .small-btn,
  .icsd-inline-actions .btn{
    flex:1;
  }
  .icsd-table-meta{
    flex-direction:column;
    align-items:flex-start;
  }
  .wmr-grid,
  .wmr-icsd-grid{grid-template-columns:1fr}
  .wmr-modal{
    width:min(100vw,100vw);
    max-height:100vh;
    border-radius:0;
  }
  .wmr-modal .modal-head,
  .wmr-modal .modal-body,
  .wmr-modal .modal-foot{
    padding-left:10px;
    padding-right:10px;
  }
  .wmr-modal .detail-grid{
    grid-template-columns:repeat(2,minmax(0,1fr));
  }
  .wmr-modal .detail-table-wrap{
    max-height:none !important;
    overflow:visible;
    border:none;
    padding:0;
    background:transparent;
  }
  .wmr-modal .detail-table{
    display:block;
    width:100%;
    border-collapse:separate;
    border-spacing:0;
  }
  .wmr-modal .detail-table thead{
    display:none;
  }
  .wmr-modal .detail-table tbody{
    display:grid;
    gap:8px;
  }
  .wmr-modal .detail-table tbody tr{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:6px 8px;
    border:1px solid #dbe3ef;
    border-radius:12px;
    background:#fff;
    padding:8px;
  }
  .wmr-modal .detail-table tbody td{
    display:flex;
    flex-direction:column;
    gap:3px;
    white-space:normal;
    border-bottom:none;
    padding:0;
    min-width:0;
  }
  .wmr-modal .detail-table tbody td::before{
    content:attr(data-label);
    font-size:10px;
    color:#64748b;
    text-transform:uppercase;
    letter-spacing:.04em;
    font-weight:700;
  }
  .wmr-modal .detail-table tbody td .stage-input{
    width:100%;
    min-width:0;
  }
  .wmr-modal .detail-table tbody td[data-label="#"],
  .wmr-modal .detail-table tbody td[data-label="ICS No."],
  .wmr-modal .detail-table tbody td[data-label="ICS/PAR No."],
  .wmr-modal .detail-table tbody td[data-label="Item No."]{
    grid-column:span 1;
  }
  .wmr-modal .detail-table tbody td[data-label="Description"]{
    grid-column:1 / -1;
  }
}
@media (max-width: 640px){
  .archived-log-table th,
  .archived-log-table td{
    padding:7px 8px;
    font-size:10px;
    white-space:normal;
    word-break:break-word;
  }
  .archived-log-table th:nth-child(4),
  .archived-log-table td:nth-child(4){
    display:none;
  }
}
@media (max-width: 1024px){
  .ics-details-modal{
    width:min(98vw,920px);
  }
  .ics-details-modal .icsd-summary-grid{
    grid-template-columns:1fr 1fr;
  }
  .ics-details-content .ics-items-table th:nth-child(2),
  .ics-details-content .ics-items-table td:nth-child(2){
    min-width:180px;
  }
}
.wmr-sale-note{
  font-size:11px;
  color:#64748b;
  margin-top:4px;
}
.arch-history-grid{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:10px 12px;
  margin:0;
}
.arch-history-meta{
  border:1px solid #e2e8f0;
  border-radius:8px;
  background:#f8fafc;
  padding:8px 9px;
}
.arch-history-meta .k{font-size:11px;color:#64748b;text-transform:uppercase}
.arch-history-meta .v{font-size:13px;font-weight:600;color:#1f2937}
.archived-history-modal{
  width:min(1060px,96vw);
  max-height:90vh;
  padding:0;
}
.archived-history-modal .modal-head{
  padding:10px 14px;
  background:var(--modal-head-bg);
  border-bottom:1px solid var(--modal-head-border);
}
.archived-history-modal .modal-head h3{
  margin:0;
  color:var(--t);
  display:flex;
  align-items:center;
  gap:10px;
  font-size:21px;
}
.archived-title-main{
  display:inline-flex;
  align-items:center;
  gap:8px;
  font-size:19px;
  font-weight:800;
  color:var(--t);
}
.archived-title-badge{
  display:inline-flex;
  align-items:center;
  border-radius:6px;
  padding:3px 7px;
  font-size:10px;
  letter-spacing:.2px;
  font-weight:800;
}
.archived-title-badge.approved{
  background:var(--btn-add-bg);
  border:1px solid var(--a);
  color:var(--btn-add-text);
}
.archived-title-badge.pending{
  background:var(--btn-secondary-bg);
  border:1px solid var(--border);
  color:var(--btn-secondary-text);
}
.archived-history-close{
  /* Unified by modal-close-btn */
}
.archived-history-modal .modal-body{
  padding:10px 14px 8px;
  background:var(--modal-bg);
}
.archived-icsd-shell{
  gap:12px;
}
.archived-icsd-grid{
  grid-template-columns:1fr 1fr;
}
.archived-history-modal .icsd-card{
  background:var(--modal-bg);
  border:1px solid var(--modal-border);
  box-shadow:none;
}
.archived-history-modal .icsd-kv{
  background:var(--modal-head-bg);
  border-color:var(--modal-border);
}
.archived-history-modal .icsd-kv .k{
  color:var(--tm);
}
.archived-history-modal .icsd-kv .v{
  color:var(--t);
}
.archived-icsd-log-table{
  min-width:640px;
}
.archived-sheet{
  display:flex;
  flex-direction:column;
  min-height:0;
}
.archived-sheet-main{
  display:grid;
  grid-template-columns:250px 1fr;
  min-height:0;
}
.archived-sheet-side{
  border-right:1px solid var(--border);
  background:var(--surface-soft);
  padding:10px 12px;
  overflow:auto;
}
.archived-side-section-title{
  display:flex;
  align-items:center;
  gap:6px;
  margin:2px 0 6px;
  font-size:11px;
  font-weight:800;
  letter-spacing:.2px;
  text-transform:uppercase;
  color:var(--tm);
}
.archived-side-row{
  padding:6px 0;
  border-bottom:1px solid var(--border);
}
.archived-side-row .k{
  font-size:9px;
  text-transform:uppercase;
  color:var(--tm);
  font-weight:800;
  margin-bottom:2px;
}
.archived-side-row .v{
  font-size:12px;
  color:var(--t);
  font-weight:700;
}
.archived-sheet-right{
  padding:10px 12px;
  display:flex;
  flex-direction:column;
  gap:8px;
  background:var(--modal-bg);
  overflow:auto;
}
.archived-top-cards{
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  border:1px solid var(--border);
  border-radius:8px;
  overflow:hidden;
  background:var(--surface);
}
.archived-top-card{
  padding:9px 10px;
  border-right:1px solid var(--border);
}
.archived-top-card:last-child{border-right:none}
.archived-top-card .k{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:10px;
  text-transform:uppercase;
  color:var(--tm);
  font-weight:800;
}
.archived-top-card .v{
  margin-top:4px;
  font-size:16px;
  font-weight:700;
  color:var(--t);
}
.archived-remarks{
  font-style:italic;
  color:var(--tm);
}
.archived-logs-card{
  border:1px solid var(--modal-border);
  border-radius:8px;
  background:var(--modal-bg);
  padding:8px 8px 6px;
  box-shadow:var(--sh);
}
.archived-logs-title{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:.2px;
  color:var(--tm);
  font-weight:800;
  margin-bottom:6px;
}
.archived-logs-wrap{
  overflow:auto;
  max-width:100%;
  border:1px solid var(--modal-border);
  border-radius:6px;
}
.archived-log-table{
  width:100%;
  border-collapse:collapse;
  min-width:0;
  table-layout:fixed;
  font-size:11px;
}
.archived-log-table col.archived-log-col-date{width:22%}
.archived-log-table col.archived-log-col-status{width:26%}
.archived-log-table col.archived-log-col-reason{width:34%}
.archived-log-table col.archived-log-col-time{width:18%}
.archived-log-table thead th{
  background:var(--modal-head-bg);
  color:var(--tm);
  font-size:10px;
  text-transform:uppercase;
  letter-spacing:.2px;
  text-align:left;
  padding:8px 10px;
  border-bottom:1px solid var(--modal-border);
}
.archived-log-table tbody td{
  padding:8px 10px;
  border-bottom:1px solid var(--modal-border);
  color:var(--t);
}
.archived-log-table th:nth-child(1),
.archived-log-table td:nth-child(1),
.archived-log-table th:nth-child(4),
.archived-log-table td:nth-child(4){
  white-space:nowrap;
}
.archived-log-table th:nth-child(3),
.archived-log-table td:nth-child(3){
  white-space:normal;
  overflow-wrap:anywhere;
}
.archived-log-table tbody tr:last-child td{border-bottom:none}
.archive-log-pill{
  display:inline-flex;
  align-items:center;
  gap:4px;
  border-radius:8px;
  padding:3px 8px;
  font-size:10px;
  font-weight:800;
  letter-spacing:.2px;
}
.archive-log-pill.unserviceable{
  background:var(--btn-del-bg);
  color:var(--btn-del-text);
}
.archive-log-pill.serviceable{
  background:var(--btn-add-bg);
  color:var(--btn-add-text);
}
.archived-sheet-foot{
  border-top:1px solid var(--modal-foot-border);
  background:var(--modal-foot-bg);
  padding:9px 12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}
.archived-foot-meta{
  font-size:10px;
  color:var(--tm);
  font-weight:700;
}
.archived-foot-ref{
  margin-left:14px;
  color:var(--tm);
}
.archived-export-btn{
  border:0;
  border-radius:7px;
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:7px 11px;
  font-size:11px;
  font-weight:800;
  color:var(--btn-primary-text);
  background:var(--btn-primary-bg);
  cursor:pointer;
}
.archived-export-btn:hover{
  filter:brightness(1.05);
}
.archived-inline-icon{
  width:14px;
  height:14px;
  flex:0 0 14px;
  color:currentColor;
}
.archived-inline-icon svg,.archived-inline-icon .lucide{
  width:100%;
  height:100%;
  display:block;
}
.archived-inline-icon .lucide{fill:none;stroke:currentColor;stroke-width:2}
@media (max-width: 980px){
  .archived-history-modal{
    width:min(100vw,100vw);
    max-height:100vh;
    border-radius:0;
  }
  .archived-history-modal .modal-head,
  .archived-history-modal .modal-body{
    padding-left:10px;
    padding-right:10px;
  }
  .archived-history-modal .modal-head{
    flex-wrap:wrap;
    align-items:flex-start;
    gap:8px;
  }
  .archived-title-main{
    font-size:18px;
    line-height:1.15;
    min-width:0;
    word-break:break-word;
  }
  .archived-icsd-grid{
    grid-template-columns:1fr;
  }
  .archived-icsd-log-table{
    min-width:0;
    width:100%;
  }
  .archived-sheet-main{
    grid-template-columns:1fr;
  }
  .archived-sheet-side{
    border-right:none;
    border-bottom:1px solid var(--border);
  }
  .archived-top-cards{
    grid-template-columns:1fr;
  }
  .archived-top-card{
    border-right:none;
    border-bottom:1px solid var(--border);
  }
  .archived-top-card:last-child{
    border-bottom:none;
  }
  .archived-log-table{
    min-width:0;
    width:100%;
  }
  .archived-sheet-foot{
    flex-direction:column;
    align-items:flex-start;
  }
  .archived-export-btn{
    width:100%;
    justify-content:center;
  }
}
.notif-wrap{position:relative}
.notif-badge{
  position:absolute;
  top:-4px;
  right:-4px;
  min-width:16px;
  height:16px;
  border-radius:999px;
  background:#ef4444;
  color:#fff;
  font-size:10px;
  font-weight:700;
  display:none;
  place-items:center;
  padding:0 4px;
}
.notif-panel{
  position:absolute;
  top:calc(100% + 8px);
  right:0;
  width:320px;
  max-height:420px;
  overflow:hidden;
  background:#fff;
  border:1px solid #e2e8f0;
  border-radius:12px;
  box-shadow:0 20px 35px rgba(15,23,42,.15);
  display:none;
  z-index:170;
}
.notif-panel.show{display:block}
.notif-head{
  padding:10px 10px 8px;
  border-bottom:1px solid #f1f5f9;
  font-size:12px;
  font-weight:700;
}
.notif-head-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}
.notif-head-actions{
  display:flex;
  align-items:center;
  gap:6px;
}
.notif-head-btn{
  width:24px;
  height:24px;
  border-radius:8px;
  border:1px solid #dbe3ef;
  background:#f8fafc;
  color:#475569;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:0;
  cursor:pointer;
}
.notif-head-btn .lucide{
  width:13px;
  height:13px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.notif-tabs{
  margin-top:8px;
  display:flex;
  gap:6px;
  flex-wrap:wrap;
}
.notif-tab{
  border:1px solid #dbe3ef;
  background:#f8fafc;
  color:#475569;
  border-radius:999px;
  font-size:10px;
  font-weight:700;
  padding:3px 8px;
  cursor:pointer;
}
.notif-tab.active{
  background:#eff6ff;
  border-color:#93c5fd;
  color:#1d4ed8;
}
.notif-list{
  max-height:320px;
  overflow:auto;
}
.notif-empty{
  padding:14px 12px;
  font-size:12px;
  color:var(--tm);
}
.notif-group-label{
  position:sticky;
  top:0;
  z-index:1;
  font-size:10px;
  text-transform:uppercase;
  letter-spacing:.04em;
  font-weight:800;
  color:#64748b;
  background:#f8fafc;
  border-top:1px solid #eef2f7;
  border-bottom:1px solid #eef2f7;
  padding:6px 10px;
}
.notif-item{
  padding:9px 10px;
  border-bottom:1px solid #f8fafc;
  font-size:12px;
  line-height:1.35;
  display:grid;
  grid-template-columns:16px 1fr auto;
  gap:8px;
  align-items:flex-start;
}
.notif-item:last-child{border-bottom:0}
.notif-item.success{background:#f0fdf4}
.notif-item.error{background:#fef2f2}
.notif-item.info{background:#eff6ff}
.notif-item.warn{background:#fffbeb}
.notif-item.unread{
  box-shadow:inset 2px 0 0 #2563eb;
}
.notif-ico{
  width:16px;
  height:16px;
  color:#475569;
  margin-top:1px;
}
.notif-ico .lucide{
  width:100%;
  height:100%;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.notif-main{
  min-width:0;
}
.notif-msg{
  color:#0f172a;
  font-size:12px;
  word-break:break-word;
}
.notif-count{
  margin-left:6px;
  border:1px solid #cbd5e1;
  border-radius:999px;
  padding:1px 6px;
  font-size:10px;
  font-weight:700;
  color:#475569;
  background:#fff;
}
.notif-meta{
  margin-top:4px;
  color:var(--tm);
  font-size:10px;
}
.notif-item-actions{
  display:flex;
  align-items:center;
  gap:4px;
}
.notif-item-btn{
  width:22px;
  height:22px;
  border-radius:7px;
  border:1px solid #dbe3ef;
  background:#fff;
  color:#475569;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:0;
  cursor:pointer;
}
.notif-item-btn .lucide{
  width:12px;
  height:12px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}



/* MAIN */
.main{
  margin-top:0;
  flex:1;
  padding:45px 100px 24px;
  display:flex;
  flex-direction:column;
  gap:14px;
}
.main[data-view="Dashboard"]{
  padding-top:200px;
}
.main[data-view="Manage Inventory"]{
  gap:30px;
}
.main[data-view="Archives"]{
  gap:30px;
}

/* ICS STAGED ITEMS CARD */
.ics-card{
  background:#fff;
  border-radius:var(--r1);
  box-shadow:var(--sh);
  padding:16px;
  margin-top:0;
  transition:box-shadow .2s ease, transform .2s ease, border-color .2s ease;
}
.ics-card:hover{
  box-shadow:0 14px 30px rgba(15,23,42,.1);
}
.ics-card-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  margin-bottom:12px;
  font-weight:700;
  padding-bottom:8px;
  border-bottom:1px solid #edf2f7;
}
.ics-card.staged{
  background:var(--staged-card-bg);
  border:1px solid var(--staged-card-border);
  box-shadow:var(--sheet-shadow);
}
.ics-card.records{
  background:#ffffff;
  border:1px solid #e2e8f0;
}
.ics-card.records.par-records{
  border-color:color-mix(in srgb, var(--par-accent) 42%, var(--border) 58%);
  box-shadow:
    var(--sh),
    inset 0 1px 0 color-mix(in srgb, var(--par-accent) 30%, transparent);
}
.ics-card.records.par-records .ics-card-head{
  border-bottom-color:color-mix(in srgb, var(--par-accent) 34%, #e2e8f0 66%);
}
.ics-card.records.par-records .card-badge.records{
  background:var(--par-accent-soft);
  color:var(--par-accent);
  border-color:color-mix(in srgb, var(--par-accent) 42%, transparent);
}
.card-title{display:flex;align-items:center;gap:8px}
.card-badge{
  font-size:10px;
  font-weight:700;
  border-radius:999px;
  padding:3px 8px;
  letter-spacing:.02em;
}
.card-badge.staged{
  background:var(--sheet-input-bg);
  color:var(--sheet-heading);
  border:1px solid var(--sheet-input-border);
}
.card-badge.records{
  background:#f1f5f9;
  color:#334155;
  border:1px solid #cbd5e1;
}
.card-subtext{
  margin:0 0 10px;
  font-size:var(--tbl-meta-size);
  color:var(--tm);
}
.stage-context{
  font-size:var(--tbl-meta-size);
  color:var(--staged-context-text);
  font-weight:700;
  text-align:right;
  min-width:0;
  max-width:min(46vw,520px);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.ics-card.staged .stage-table-wrap{
  background:var(--staged-table-wrap-bg);
  border:1px solid var(--staged-table-wrap-border);
  border-radius:12px;
  padding:2px;
}
.ics-card.staged .ics-table tbody td{
  background:var(--staged-row-bg);
}
.ics-card.staged .ics-table tbody tr:nth-child(even) td{
  background:var(--staged-row-alt-bg);
}
.ics-table{width:100%;border-collapse:collapse;font-size:var(--tbl-body-size)}
.ics-table th{color:var(--tm);text-align:left;font-size:var(--tbl-head-size);padding:8px 6px;border-bottom:1px solid #eef2f7}
.ics-table td{padding:6px;border-bottom:1px solid #f1f5f9;font-size:var(--tbl-body-size)}
.ics-table td[contenteditable]{background:#f8fafc;border-radius:6px}
.stage-input{
  width:100%;
  border:1px solid #cbd5e1;
  border-radius:6px;
  padding:4px 6px;
  font-size:12px;
  background:#fff;
}
.stage-input[readonly]{background:#f8fafc}
.stage-input.dup-error{
  border-color:#dc2626;
  box-shadow:0 0 0 2px rgba(220,38,38,.12);
  background:#fef2f2;
}
.stage-cell-actions{display:flex;gap:8px;justify-content:center}
.stage-cell-actions .icon-only-btn{
  min-width:32px;
  width:32px;
  height:32px;
  border-radius:9px;
  background:var(--staged-action-icon-bg);
  border-color:var(--staged-action-icon-border);
  color:var(--staged-action-icon-text);
}
.stage-cell-actions .icon-only-btn .lucide{
  width:14px;
  height:14px;
}
.stage-cell-actions .icon-only-btn:hover:not(:disabled){
  background:var(--staged-action-icon-hover-bg);
  border-color:var(--staged-action-icon-hover-border);
  color:var(--staged-action-icon-hover-text);
}
.stage-eul{display:flex;gap:6px;align-items:center;justify-content:center}
.stage-eul .stage-eul-input{
  width:56px;
  min-width:56px;
  padding:4px 4px;
}
.eul-input{text-align:center}
.eul-btn{
  border:1px solid var(--staged-eul-border);
  border-radius:6px;
  background:var(--staged-eul-bg);
  color:var(--staged-eul-text);
  width:26px;
  height:26px;
  line-height:24px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}
.eul-btn:hover{
  background:var(--staged-eul-hover-bg);
  border-color:var(--staged-eul-hover-border);
}
.records .ics-table th{background:#f8fafc}
.records .ics-table td{font-size:var(--tbl-body-size)}
.records .ics-table tbody tr{
  --records-row-bg:#ffffff;
  background:var(--records-row-bg);
}
.records .ics-table tbody tr:nth-child(even){
  --records-row-bg:#fcfdff;
  background:var(--records-row-bg);
}
.records .ics-table tbody tr:hover{
  --records-row-bg:#f7fbff;
  background:var(--records-row-bg);
}
.records .ics-table{
  table-layout:fixed;
  width:100%;
}
/* Inventory records table can size columns by content (easy to revert). */
.records .ics-records-table{
  table-layout:auto;
  width:100%;
}
.records-table-wrap .ics-table th:first-child,
.records-table-wrap .ics-table td:first-child,
.stage-table-wrap .ics-table th:first-child,
.stage-table-wrap .ics-table td:first-child{
  position:sticky;
  left:0;
}
.records-table-wrap .ics-table thead th:first-child{
  z-index:4;
  background:#f8fafc;
}
.records-table-wrap .ics-table tbody td:first-child{
  z-index:1;
  background:var(--records-row-bg);
  background-clip:padding-box;
}
.stage-table-wrap .ics-table thead th:first-child{
  z-index:4;
  background:var(--sheet-input-bg);
}
.stage-table-wrap .ics-table tbody td:first-child{
  z-index:1;
  background:#fff;
}
.records .ics-table tbody tr:nth-child(even) td:first-child{background:#fcfdff}
.records .ics-table tbody tr:hover td:first-child{background:#f7fbff}
.records .ics-table td:nth-child(6){
  word-break:break-word;
}
.stage-table-wrap .staged-items-table{
  table-layout:auto;
  width:100%;
  min-width:100%;
}
.stage-table-wrap{
  position:relative;
}
.staged .staged-items-table th:nth-child(1),
.staged .staged-items-table td:nth-child(1),
.staged .staged-items-table th:nth-child(4),
.staged .staged-items-table td:nth-child(4),
.staged .staged-items-table th:nth-child(8),
.staged .staged-items-table td:nth-child(8),
.staged .staged-items-table th:nth-child(9),
.staged .staged-items-table td:nth-child(9){
  text-align:center;
}
.staged .staged-items-table td:nth-child(4) .stage-input,
.staged .staged-items-table td:nth-child(6) .stage-input,
.staged .staged-items-table td:nth-child(7) .stage-input{
  text-align:right;
}
.staged .staged-items-table .stage-cell-actions{
  gap:6px;
}
.staged .staged-items-table .stage-cell-actions .icon-only-btn{
  min-width:30px;
  width:30px;
  height:30px;
}
.records .ics-records-table td:nth-child(4){
  white-space:normal;
  overflow-wrap:anywhere;
  word-break:break-word;
  line-height:1.35;
}
.records .ics-records-table td:last-child{
  white-space:nowrap;
}
.records .actions-eul-table td:last-child{
  white-space:nowrap;
  padding-top:0;
  padding-bottom:0;
}
.records .actions-eul-table{
  border-collapse:separate;
  border-spacing:0;
}
.records .actions-eul-table td{
  vertical-align:middle;
}
.records .actions-eul-table td:nth-child(3){
  word-break:break-word;
  white-space:normal;
}
.records .actions-eul-table td:nth-child(2){
  white-space:nowrap;
}
.records .source-no-link{
  font-weight:800;
}
.records .source-no-link.source-no-ics{
  color:#1d4ed8;
}
.records .source-no-link.source-no-par{
  color:#b45309;
}
.records .actions-eul-table td:nth-child(8){
  white-space:normal;
}
.records .actions-eul-table .stage-input{
  max-width:78px;
}
.records .actions-eul-table tbody tr.targeted-row{
  background:#eff6ff;
  box-shadow:inset 3px 0 0 #2563eb;
}
.records .actions-eul-table tbody tr.targeted-row td:first-child{background:#eff6ff}
.actions-eul-actions{
  display:flex;
  flex-wrap:wrap;
  gap:4px;
  justify-content:center;
  align-items:center;
  min-height:42px;
  height:100%;
  width:100%;
}
.actions-eul-divider{
  width:1px;
  height:18px;
  background:rgba(148,163,184,.45);
  margin:0 3px;
}
.actions-eul-actions .small-btn,
.actions-eul-actions .btn:not(.icon-only-btn){
  padding:4px 9px;
  font-size:11px;
}
.action-icon-btn{
  display:inline-flex;
  align-items:center;
  gap:4px;
}
.action-icon-btn svg{
  width:12px;
  height:12px;
  fill:currentColor;
}
.action-select{
  width:72px;
  display:inline-block;
}
.actions-eul-wrap{
  overflow-x:auto;
  overflow-y:auto;
  max-height:none;
  -webkit-overflow-scrolling:touch;
}
.records .ics-table thead th:last-child{
  text-align:center;
}
.records-table-wrap{
  max-height:340px;
  overflow:auto;
  border:1px solid #e2e8f0;
  border-radius:12px;
}
.records-table-wrap.actions-eul-wrap{
  max-height:520px;
}
.records-table-wrap,
.stage-table-wrap,
.detail-table-wrap,
.inspection-history-table-wrap{
  overflow-x:auto;
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
}
.records-table-wrap .ics-table,
.stage-table-wrap .ics-table:not(.staged-items-table),
.detail-table-wrap .detail-table,
.inspection-history-table-wrap .inspection-history-table{
  width:max-content;
  min-width:100%;
}
.stage-table-wrap .staged-items-table{
  width:100%;
  min-width:100%;
  table-layout:auto;
}
.wmr-archive-panel{
  display:block;
  margin-top:14px;
}
.wmr-archive-panel.show{
  display:block;
}
.wmr-archive-panel.wmr-modal{
  width:100%;
  max-height:none;
}
.wmr-archive-panel .modal-body{
  overflow:visible;
}
.wmr-archive-panel .modal-foot{
  position:static;
}
.wmr-archive-panel .card-title{
  font-size:15px;
}
.wmr-archive-panel .card-subtext{
  font-size:11.5px;
  margin-bottom:8px;
}
.wmr-archive-panel .wmr-grid{
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:8px 10px;
}
.wmr-archive-panel .wmr-signatories-divider{
  margin:10px 0 8px;
  border-top:1px solid rgba(148,163,184,.35);
}
.wmr-archive-panel .wmr-signatories-grid{
  grid-template-columns:repeat(4,minmax(0,1fr));
}
.wmr-archive-panel .wmr-grid label{
  display:block;
  font-size:11px;
  color:var(--tm);
  margin-bottom:4px;
}
.wmr-archive-panel .stage-input{
  min-height:30px;
  padding:4px 8px;
  font-size:12px;
}
.wmr-archive-panel .stage-table-wrap{
  max-height:320px;
}
.wmr-archive-panel .wmr-items-table{
  font-size:12px;
}
.wmr-archive-panel .wmr-items-table th,
.wmr-archive-panel .wmr-items-table td{
  padding:7px 8px;
}
.wmr-archive-panel .wmr-items-table td .stage-input{
  min-width:110px;
}
.wmr-archive-panel .wmr-sale-note{
  margin-top:6px;
  font-size:10.5px;
}
.table-density-toggle{
  display:inline-flex;
  align-items:center;
  gap:4px;
  padding:3px;
  border:1px solid #cbd5e1;
  border-radius:999px;
  background:#fff;
}
.density-btn{
  border:0;
  border-radius:999px;
  padding:4px 9px;
  font-size:11px;
  font-weight:700;
  color:#475569;
  background:transparent;
  cursor:pointer;
}
.density-btn.active{
  background:#eff6ff;
  color:#1d4ed8;
}
.records .ics-table thead th{
  position:sticky;
  top:0;
  z-index:2;
  background:#f8fafc;
  box-shadow:0 1px 0 #e2e8f0;
}
.records .ics-table col.c-idx{width:2%}
.records .ics-table col.c-ics{width:10%}
.records .ics-table col.c-status{width:7%}
.records .ics-table col.c-entity{width:17%}
.records .ics-table col.c-issued{width:7%}
.records .ics-table col.c-accountable{width:11%}
.records .ics-table col.c-eul{width:11%}
.records .ics-table col.c-items{width:6%}
.records .ics-table col.c-total{width:10%}
.records .ics-table col.c-actions{width:11%}
.records .ics-records-table col.c-idx,
.records .ics-records-table col.c-ics,
.records .ics-records-table col.c-status,
.records .ics-records-table col.c-entity,
.records .ics-records-table col.c-issued,
.records .ics-records-table col.c-accountable,
.records .ics-records-table col.c-eul,
.records .ics-records-table col.c-items,
.records .ics-records-table col.c-total,
.records .ics-records-table col.c-actions{
  width:auto;
}
.records .ics-records-table th:nth-child(1),
.records .ics-records-table td:nth-child(1){min-width:42px}
.records .ics-records-table th:nth-child(2),
.records .ics-records-table td:nth-child(2){min-width:118px}
.records .ics-records-table th:nth-child(3),
.records .ics-records-table td:nth-child(3){min-width:96px}
.records .ics-records-table th:nth-child(5),
.records .ics-records-table td:nth-child(5){min-width:94px}
.records .ics-records-table th:nth-child(8),
.records .ics-records-table td:nth-child(8){min-width:74px}
.records .actions-eul-table col.c-ac-idx{width:4%}
.records .actions-eul-table col.c-ac-record{width:12%}
.records .actions-eul-table col.c-ac-desc{width:24%}
.records .actions-eul-table col.c-ac-euldays{width:9%}
.records .actions-eul-table col.c-ac-eulstatus{width:11%}
.records .actions-eul-table col.c-ac-inspection{width:10%}
.records .actions-eul-table col.c-ac-remarks{width:14%}
.records .actions-eul-table col.c-ac-actions{width:16%}
.records-table-wrap.actions-eul-wrap .actions-eul-table{
  width:100%;
  min-width:0;
  table-layout:fixed;
}
.records .actions-eul-table th:nth-child(1),
.records .actions-eul-table td:nth-child(1){min-width:40px}
.records .actions-eul-table th:nth-child(2),
.records .actions-eul-table td:nth-child(2){min-width:100px}
.records .actions-eul-table th:nth-child(3),
.records .actions-eul-table td:nth-child(3){min-width:180px}
.records .actions-eul-table th:nth-child(4),
.records .actions-eul-table td:nth-child(4){min-width:76px}
.records .actions-eul-table th:nth-child(5),
.records .actions-eul-table td:nth-child(5){min-width:100px}
.records .actions-eul-table th:nth-child(6),
.records .actions-eul-table td:nth-child(6){min-width:96px}
.records .actions-eul-table th:nth-child(7),
.records .actions-eul-table td:nth-child(7){min-width:120px}
.records .actions-eul-table th:nth-child(8),
.records .actions-eul-table td:nth-child(8){min-width:140px}
.records .ics-records-table th:nth-child(9),
.records .ics-records-table td:nth-child(9){min-width:104px}
.records .ics-records-table th:nth-child(10),
.records .ics-records-table td:nth-child(10){min-width:130px}
.records .ics-records-table th,
.records .ics-records-table td{
  padding:6px 6px;
}
.records .ics-records-table th{
  font-size:var(--tbl-head-size);
}
.records .ics-records-table td{
  font-size:11px;
}
.records .ics-records-table td:last-child{
  padding-left:4px;
  padding-right:4px;
}
.records .ics-records-table td:last-child .btn.icon-only-btn{
  min-width:26px;
  width:26px;
  height:26px;
  padding:0;
  border-radius:8px;
}
.records .ics-records-table td:last-child .btn.icon-only-btn .lucide{
  width:13px;
  height:13px;
}
.records .ics-records-table td:last-child{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:4px;
  flex-wrap:nowrap;
}
.records .ics-records-table td:nth-child(7){
  vertical-align:top;
}
.eul-stack{
  display:flex;
  flex-direction:column;
  gap:4px;
  min-height:34px;
}
.eul-stack .eul-line{
  min-height:14px;
  display:flex;
  flex-wrap:wrap;
  align-items:flex-start;
  gap:4px;
}
.records .ics-no-line .ics-link-btn{
  display:inline-block;
  max-width:100%;
  min-width:0;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.risk-badge{
  display:inline-block;
  border-radius:999px;
  padding:2px 7px;
  font-size:var(--tbl-meta-size);
  font-weight:700;
  margin-right:4px;
}
.risk-badge.warn{background:#fef3c7;color:#92400e}
.risk-badge.near{background:#dbeafe;color:#1e40af}
.risk-badge.danger{background:#fee2e2;color:#991b1b}
.risk-badge.ok{background:#dcfce7;color:#166534}
.value-main{font-weight:700}
.value-sub{
  margin-top:2px;
  font-size:var(--tbl-meta-size);
  color:var(--tm);
}
.value-main-inline{
  display:inline-flex;
  align-items:center;
  gap:6px;
}
.value-info-btn{
  width:18px;
  height:18px;
  border:1px solid #dbe3ef;
  border-radius:999px;
  background:#f8fafc;
  color:#64748b;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:0;
  cursor:help;
}
.value-info-btn .lucide{
  width:11px;
  height:11px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.empty-cell{
  text-align:center;
  color:var(--tm);
  padding:16px 8px;
  font-style:italic;
}
.stage-table-wrap{
  max-height:340px;
  overflow:auto;
  border:1px solid var(--sheet-input-border);
  border-radius:12px;
}
.records-table-wrap,
.detail-table-wrap,
.inspection-history-table-wrap{
  -ms-overflow-style:none;
  scrollbar-width:none;
}
.records-table-wrap::-webkit-scrollbar,
.detail-table-wrap::-webkit-scrollbar,
.inspection-history-table-wrap::-webkit-scrollbar{
  width:0;
  height:0;
}
.staged .ics-table thead th{
  position:sticky;
  top:0;
  z-index:2;
  background:var(--sheet-input-bg);
  color:var(--sheet-label);
  box-shadow:0 1px 0 var(--sheet-input-border);
}
.ics-card-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:12px}
.ics-card.staged .ics-card-actions{
  margin-top:16px;
  padding-right:2px;
  padding-bottom:2px;
}
.btn,
.small-btn,
.modal-btn{
  appearance:none;
  border:1px solid transparent;
  border-radius:12px;
  min-height:36px;
  padding:0 12px;
  font-size:12px;
  font-weight:700;
  line-height:1;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  cursor:pointer;
  white-space:nowrap;
  text-decoration:none;
  box-shadow:var(--btn-shadow-rest);
  transition:transform .16s ease, box-shadow .2s ease, background-color .16s ease, color .16s ease, border-color .16s ease;
}
.btn:hover:not(:disabled),
.small-btn:hover:not(:disabled),
.modal-btn:hover:not(:disabled){
  transform:translateY(-1px);
  box-shadow:var(--btn-shadow-hover);
}
.btn:active:not(:disabled),
.small-btn:active:not(:disabled),
.modal-btn:active:not(:disabled){
  transform:translateY(0);
  box-shadow:var(--btn-shadow-active);
}
.btn:focus-visible,
.small-btn:focus-visible,
.modal-btn:focus-visible{
  outline:none;
  box-shadow:var(--btn-focus-ring),var(--btn-shadow-hover);
}
.btn:disabled,
.small-btn:disabled,
.modal-btn:disabled{
  opacity:.55;
  cursor:not-allowed;
  filter:grayscale(.18);
  box-shadow:none;
}
.btn .lucide,
.small-btn .lucide,
.modal-btn .lucide{
  width:14px;
  height:14px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
  flex-shrink:0;
}
.btn-primary,
.small-btn.finalize,
.modal-btn.primary{
  background:var(--btn-primary-bg);
  border-color:transparent;
  color:var(--btn-primary-text);
}
.btn-secondary,
.small-btn.add,
.modal-btn.secondary,
.dm-switch-btn{
  background:var(--btn-secondary-bg);
  border-color:var(--border);
  color:var(--btn-secondary-text);
}
.btn-danger,
.small-btn.del{
  background:var(--btn-del-bg);
  border-color:transparent;
  color:var(--btn-del-text);
}
.btn-par{
  background:var(--par-accent);
  border-color:color-mix(in srgb, var(--par-accent) 72%, transparent);
  color:#ffffff;
}
.btn-par:hover:not(:disabled){
  background:var(--par-accent-hover);
  color:#ffffff;
}
.btn-par:focus-visible{
  box-shadow:
    0 0 0 3px color-mix(in srgb, var(--par-accent) 28%, transparent),
    var(--btn-shadow-hover);
}
.btn-ghost{
  background:var(--btn-ghost-bg);
  border-color:var(--btn-ghost-border);
  color:var(--btn-ghost-text);
}
.small-btn:not(.add):not(.finalize):not(.del){
  background:var(--btn-secondary-bg);
  border-color:var(--border);
  color:var(--btn-secondary-text);
}
.btn-sm,
.small-btn{
  min-height:32px;
  padding:0 11px;
  font-size:12px;
}
.btn-md,
.modal-btn{
  min-height:36px;
  padding:0 13px;
  font-size:12px;
}
.btn-lg{
  min-height:42px;
  padding:0 16px;
  font-size:13px;
}
.btn-icon,
.icon-btn,
.dash-top-icon-btn,
.notif-head-btn,
.brand-toggle{
  appearance:none;
  border:1px solid var(--icon-btn-border);
  background:var(--icon-btn-bg);
  color:var(--icon-btn-text);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:40px;
  height:40px;
  border-radius:12px;
  padding:0;
  box-shadow:var(--btn-shadow-rest);
  cursor:pointer;
  transition:transform .16s ease, box-shadow .2s ease, background-color .16s ease, color .16s ease, border-color .16s ease;
}
.btn-icon:hover:not(:disabled),
.icon-btn:hover,
.dash-top-icon-btn:hover,
.notif-head-btn:hover,
.brand-toggle:hover{
  background:var(--as);
  color:var(--ah);
  border-color:#bfdbfe;
  transform:translateY(-1px);
  box-shadow:var(--btn-shadow-hover);
}
.btn-icon:focus-visible,
.icon-btn:focus-visible,
.dash-top-icon-btn:focus-visible,
.notif-head-btn:focus-visible,
.brand-toggle:focus-visible{
  outline:none;
  box-shadow:var(--btn-focus-ring),var(--btn-shadow-hover);
}
.btn-icon:disabled,
.icon-btn:disabled,
.dash-top-icon-btn:disabled,
.notif-head-btn:disabled,
.brand-toggle:disabled{
  opacity:.55;
  cursor:not-allowed;
  box-shadow:none;
}
.brand-toggle{
  width:40px;
  height:40px;
  border-radius:11px;
}
.notif-head-btn{
  width:40px;
  height:40px;
  border-radius:10px;
}
.icon-only-btn{
  min-width:40px;
  width:40px;
  height:40px;
  padding:0;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:10px;
}
.icon-only-btn svg,.icon-only-btn .lucide{
  width:15px;
  height:15px;
}
.icon-only-btn .lucide{fill:none;stroke:currentColor;stroke-width:2}

body[data-density="compact"]{
  --tbl-body-size:10.5px;
  --tbl-head-size:9.5px;
  --tbl-meta-size:9.5px;
}
body[data-density="compact"] .ics-table th{padding:6px 5px}
body[data-density="compact"] .ics-table td{padding:4px 5px}
body[data-density="compact"] .btn-sm,
body[data-density="compact"] .small-btn{
  min-height:30px;
  padding:0 9px;
  font-size:11px;
}
body[data-density="compact"] .stage-input{padding:3px 5px;font-size:11px}
.modal-form{
  display:grid;
  gap:10px;
}
.modal-form label{
  font-size:11px;
  color:var(--tm);
}
.modal-form .stage-input{
  border-color:#c7d3e2;
}
.stage-input.field-error{
  border-color:#dc2626 !important;
  background:#fff5f5;
  box-shadow:0 0 0 2px rgba(220,38,38,.12);
}
.profile-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px 14px;
}
.profile-grid .full{grid-column:1 / -1}
.profile-shell{
  display:grid;
  grid-template-columns:220px minmax(0,1fr);
  gap:14px;
}
.profile-side{
  border:1px solid var(--border);
  border-radius:14px;
  padding:12px;
  background:var(--surface);
  box-shadow:0 6px 16px rgba(15,23,42,.05);
  display:flex;
  flex-direction:column;
  gap:12px;
}
.profile-side-title{
  margin:0;
  font-size:11px;
  letter-spacing:.08em;
  text-transform:uppercase;
  color:var(--tm);
  font-weight:800;
}
.profile-side-menu{
  display:flex;
  flex-direction:column;
  gap:6px;
}
.profile-menu-btn{
  border:1px solid var(--border);
  background:#fff;
  color:var(--t);
  border-radius:10px;
  padding:8px 10px;
  text-align:left;
  font-size:12px;
  font-weight:700;
  cursor:pointer;
}
.profile-menu-btn.active{
  border-color:transparent;
  background:var(--as);
  color:var(--ah);
  box-shadow:none;
}
.profile-menu-btn:focus-visible{
  outline:2px solid var(--a);
  outline-offset:1px;
}
.profile-side-meta{
  margin-top:auto;
  border-top:1px dashed var(--border);
  padding-top:8px;
  display:grid;
  gap:6px;
}
.profile-side-meta .k{
  font-size:10px;
  text-transform:uppercase;
  letter-spacing:.08em;
  color:var(--tm);
  font-weight:800;
}
.profile-side-meta .v{
  font-size:12px;
  color:var(--t);
  font-weight:700;
}
.profile-content{
  min-width:0;
  display:grid;
  gap:10px;
}
.profile-pane{
  display:none;
}
.profile-pane.active{
  display:block;
}
.profile-head{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}
.profile-head-meta{
  display:flex;
  flex-direction:column;
  gap:3px;
}
.profile-head-title{
  margin:0;
  font-size:14px;
  font-weight:800;
  color:var(--t);
}
.profile-head-sub{
  margin:0;
  font-size:11px;
  color:var(--tm);
}
.profile-section{
  border:1px solid var(--border);
  border-radius:14px;
  padding:12px;
  background:var(--surface);
  box-shadow:0 6px 16px rgba(15,23,42,.05);
}
.profile-section-title{
  margin:0 0 10px;
  font-size:12px;
  letter-spacing:.06em;
  text-transform:uppercase;
  color:var(--tm);
  font-weight:800;
}
.profile-pane .stage-input{
  min-height:34px;
  padding:6px 9px;
}
.profile-avatar-preview{
  width:34px;
  height:34px;
  border-radius:999px;
  border:1px solid #bfdbfe;
  background:#eff6ff;
  color:#1d4ed8;
  display:grid;
  place-items:center;
  font-size:13px;
  font-weight:800;
}
.profile-avatar-preview.has-icon,
.sidebar-profile-avatar.has-icon{
  font-size:0;
}
.profile-avatar-icon{
  width:16px;
  height:16px;
  display:block;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.avatar-picker{
  display:grid;
  grid-template-columns:repeat(6,minmax(0,1fr));
  gap:6px;
}
.avatar-picker-btn{
  border:1px solid var(--border);
  background:#fff;
  color:var(--t);
  border-radius:9px;
  height:32px;
  display:grid;
  place-items:center;
  cursor:pointer;
}
.avatar-picker-btn svg,.avatar-picker-btn .lucide{
  width:14px;
  height:14px;
}
.avatar-picker-btn .lucide{fill:none;stroke:currentColor;stroke-width:2}
.avatar-picker-btn.active{
  border-color:var(--a);
  box-shadow:0 0 0 1px var(--a);
}
.avatar-picker-btn:focus-visible{
  outline:2px solid var(--a);
  outline-offset:1px;
}
.profile-readonly{
  border:1px solid var(--border);
  border-radius:10px;
  padding:9px 10px;
  background:#fff;
  font-size:12px;
  color:var(--t);
  font-weight:600;
  word-break:break-word;
}
.theme-preview-grid{
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:8px;
}
.theme-preview-btn{
  border:1px solid var(--border);
  border-radius:8px;
  background:#fff;
  color:var(--t);
  padding:6px 8px;
  font-size:11px;
  font-weight:700;
  cursor:pointer;
  text-align:left;
  display:flex;
  flex-direction:column;
  gap:5px;
}
.theme-preview-btn .theme-name{
  line-height:1.1;
}
.theme-preview-btn .theme-swatches{
  display:flex;
  gap:4px;
}
.theme-preview-btn .theme-swatches i{
  display:block;
  width:14px;
  height:6px;
  border-radius:999px;
}
.theme-preview-btn[data-theme="playful-sunflower"] .theme-swatches i:nth-child(1){background:#f97316}
.theme-preview-btn[data-theme="playful-sunflower"] .theme-swatches i:nth-child(2){background:#fff2e8}
.theme-preview-btn[data-theme="playful-sunflower"] .theme-swatches i:nth-child(3){background:#c2410c}
.theme-preview-btn[data-theme="playful-flamingo"] .theme-swatches i:nth-child(1){background:#ef4444}
.theme-preview-btn[data-theme="playful-flamingo"] .theme-swatches i:nth-child(2){background:#fff1f2}
.theme-preview-btn[data-theme="playful-flamingo"] .theme-swatches i:nth-child(3){background:#be123c}
.theme-preview-btn[data-theme="playful-lotus"] .theme-swatches i:nth-child(1){background:#14b8a6}
.theme-preview-btn[data-theme="playful-lotus"] .theme-swatches i:nth-child(2){background:#ecfeff}
.theme-preview-btn[data-theme="playful-lotus"] .theme-swatches i:nth-child(3){background:#0f766e}
.theme-preview-btn[data-theme="playful-kingfisher"] .theme-swatches i:nth-child(1){background:#0ea5e9}
.theme-preview-btn[data-theme="playful-kingfisher"] .theme-swatches i:nth-child(2){background:#e0f2fe}
.theme-preview-btn[data-theme="playful-kingfisher"] .theme-swatches i:nth-child(3){background:#0284c7}
.theme-preview-btn[data-theme="playful-fern"] .theme-swatches i:nth-child(1){background:#10b981}
.theme-preview-btn[data-theme="playful-fern"] .theme-swatches i:nth-child(2){background:#d1fae5}
.theme-preview-btn[data-theme="playful-fern"] .theme-swatches i:nth-child(3){background:#059669}
.theme-preview-btn[data-theme="elegant-white"] .theme-swatches i:nth-child(1){background:#2563eb}
.theme-preview-btn[data-theme="elegant-white"] .theme-swatches i:nth-child(2){background:#eff6ff}
.theme-preview-btn[data-theme="elegant-white"] .theme-swatches i:nth-child(3){background:#1d4ed8}
.theme-preview-btn[data-theme="crimson-black"] .theme-swatches i:nth-child(1){background:#be123c}
.theme-preview-btn[data-theme="crimson-black"] .theme-swatches i:nth-child(2){background:#2a131d}
.theme-preview-btn[data-theme="crimson-black"] .theme-swatches i:nth-child(3){background:#fb7185}
.theme-preview-btn[data-theme="dracula"] .theme-swatches i:nth-child(1){background:#6f2dbd}
.theme-preview-btn[data-theme="dracula"] .theme-swatches i:nth-child(2){background:#a663cc}
.theme-preview-btn[data-theme="dracula"] .theme-swatches i:nth-child(3){background:#171123}
.theme-preview-btn[data-theme="dracula-nocturne"] .theme-swatches i:nth-child(1){background:#8b5cf6}
.theme-preview-btn[data-theme="dracula-nocturne"] .theme-swatches i:nth-child(2){background:#c4b5fd}
.theme-preview-btn[data-theme="dracula-nocturne"] .theme-swatches i:nth-child(3){background:#130f1f}
.theme-preview-btn[data-theme="dracula-bloody"] .theme-swatches i:nth-child(1){background:#e11d48}
.theme-preview-btn[data-theme="dracula-bloody"] .theme-swatches i:nth-child(2){background:#fb7185}
.theme-preview-btn[data-theme="dracula-bloody"] .theme-swatches i:nth-child(3){background:#150d14}
.theme-preview-btn:focus-visible{
  outline:2px solid var(--a);
  outline-offset:1px;
}
.theme-preview-btn.active{
  border-color:var(--a);
  outline:2px solid var(--a);
  outline-offset:1px;
}

.my-profile-modal{
  width:min(980px,96vw);
}
.my-profile-modal .modal-body{
  overflow:visible;
}
.my-profile-modal .modal-head{
  border-bottom:none;
  min-height:118px;
  background:linear-gradient(135deg,var(--ah) 0%,var(--a) 100%);
  position:relative;
}
.my-profile-close{
  display:inline-flex;
  margin-left:auto;
}
.my-profile-shell{
  padding-top:0;
}
.my-profile-top{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:10px;
  margin-top:-56px;
}
.my-profile-avatar-btn{
  width:108px;
  height:108px;
  border-radius:999px;
  border:4px solid var(--modal-bg);
  background:var(--as);
  color:var(--a);
  display:grid;
  place-items:center;
  position:relative;
  overflow:visible;
  cursor:pointer;
}
.my-profile-photo-content{
  width:100%;
  height:100%;
  display:grid;
  place-items:center;
  font-size:28px;
  font-weight:800;
}
.my-profile-avatar-btn .profile-avatar-icon{
  width:34px;
  height:34px;
}
.my-profile-avatar-btn.has-image{
  background-size:cover;
  background-position:center;
}
.my-profile-avatar-btn.has-image .my-profile-photo-content{
  opacity:0;
}
.my-profile-avatar-btn .my-profile-photo-badge{
  position:absolute;
  right:-6px;
  bottom:-6px;
  width:28px;
  height:28px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.26);
  background:var(--a);
  color:#fff;
  display:grid;
  place-items:center;
  z-index:2;
}
.my-profile-avatar-btn .my-profile-photo-badge .lucide{
  width:14px;
  height:14px;
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.my-profile-actions{
  display:flex;
  align-items:center;
  gap:8px;
  padding-top:66px;
}
.my-profile-grid{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:12px;
  margin-top:12px;
}
.my-profile-grid .full{
  grid-column:1 / -1;
}
.my-profile-grid label{
  display:block;
  font-size:11px;
  letter-spacing:.08em;
  text-transform:uppercase;
  color:var(--tm);
  font-weight:800;
  margin-bottom:6px;
}
.my-profile-input-wrap{
  display:flex;
  align-items:center;
  gap:8px;
  border:1px solid var(--border);
  border-radius:9px;
  background:var(--surface);
  padding:0 10px;
}
.my-profile-input-wrap .stage-input{
  border:none;
  background:transparent;
  min-height:38px;
  padding:0;
  box-shadow:none;
}
.my-profile-input-wrap .stage-input:focus{
  box-shadow:none;
}
.my-profile-input-wrap .lucide{
  width:14px;
  height:14px;
  color:var(--tm);
  fill:none;
  stroke:currentColor;
  stroke-width:2;
}
.my-profile-bio{
  min-height:94px;
  resize:vertical;
}
.my-profile-photo-hint{
  margin:8px 0 0;
  font-size:11px;
  color:var(--tm);
}
body[data-theme="dracula"] .my-profile-modal .modal-head{
  background:linear-gradient(135deg,#7c3aed 0%,#5b21b6 100%);
}
body[data-theme="crimson-black"] .my-profile-modal .modal-head{
  background:linear-gradient(135deg,#be123c 0%,#9f1239 100%);
}
body[data-theme="dracula"] .my-profile-modal,
body[data-theme="crimson-black"] .my-profile-modal{
  border-color:rgba(203,213,225,.26);
}
body[data-theme="dracula"] .my-profile-modal .my-profile-grid label,
body[data-theme="crimson-black"] .my-profile-modal .my-profile-grid label{
  color:#d7ddea;
}
body[data-theme="dracula"] .my-profile-modal .my-profile-photo-hint,
body[data-theme="crimson-black"] .my-profile-modal .my-profile-photo-hint{
  color:#cbd5e1;
}
body[data-theme="dracula"] .my-profile-modal .my-profile-input-wrap,
body[data-theme="crimson-black"] .my-profile-modal .my-profile-input-wrap{
  background:rgba(255,255,255,.04);
  border-color:rgba(148,163,184,.32);
}
body[data-theme="dracula"] .my-profile-modal .my-profile-input-wrap .stage-input,
body[data-theme="crimson-black"] .my-profile-modal .my-profile-input-wrap .stage-input{
  background:transparent;
  border:none;
  color:#f8fafc;
  box-shadow:none;
}
body[data-theme="dracula"] .my-profile-modal .my-profile-input-wrap .stage-input::placeholder,
body[data-theme="crimson-black"] .my-profile-modal .my-profile-input-wrap .stage-input::placeholder{
  color:#94a3b8;
}
body[data-theme="dracula"] .my-profile-modal .my-profile-input-wrap .stage-input[readonly],
body[data-theme="crimson-black"] .my-profile-modal .my-profile-input-wrap .stage-input[readonly]{
  background:transparent;
  color:#e2e8f0;
}
body[data-theme="dracula"] .my-profile-modal .my-profile-input-wrap .lucide,
body[data-theme="crimson-black"] .my-profile-modal .my-profile-input-wrap .lucide{
  color:#aeb9d3;
}
body[data-theme="dracula"] .my-profile-modal .my-profile-bio,
body[data-theme="crimson-black"] .my-profile-modal .my-profile-bio{
  background:rgba(255,255,255,.04);
  border-color:rgba(148,163,184,.32);
  color:#f8fafc;
}
body[data-theme="dracula"] .my-profile-modal .my-profile-bio:focus,
body[data-theme="crimson-black"] .my-profile-modal .my-profile-bio:focus{
  border-color:var(--a);
  box-shadow:0 0 0 2px rgba(148,163,184,.2);
}
@media (max-width: 700px){
  .my-profile-top{
    flex-direction:column;
    margin-top:-52px;
  }
  .my-profile-actions{
    width:100%;
    padding-top:0;
    justify-content:flex-end;
  }
  .my-profile-grid{
    grid-template-columns:1fr;
  }
}

/* Dark theme surface consistency fix */
body[data-theme="dracula"] .profile-section,
body[data-theme="crimson-black"] .profile-section{
  background:rgba(255,255,255,.04);
  border-color:currentColor;
}
body[data-theme="dracula"] .profile-side,
body[data-theme="crimson-black"] .profile-side{
  background:rgba(255,255,255,.04);
  border-color:currentColor;
}
body[data-theme="dracula"] .profile-menu-btn,
body[data-theme="crimson-black"] .profile-menu-btn,
body[data-theme="dracula"] .profile-readonly,
body[data-theme="crimson-black"] .profile-readonly{
  background:rgba(255,255,255,.05);
  border-color:currentColor;
  color:#f8fafc;
}
body[data-theme="dracula"] .login-modal{
  border-width:6px;
  background:
    linear-gradient(#1c1730,#1c1730) padding-box,
    linear-gradient(120deg,#c4b5fd,#93c5fd,#6ee7b7,#f9a8d4,#c4b5fd) border-box;
  box-shadow:
    0 20px 42px rgba(0,0,0,.45),
    0 0 0 2px rgba(255,255,255,.84),
    0 0 16px rgba(255,255,255,.58),
    0 0 34px rgba(255,255,255,.34);
}
body[data-theme="crimson-black"] .login-modal{
  border-width:6px;
  background:
    linear-gradient(#17111a,#17111a) padding-box,
    linear-gradient(120deg,#fda4af,#f9a8d4,#93c5fd,#6ee7b7,#fda4af) border-box;
  box-shadow:
    0 20px 42px rgba(0,0,0,.45),
    0 0 0 2px rgba(255,255,255,.84),
    0 0 16px rgba(255,255,255,.58),
    0 0 34px rgba(255,255,255,.34);
}
body[data-theme="dracula"] .login-modal .modal-head{
  background:linear-gradient(180deg,#2a1c3d 0%,#231735 100%);
  border-bottom-color:#5e3c76;
}
body[data-theme="crimson-black"] .login-modal .modal-head{
  background:linear-gradient(180deg,#21101a 0%,#1a1016 100%);
  border-bottom-color:#4b2a33;
}
body[data-theme="dracula"] .login-modal .modal-head h3,
body[data-theme="crimson-black"] .login-modal .modal-head h3{
  color:#f8fafc;
}
body[data-theme="dracula"] .login-modal .modal-sub,
body[data-theme="crimson-black"] .login-modal .modal-sub{
  color:#cbd5e1;
}
body[data-theme="dracula"] .login-section,
body[data-theme="crimson-black"] .login-section{
  background:linear-gradient(180deg,rgba(255,255,255,.07) 0%,rgba(255,255,255,.03) 100%);
  border-color:rgba(148,163,184,.32);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.04);
}
body[data-theme="dracula"] .login-section-soft,
body[data-theme="crimson-black"] .login-section-soft{
  background:rgba(255,255,255,.025);
}
body[data-theme="dracula"] .login-modal .field-label,
body[data-theme="crimson-black"] .login-modal .field-label{
  color:#e2e8f0;
}
body[data-theme="dracula"] .login-modal .stage-input{
  background:rgba(7,6,16,.62);
  border-color:#6b5a88;
  color:#f8fafc;
}
body[data-theme="crimson-black"] .login-modal .stage-input{
  background:rgba(12,7,11,.62);
  border-color:#6b3a49;
  color:#f8fafc;
}
body[data-theme="dracula"] .login-modal .stage-input:focus{
  border-color:#a663cc;
  box-shadow:0 0 0 2px rgba(166,99,204,.24);
}
body[data-theme="crimson-black"] .login-modal .stage-input:focus{
  border-color:#fb7185;
  box-shadow:0 0 0 2px rgba(251,113,133,.22);
}
body[data-theme="dracula"] .login-modal .stage-input::placeholder,
body[data-theme="crimson-black"] .login-modal .stage-input::placeholder{
  color:#94a3b8;
}
body[data-theme="dracula"] .login-modal .login-section-soft label span,
body[data-theme="crimson-black"] .login-modal .login-section-soft label span{
  color:#d1d9ea;
}
body[data-theme="dracula"] .login-modal .login-remember span,
body[data-theme="crimson-black"] .login-modal .login-remember span{
  color:#d1d9ea;
}
body[data-theme="dracula"] .login-modal .login-hint,
body[data-theme="crimson-black"] .login-modal .login-hint{
  color:#d7ddea;
}
body[data-theme="dracula"] .login-modal .login-hint.error{
  color:#fda4af;
}
body[data-theme="crimson-black"] .login-modal .login-hint.error{
  color:#fda4af;
}
body[data-theme="dracula"] .login-modal .login-hint.success{
  color:#86efac;
}
body[data-theme="crimson-black"] .login-modal .login-hint.success{
  color:#86efac;
}
body[data-theme="dracula"] .login-modal .modal-foot{
  background:rgba(32,22,47,.96);
  border-top-color:#5e3c76;
}
body[data-theme="crimson-black"] .login-modal .modal-foot{
  background:rgba(23,17,26,.96);
  border-top-color:#4b2a33;
}
body[data-theme="dracula"] .setup-overlay.personnel-mode .setup-modal,
body[data-theme="crimson-black"] .setup-overlay.personnel-mode .setup-modal{
  color:#e2e8f0;
}
body[data-theme="dracula"] .setup-overlay.personnel-mode .setup-modal .modal-head,
body[data-theme="crimson-black"] .setup-overlay.personnel-mode .setup-modal .modal-head{
  border-bottom-color:rgba(148,163,184,.32);
}
body[data-theme="dracula"] .setup-overlay.personnel-mode .setup-modal .modal-head h3,
body[data-theme="crimson-black"] .setup-overlay.personnel-mode .setup-modal .modal-head h3{
  color:#f8fafc;
}
body[data-theme="dracula"] .setup-overlay.personnel-mode .setup-modal .modal-sub,
body[data-theme="crimson-black"] .setup-overlay.personnel-mode .setup-modal .modal-sub{
  color:#cbd5e1;
}
body[data-theme="dracula"] .setup-overlay.personnel-mode .setup-modal .profile-section-title,
body[data-theme="crimson-black"] .setup-overlay.personnel-mode .setup-modal .profile-section-title{
  color:#d7ddea;
}
body[data-theme="dracula"] .setup-overlay.personnel-mode .setup-modal label,
body[data-theme="crimson-black"] .setup-overlay.personnel-mode .setup-modal label{
  color:#e2e8f0;
}
body[data-theme="dracula"] .setup-overlay.personnel-mode .setup-modal .setup-field-meta,
body[data-theme="crimson-black"] .setup-overlay.personnel-mode .setup-modal .setup-field-meta{
  color:#cbd5e1;
}
body[data-theme="dracula"] .setup-overlay.personnel-mode .setup-modal .setup-section-profile .setup-field-head:first-child .setup-field-meta,
body[data-theme="crimson-black"] .setup-overlay.personnel-mode .setup-modal .setup-section-profile .setup-field-head:first-child .setup-field-meta{
  border-color:rgba(148,163,184,.36);
  background:rgba(255,255,255,.08);
  color:#e2e8f0;
}
body[data-theme="dracula"] .setup-overlay.personnel-mode .setup-modal .setup-section-profile{
  border-top-color:#5e3c76;
}
body[data-theme="crimson-black"] .setup-overlay.personnel-mode .setup-modal .setup-section-profile{
  border-top-color:#4b2a33;
}
body[data-theme="dracula"] .setup-overlay.personnel-mode .setup-modal .stage-input{
  background:rgba(7,6,16,.62);
  border-color:#6b5a88;
  color:#f8fafc;
}
body[data-theme="crimson-black"] .setup-overlay.personnel-mode .setup-modal .stage-input{
  background:rgba(12,7,11,.62);
  border-color:#6b3a49;
  color:#f8fafc;
}
body[data-theme="dracula"] .setup-overlay.personnel-mode .setup-modal .stage-input::placeholder,
body[data-theme="crimson-black"] .setup-overlay.personnel-mode .setup-modal .stage-input::placeholder{
  color:#94a3b8;
}
body[data-theme="dracula"] .setup-overlay.personnel-mode .setup-modal .setup-input-shell > i,
body[data-theme="crimson-black"] .setup-overlay.personnel-mode .setup-modal .setup-input-shell > i{
  color:#aeb9d3;
}
body[data-theme="dracula"] .setup-overlay.personnel-mode .setup-modal .modal-foot{
  border-top-color:#5e3c76;
}
body[data-theme="crimson-black"] .setup-overlay.personnel-mode .setup-modal .modal-foot{
  border-top-color:#4b2a33;
}
body[data-theme="dracula"] .avatar-picker-btn,
body[data-theme="crimson-black"] .avatar-picker-btn{
  background:rgba(255,255,255,.05);
  border-color:currentColor;
  color:#f8fafc;
}
@media (max-width: 900px){
  .profile-shell{
    grid-template-columns:1fr;
  }
  .profile-side{
    padding:8px;
  }
  .profile-side-menu{
    display:grid;
    grid-template-columns:repeat(2,minmax(0,1fr));
  }
}
@media (max-width: 640px){
  .profile-side-menu{
    grid-template-columns:1fr;
  }
}
body[data-theme="dracula"] .sidebar-profile,
body[data-theme="crimson-black"] .sidebar-profile{
  background:rgba(255,255,255,.04);
  border-color:rgba(255,255,255,.24);
}
body[data-theme="dracula"] .profile-avatar-preview,
body[data-theme="crimson-black"] .profile-avatar-preview{
  background:rgba(255,255,255,.08);
  border-color:rgba(255,255,255,.2);
  color:#fbfbfb;
}
body[data-theme="dracula"] .sidebar-profile-name,
body[data-theme="crimson-black"] .sidebar-profile-name{color:#f8fafc}
body[data-theme="dracula"] .sidebar-profile-avatar,
body[data-theme="crimson-black"] .sidebar-profile-avatar{
  border:1px solid rgba(255,255,255,.18);
}
body[data-theme="dracula"] .theme-preview-btn,
body[data-theme="crimson-black"] .theme-preview-btn{
  background:rgba(255,255,255,.03);
  border-color:rgba(255,255,255,.25);
  color:#f8fafc;
}
body[data-theme="dracula"] .table-density-toggle,
body[data-theme="crimson-black"] .table-density-toggle{
  background:rgba(255,255,255,.04);
  border-color:rgba(255,255,255,.2);
}
body[data-theme="dracula"] .density-btn,
body[data-theme="crimson-black"] .density-btn{
  color:#cbd5e1;
}
body[data-theme="dracula"] .density-btn.active,
body[data-theme="crimson-black"] .density-btn.active{
  background:rgba(255,255,255,.16);
  color:#ffffff;
}
body[data-theme="dracula"] .records .ics-table thead th,
body[data-theme="dracula"] .records-table-wrap .ics-table thead th:first-child{
  background:#241f3b;
  color:#d8def0;
}
body[data-theme="crimson-black"] .records .ics-table thead th,
body[data-theme="crimson-black"] .records-table-wrap .ics-table thead th:first-child{
  background:#1f1722;
  color:#cbd5e1;
}
body[data-theme="dracula"] .records-table-wrap .ics-table tbody td:first-child{
  background:var(--records-row-bg);
  color:#d8def0;
}
body[data-theme="crimson-black"] .records-table-wrap .ics-table tbody td:first-child{
  background:var(--records-row-bg);
  color:#cbd5e1;
}
body[data-theme="dracula"] .records .ics-table tbody tr{
  --records-row-bg:#1c1730;
  background:var(--records-row-bg);
}
body[data-theme="dracula"] .records .ics-table tbody tr:nth-child(even){
  --records-row-bg:#1f1934;
  background:var(--records-row-bg);
}
body[data-theme="dracula"] .records .ics-table tbody tr:hover{
  --records-row-bg:#2a2142;
  background:var(--records-row-bg);
}
body[data-theme="crimson-black"] .records .ics-table tbody tr{
  --records-row-bg:#17111a;
  background:var(--records-row-bg);
}
body[data-theme="crimson-black"] .records .ics-table tbody tr:nth-child(even){
  --records-row-bg:#18121d;
  background:var(--records-row-bg);
}
body[data-theme="crimson-black"] .records .ics-table tbody tr:hover{
  --records-row-bg:#231826;
  background:var(--records-row-bg);
}
body[data-theme="dracula"] .records .ics-table td,
body[data-theme="crimson-black"] .records .ics-table td{
  border-bottom-color:rgba(255,255,255,.14);
}
body[data-theme="dracula"] .records .actions-eul-table tbody tr.targeted-row,
body[data-theme="dracula"] .records .actions-eul-table tbody tr.targeted-row td:first-child{
  background:#2f254b;
  box-shadow:inset 3px 0 0 #a663cc;
}
body[data-theme="dracula"] .records .source-no-link.source-no-ics{
  color:#93c5fd;
}
body[data-theme="dracula"] .records .source-no-link.source-no-par{
  color:#fdba74;
}
body[data-theme="crimson-black"] .records .actions-eul-table tbody tr.targeted-row,
body[data-theme="crimson-black"] .records .actions-eul-table tbody tr.targeted-row td:first-child{
  background:#2a1a24;
  box-shadow:inset 3px 0 0 #fb7185;
}
body[data-theme="crimson-black"] .records .source-no-link.source-no-ics{
  color:#93c5fd;
}
body[data-theme="crimson-black"] .records .source-no-link.source-no-par{
  color:#fdba74;
}
body[data-theme="dracula"] .stage-input[readonly]{background:rgba(0,0,0,.32)}
body[data-theme="crimson-black"] .stage-input[readonly]{background:rgba(0,0,0,.34)}
body[data-theme="dracula"] .notif-panel{
  background:#1c1730;
  border-color:#5e3c76;
}
body[data-theme="crimson-black"] .notif-panel{
  background:#17111a;
  border-color:#4b2a33;
}
body[data-theme="dracula"] .notif-head,
body[data-theme="crimson-black"] .notif-head{
  color:#fbfbfb;
  border-bottom-color:rgba(255,255,255,.14);
}
body[data-theme="dracula"] .notif-empty,
body[data-theme="crimson-black"] .notif-empty{
  color:#cbd5e1;
}
body[data-theme="dracula"] .notif-list .notif-group-label,
body[data-theme="crimson-black"] .notif-list .notif-group-label{
  background:rgba(15,23,42,.4);
  color:#cbd5e1;
  border-top-color:rgba(255,255,255,.12);
  border-bottom-color:rgba(255,255,255,.12);
}
body[data-theme="dracula"] .notif-item,
body[data-theme="crimson-black"] .notif-item{
  color:#e2e8f0;
  border-bottom-color:rgba(255,255,255,.08);
}
body[data-theme="dracula"] .notif-msg,
body[data-theme="crimson-black"] .notif-msg{
  color:#f8fafc;
}
body[data-theme="dracula"] .notif-item.success{background:#243034}
body[data-theme="dracula"] .notif-item.error{background:#3a2231}
body[data-theme="dracula"] .notif-item.info{background:#222f45}
body[data-theme="dracula"] .notif-item.warn{background:#3a3422}
body[data-theme="crimson-black"] .notif-item.success{background:#23312b}
body[data-theme="crimson-black"] .notif-item.error{background:#3a232a}
body[data-theme="crimson-black"] .notif-item.info{background:#232a3a}
body[data-theme="crimson-black"] .notif-item.warn{background:#3a2f22}
body[data-theme="dracula"] .notif-head-btn,
body[data-theme="dracula"] .notif-tab,
body[data-theme="dracula"] .notif-item-btn,
body[data-theme="dracula"] .notif-count{
  background:#241b36;
  border-color:#5e3c76;
  color:#e2e8f0;
}
body[data-theme="crimson-black"] .notif-head-btn,
body[data-theme="crimson-black"] .notif-tab,
body[data-theme="crimson-black"] .notif-item-btn,
body[data-theme="crimson-black"] .notif-count{
  background:#22161e;
  border-color:#4b2a33;
  color:#fecdd3;
}
body[data-theme="dracula"] .notif-tab.active{
  background:#3b245a;
  border-color:#8b5cf6;
  color:#ede9fe;
}
body[data-theme="crimson-black"] .notif-tab.active{
  background:#3a1f27;
  border-color:#fb7185;
  color:#ffe4e6;
}
body[data-theme="dracula"] .ics-status-mini{
  background:#2a1f3b;
  border-color:#5e3c76;
  color:#f3e8ff;
}
body[data-theme="crimson-black"] .ics-status-mini{
  background:#2a1a24;
  border-color:#4b2a33;
  color:#ffe4e6;
}
body[data-theme="dracula"] .dash-chip{
  background:#2a1f3b;
  border-color:#5e3c76;
  color:#f3e8ff;
}
body[data-theme="dracula"] .dash-chip:hover{
  background:#3b2a55;
  border-color:#a663cc;
}
body[data-theme="crimson-black"] .dash-chip{
  background:#2a1a24;
  border-color:#4b2a33;
  color:#ffe4ea;
}
body[data-theme="crimson-black"] .dash-chip:hover{
  background:#3a2231;
  border-color:#fb7185;
}
body[data-theme="dracula"] .dash-recent-head h3,
body[data-theme="crimson-black"] .dash-recent-head h3{
  color:#f8fafc;
}
body[data-theme="dracula"] .dash-recent-card.tone-ok,
body[data-theme="crimson-black"] .dash-recent-card.tone-ok{
  border-color:#86efac;
  background:linear-gradient(180deg,#f7fef9 0%,#ecfdf3 100%);
}
body[data-theme="dracula"] .dash-recent-card.tone-new,
body[data-theme="crimson-black"] .dash-recent-card.tone-new{
  border-color:#c4b5fd;
  background:linear-gradient(180deg,#faf8ff 0%,#f3eeff 100%);
}
body[data-theme="dracula"] .dash-recent-card.tone-imported,
body[data-theme="crimson-black"] .dash-recent-card.tone-imported{
  border-color:#93c5fd;
  background:linear-gradient(180deg,#f8fbff 0%,#eef6ff 100%);
}
body[data-theme="dracula"] .dash-recent-card.tone-risk,
body[data-theme="crimson-black"] .dash-recent-card.tone-risk{
  border-color:#fda4af;
  background:linear-gradient(180deg,#fff6f7 0%,#ffeef1 100%);
}
body[data-theme="dracula"] .dash-recent-card.source-ics,
body[data-theme="crimson-black"] .dash-recent-card.source-ics{
  border-color:#60a5fa;
  background:linear-gradient(180deg,#e8f0ff 0%,#dbeafe 100%);
}
body[data-theme="dracula"] .dash-recent-card.source-par,
body[data-theme="crimson-black"] .dash-recent-card.source-par{
  border-color:#f59e0b;
  background:linear-gradient(180deg,#fff1e2 0%,#ffe4c7 100%);
}
body[data-theme="dracula"] .dash-recent-card .ics-link-btn{
  color:#2563eb;
}
body[data-theme="crimson-black"] .dash-recent-card .ics-link-btn{
  color:#2563eb;
}
body[data-theme="dracula"] .dash-recent-card-open,
body[data-theme="crimson-black"] .dash-recent-card-open,
body[data-theme="dracula"] .dash-recent-card-field-icon,
body[data-theme="crimson-black"] .dash-recent-card-field-icon{
  background:#f8fafc;
  border-color:#e2e8f0;
}
body[data-theme="dracula"] .dash-recent-card-field .k,
body[data-theme="crimson-black"] .dash-recent-card-field .k{
  color:#64748b;
}
body[data-theme="dracula"] .dash-recent-card-field .v,
body[data-theme="crimson-black"] .dash-recent-card-field .v{
  color:#0f172a;
}
body[data-theme="dracula"] .dash-recent-card-idx,
body[data-theme="crimson-black"] .dash-recent-card-idx{
  background:#f8fafc;
  color:#64748b;
}
body[data-theme="dracula"] .dash-recent-pill.status,
body[data-theme="crimson-black"] .dash-recent-pill.status{
  background:rgba(254,202,202,.88);
  border:1px solid rgba(248,113,113,.6);
  color:#7f1d1d;
}
body[data-theme="dracula"] .dash-recent-pill.status-updated,
body[data-theme="crimson-black"] .dash-recent-pill.status-updated{
  background:rgba(254,243,199,.9);
  border:1px solid rgba(245,158,11,.55);
  color:#78350f;
}
body[data-theme="dracula"] .dash-recent-pill.status-imported,
body[data-theme="crimson-black"] .dash-recent-pill.status-imported{
  background:rgba(219,234,254,.9);
  border:1px solid rgba(96,165,250,.55);
  color:#1e3a8a;
}
body[data-theme="dracula"] .dash-recent-pill.status-new,
body[data-theme="crimson-black"] .dash-recent-pill.status-new{
  background:rgba(237,233,254,.9);
  border:1px solid rgba(167,139,250,.55);
  color:#4c1d95;
}
body[data-theme="dracula"] .dash-recent-pill.source-ics,
body[data-theme="crimson-black"] .dash-recent-pill.source-ics{
  background:rgba(219,234,254,.9);
  border:1px solid rgba(96,165,250,.55);
  color:#1e3a8a;
}
body[data-theme="dracula"] .dash-recent-pill.source-par,
body[data-theme="crimson-black"] .dash-recent-pill.source-par{
  background:rgba(255,237,213,.92);
  border:1px solid rgba(251,146,60,.55);
  color:#7c2d12;
}
body[data-theme="dracula"] .dash-recent-pill.ok,
body[data-theme="crimson-black"] .dash-recent-pill.ok{
  background:rgba(209,250,229,.9);
  border:1px solid rgba(52,211,153,.55);
  color:#065f46;
}
body[data-theme="dracula"] .dash-recent-pill.danger,
body[data-theme="crimson-black"] .dash-recent-pill.danger{
  background:rgba(254,226,226,.92);
  border:1px solid rgba(248,113,113,.58);
  color:#991b1b;
}
body[data-theme="dracula"] .dash-recent-card-foot{
  border-top-color:#e2e8f0;
}
body[data-theme="crimson-black"] .dash-recent-card-foot{
  border-top-color:#e2e8f0;
}
body[data-theme="dracula"] .dash-recent-card-foot .k,
body[data-theme="crimson-black"] .dash-recent-card-foot .k{
  color:#94a3b8;
}
body[data-theme="dracula"] .dash-recent-card-foot .v,
body[data-theme="crimson-black"] .dash-recent-card-foot .v{
  color:#334155;
}
body[data-theme="dracula"] .dash-recent-cards .empty-cell,
body[data-theme="crimson-black"] .dash-recent-cards .empty-cell{
  color:#cbd5e1;
}

/* Dark theme modal contrast pass: WMR + Inspection History */
body[data-theme="dracula"] .inspection-history-title,
body[data-theme="crimson-black"] .inspection-history-title{
  color:#f8fafc;
}
body[data-theme="dracula"] .inspection-history-close,
body[data-theme="crimson-black"] .inspection-history-close{
  background:var(--modal-bg);
  border-color:var(--modal-border);
  color:var(--t);
}
body[data-theme="dracula"] .inspection-history-table-wrap{
  border-color:#4b3f6d;
}
body[data-theme="crimson-black"] .inspection-history-table-wrap{
  border-color:#4b2a33;
}
body[data-theme="dracula"] .inspection-history-table thead th{
  background:#2a2142;
  color:#e8edff;
}
body[data-theme="crimson-black"] .inspection-history-table thead th{
  background:#2a1a24;
  color:#fde8ef;
}
body[data-theme="dracula"] .inspection-history-table tbody td,
body[data-theme="crimson-black"] .inspection-history-table tbody td{
  color:#e2e8f0;
  border-bottom-color:rgba(255,255,255,.1);
}
body[data-theme="dracula"] .inspection-history-meta,
body[data-theme="crimson-black"] .inspection-history-meta{
  color:#a7b4cc;
}
body[data-theme="dracula"] .inspection-history-empty,
body[data-theme="crimson-black"] .inspection-history-empty{
  border-color:rgba(255,255,255,.22);
  color:#cbd5e1;
}
body[data-theme="dracula"] .wmr-modal .modal-head{
  border-bottom:1px solid #5e3c76;
}
body[data-theme="crimson-black"] .wmr-modal .modal-head{
  border-bottom:1px solid #4b2a33;
}
body[data-theme="dracula"] .wmr-modal .detail-item,
body[data-theme="crimson-black"] .wmr-modal .detail-item{
  background:rgba(255,255,255,.06);
  border-color:rgba(255,255,255,.2);
}
body[data-theme="dracula"] .wmr-modal .detail-item .k,
body[data-theme="crimson-black"] .wmr-modal .detail-item .k{
  color:#b7c2d8;
}
body[data-theme="dracula"] .wmr-modal .detail-item .v,
body[data-theme="crimson-black"] .wmr-modal .detail-item .v{
  color:#f8fafc;
}
body[data-theme="dracula"] .wmr-modal .icsd-card,
body[data-theme="crimson-black"] .wmr-modal .icsd-card{
  background:rgba(255,255,255,.05);
  border-color:rgba(255,255,255,.2);
}
body[data-theme="dracula"] .wmr-modal .wmr-section-title,
body[data-theme="crimson-black"] .wmr-modal .wmr-section-title{
  color:#dbe7ff;
}
body[data-theme="dracula"] .wmr-modal label,
body[data-theme="crimson-black"] .wmr-modal label{
  color:#b7c2d8;
}
body[data-theme="dracula"] .wmr-modal .stage-input,
body[data-theme="crimson-black"] .wmr-modal .stage-input{
  background:rgba(8,10,18,.72);
  border-color:rgba(255,255,255,.2);
  color:#f8fafc;
}
body[data-theme="dracula"] .wmr-modal .stage-input::placeholder,
body[data-theme="crimson-black"] .wmr-modal .stage-input::placeholder{
  color:#94a3b8;
}
body[data-theme="dracula"] .wmr-modal .detail-table-wrap,
body[data-theme="crimson-black"] .wmr-modal .detail-table-wrap{
  border-color:rgba(255,255,255,.2);
}
body[data-theme="dracula"] .wmr-modal .detail-table thead th{
  background:#2a2142;
  color:#e8edff;
}
body[data-theme="crimson-black"] .wmr-modal .detail-table thead th{
  background:#2a1a24;
  color:#fde8ef;
}
body[data-theme="dracula"] .wmr-modal .detail-table tbody td,
body[data-theme="crimson-black"] .wmr-modal .detail-table tbody td{
  color:#e2e8f0;
  border-bottom-color:rgba(255,255,255,.08);
}
body[data-theme="dracula"] .wmr-modal .wmr-sale-note,
body[data-theme="crimson-black"] .wmr-modal .wmr-sale-note{
  color:#b7c2d8;
}
@media (max-width:760px){
  body[data-theme="dracula"] .wmr-modal .detail-table tbody tr,
  body[data-theme="crimson-black"] .wmr-modal .detail-table tbody tr{
    background:rgba(255,255,255,.06);
    border-color:rgba(255,255,255,.24);
  }
}

/* Dark theme accent differentiation */
body[data-theme="dracula"] .inspection-history-close:hover,
body[data-theme="dracula"] .wmr-modal .wmr-close-btn:hover{
  color:var(--ah);
}
body[data-theme="crimson-black"] .inspection-history-close:hover,
body[data-theme="crimson-black"] .wmr-modal .wmr-close-btn:hover{
  color:var(--ah);
}
body[data-theme="dracula"] .inspection-history-table thead th{
  box-shadow:inset 0 -1px 0 #5e3c76;
}
body[data-theme="crimson-black"] .inspection-history-table thead th{
  box-shadow:inset 0 -1px 0 #5a2a3a;
}
body[data-theme="dracula"] .inspection-history-table tbody tr:hover td{
  background:rgba(167,139,250,.1);
}
body[data-theme="crimson-black"] .inspection-history-table tbody tr:hover td{
  background:rgba(251,113,133,.1);
}
body[data-theme="dracula"] .insp-status-pill.danger{
  background:#4a2637;
  color:#fecdd3;
  border:1px solid #be185d;
}
body[data-theme="crimson-black"] .insp-status-pill.danger{
  background:#4b1f2b;
  color:#ffe4ea;
  border:1px solid #fb7185;
}
body[data-theme="dracula"] .wmr-modal .icsd-card{
  box-shadow:inset 0 1px 0 rgba(167,139,250,.2);
}
body[data-theme="crimson-black"] .wmr-modal .icsd-card{
  box-shadow:inset 0 1px 0 rgba(251,113,133,.2);
}
body[data-theme="dracula"] .wmr-modal .stage-input:focus{
  border-color:#a78bfa;
  box-shadow:0 0 0 2px rgba(167,139,250,.25);
}
body[data-theme="crimson-black"] .wmr-modal .stage-input:focus{
  border-color:#fb7185;
  box-shadow:0 0 0 2px rgba(251,113,133,.25);
}
body[data-theme="dracula"] .wmr-modal .detail-table thead th{
  box-shadow:inset 0 -1px 0 #5e3c76;
}
body[data-theme="crimson-black"] .wmr-modal .detail-table thead th{
  box-shadow:inset 0 -1px 0 #5a2a3a;
}
body[data-theme="dracula"] .wmr-modal .detail-table tbody tr:hover td{
  background:rgba(167,139,250,.08);
}
body[data-theme="crimson-black"] .wmr-modal .detail-table tbody tr:hover td{
  background:rgba(251,113,133,.08);
}
@media (max-width: 700px){
  .theme-preview-grid{grid-template-columns:repeat(2,minmax(0,1fr))}
}
.view-enter{
  opacity:0;
  transform:translateY(10px);
  animation:viewEnter .36s cubic-bezier(.2,.75,.25,1) forwards;
  animation-delay:var(--enter-delay,0ms);
}
@keyframes viewEnter{
  to{
    opacity:1;
    transform:translateY(0);
  }
}
@media (prefers-reduced-motion: reduce){
  .view-enter{
    opacity:1;
    transform:none;
    animation:none;
  }
}
/* UNIVERSAL MODAL */
.modal-overlay{position:fixed;inset:0;background:rgba(15,23,42,.45);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:200}
.modal{background:var(--modal-bg);border:1px solid var(--modal-border);border-radius:16px;box-shadow:0 25px 50px rgba(0,0,0,.2);width:90%;max-width:420px;padding:20px;display:flex;flex-direction:column;gap:12px;animation:pop .25s ease}
.modal h3{margin:0;font-size:16px}
.modal p{margin:0;font-size:13px;color:var(--tm);white-space:pre-line}
.modal-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:6px}
.modal-overlay.modal-release-notes .modal{
  max-width:min(760px,94vw);
  max-height:88vh;
}
.modal-overlay.modal-release-notes #modalMsg{
  max-height:60vh;
  overflow:auto;
  padding-right:6px;
  line-height:1.5;
}
.modal-btn{min-height:36px}
.modal-btn.primary{background:var(--btn-primary-bg);color:var(--btn-primary-text)}
.modal-btn.secondary{background:var(--btn-secondary-bg);color:var(--btn-secondary-text)}
@keyframes pop{from{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}

/* Floating add button */
.fab{
  position:fixed;
  bottom:20px;
  right:20px;
  width:48px;
  height:48px;
  border-radius:50%;
  border:1px solid var(--ah);
  background:linear-gradient(135deg,var(--a) 0%,var(--ah) 100%);
  color:#ffffff;
  display:grid;
  place-items:center;
  box-shadow:0 10px 22px rgba(15,23,42,.3);
  cursor:pointer;
  z-index:60;
  transition:transform .18s ease, box-shadow .22s ease;
}
.fab:hover{
  transform:translateY(-1px);
  box-shadow:0 14px 26px rgba(15,23,42,.38);
}
.fab:focus-visible{
  outline:none;
  box-shadow:var(--fab-focus-ring);
}
.fab svg,.fab .lucide{width:22px;height:22px}
.fab .lucide{fill:none;stroke:currentColor;stroke-width:2}

/* Compact floating ICS form - restored (darker SaaS style) */
.sheet{
  position:fixed;
  left:50%;
  transform:translateX(-50%);
  bottom:-100%;
  width:78%;
  max-width:900px;
  min-height:160px;

  background:var(--sheet-bg);
  border:1px solid var(--sheet-border);
  border-radius:12px;

  box-shadow:
    var(--sheet-shadow),
    0 0 0 1px color-mix(in srgb, var(--a) 46%, transparent),
    0 0 44px color-mix(in srgb, var(--a) 62%, transparent),
    0 0 88px color-mix(in srgb, var(--a) 34%, transparent);

  padding:14px 16px 16px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
  align-items:start;

  transition:.3s;
  z-index:70;
}

.sheet.show{
  bottom:20px;
  box-shadow:
    var(--sheet-shadow),
    0 0 0 1px color-mix(in srgb, var(--a) 62%, transparent),
    0 0 64px color-mix(in srgb, var(--a) 78%, transparent),
    0 0 120px color-mix(in srgb, var(--a) 42%, transparent);
}

.form-col{
  display:flex;
  flex-direction:column;
  gap:6px;
}

.form-col h4{
  margin:0;
  font-size:12px;
  font-weight:700;
  color:var(--sheet-heading);
}

.row{
  display:grid;
  grid-template-columns:2fr 1fr;
  gap:8px;
}

.row-2{
  display:grid;
  grid-template-columns:minmax(220px,2.2fr) minmax(120px,1fr) minmax(130px,1fr);
  gap:8px;
}

.sheet label{
  font-size:10px;
  font-weight:600;
  color:var(--sheet-label);
}

.sheet input{
  width:100%;
  padding:6px 8px;
  border-radius:8px;
  border:1px solid var(--sheet-input-border);
  font-size:12px;
  background:var(--sheet-input-bg);
  color:var(--sheet-input-text);
}

.row-2 .name-field{min-width:0}

@media (max-width: 900px){
  .sheet{
    width:95%;
    grid-template-columns:1fr;
    gap:12px;
  }
  .row{grid-template-columns:1fr}
  .row-2{
    grid-template-columns:1fr 1fr;
  }
  .row-2 .name-field{
    grid-column:1 / -1;
  }
}

.sheet input::placeholder{color:var(--sheet-input-placeholder)}

@media (max-width: 1100px){
  .dash-grid{grid-template-columns:repeat(3,minmax(0,1fr))}
  .dash-panels,.dash-2col,.dash-story,.dash-analytics{grid-template-columns:1fr}
}

@media (max-width: 700px){
  .dash-grid{grid-template-columns:repeat(2,minmax(0,1fr))}
  .welcome-title{font-size:24px}
  .welcome-subtitle{font-size:13px}
  .dash-mini-metrics{grid-template-columns:1fr}
  .dash-hero-graphic{display:none}
  .dash-bar-row{grid-template-columns:78px 1fr auto}
}

@media (max-width: 980px){
  .app-topbar-v2-wrap{
    margin:0;
    padding:0 10px 8px;
  }
  .topbar-v2-views{
    display:none;
  }
  body.layout-no-sidebar .topbar-v2-views{
    display:flex;
  }
  .topbar-v2-search-btn{
    min-width:34px;
    width:34px;
    justify-content:center;
    padding:0;
  }
  .topbar-v2-search-label,
  .topbar-v2-search-btn::after{
    display:none;
  }
  .topbar-profile-copy{
    display:none;
  }
  .app-topbar-v2 .topbar-profile-btn{
    min-width:34px;
    width:34px;
    height:34px;
    border-radius:9px;
    padding:2px;
    justify-content:center;
  }
  .topbar-profile-avatar-wrap{
    width:28px;
    height:28px;
  }
  body.layout-no-sidebar .topbar-v2-search-btn{
    min-width:190px;
    width:auto;
    justify-content:space-between;
    padding:0 10px;
  }
  body.layout-no-sidebar .topbar-v2-search-label{
    display:inline;
  }
  .app-shell{
    grid-template-columns:1fr;
    gap:10px;
    padding:10px;
  }
  body.layout-no-sidebar .app-shell{
    padding-bottom:10px;
  }
  .app-sidebar{
    position:relative;
    top:auto;
    height:auto;
  }
  .sidebar-nav{
    flex-direction:row;
    flex-wrap:wrap;
    gap:8px;
  }
  .sidebar-nav .item{
    flex:1 1 calc(50% - 8px);
    justify-content:center;
  }
  .app-topbar{
    top:10px;
  }
  .topbar-title{
    display:flex;
    font-size:12px;
  }
  .top-user-meta{
    display:none;
  }
  .brand-toggle{
    display:none;
  }
}
@media (max-width: 980px) and (orientation: portrait){
  .app-shell{
    padding-bottom:calc(92px + env(safe-area-inset-bottom, 0px));
  }
  body.layout-no-sidebar .app-shell{
    padding-bottom:10px;
  }
  .app-main{
    padding-bottom:calc(94px + env(safe-area-inset-bottom, 0px));
  }
  body.layout-no-sidebar .app-main{
    padding-bottom:0;
  }
  .app-sidebar{
    position:fixed;
    left:10px;
    right:10px;
    bottom:10px;
    top:auto;
    height:auto;
    z-index:130;
    padding:10px 12px calc(10px + env(safe-area-inset-bottom, 0px));
    border-radius:16px;
    box-shadow:0 16px 34px rgba(15,23,42,.28);
    gap:0;
  }
  .brand,
  .sidebar-foot{
    display:none;
  }
  .sidebar-nav{
    flex-direction:row;
    flex-wrap:nowrap;
    gap:8px;
    margin-top:0;
  }
  .sidebar-nav .item{
    flex:1 1 0;
    min-width:0;
    justify-content:center;
    flex-direction:column;
    gap:5px;
    padding:8px 4px;
    border-radius:11px;
    text-align:center;
    font-size:11px;
    transform:none;
  }
  .sidebar-nav .item.item-new-ics{
    display:flex;
    background:linear-gradient(135deg,#16a34a 0%,#15803d 100%);
    color:#fff;
    box-shadow:0 10px 20px rgba(15,23,42,.2);
  }
  .sidebar-nav .item.item-new-ics .nav-ico{
    border-color:rgba(255,255,255,.42);
    background:rgba(255,255,255,.18);
    color:#fff;
  }
  .sidebar-nav .item:hover{
    transform:none;
  }
  .sidebar-nav .item > span:last-child{
    display:block;
    font-size:11px;
    line-height:1.1;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    max-width:100%;
  }
  .nav-ico{
    width:26px;
    height:26px;
    border-radius:8px;
  }
  body.sidebar-collapsed .sidebar-nav .item{
    justify-content:center;
    flex-direction:column;
    padding:8px 4px;
  }
  body.sidebar-collapsed .sidebar-nav .item > span:last-child{
    display:block;
  }
  .mobile-profile-btn{
    display:grid;
  }
  .notif-panel{
    position:absolute;
    top:calc(100% + 8px);
    right:0;
    left:auto;
    width:min(92vw,420px);
    max-height:min(68vh,520px);
    border-radius:14px;
  }
  .fab{
    display:none;
  }
  .sheet.show{
    bottom:calc(86px + env(safe-area-inset-bottom, 0px));
  }
  body.layout-no-sidebar .sheet.show{
    bottom:20px;
  }
  .main{
    padding-bottom:calc(100px + env(safe-area-inset-bottom, 0px));
  }
  body.layout-no-sidebar .main{
    padding-bottom:16px;
  }
  .records-table-wrap,
  .stage-table-wrap,
  .detail-table-wrap,
  .inspection-history-table-wrap{
    overflow-x:auto;
    overflow-y:auto;
    -webkit-overflow-scrolling:touch;
    scrollbar-width:thin;
  }
  .records-table-wrap::-webkit-scrollbar,
  .stage-table-wrap::-webkit-scrollbar,
  .detail-table-wrap::-webkit-scrollbar,
  .inspection-history-table-wrap::-webkit-scrollbar{
    width:6px;
    height:6px;
  }
  .records-table-wrap::-webkit-scrollbar-thumb,
  .stage-table-wrap::-webkit-scrollbar-thumb,
  .detail-table-wrap::-webkit-scrollbar-thumb,
  .inspection-history-table-wrap::-webkit-scrollbar-thumb{
    background:#94a3b8;
    border-radius:999px;
  }
  .records-table-wrap .ics-table,
  .stage-table-wrap .ics-table,
  .detail-table-wrap .detail-table{
    width:max-content;
    min-width:100%;
  }
}
@media (max-width: 640px){
  .app-shell{
    padding:8px;
    padding-bottom:calc(84px + env(safe-area-inset-bottom, 0px));
    gap:8px;
  }
  body.layout-no-sidebar .app-shell{
    padding-bottom:8px;
  }
  .app-main{
    padding-bottom:calc(86px + env(safe-area-inset-bottom, 0px));
  }
  body.layout-no-sidebar .app-main{
    padding-bottom:0;
  }
  .app-sidebar{
    position:fixed;
    left:8px;
    right:8px;
    bottom:8px;
    top:auto;
    height:auto;
    z-index:130;
    padding:8px 10px calc(8px + env(safe-area-inset-bottom, 0px));
    border-radius:14px;
    box-shadow:0 14px 30px rgba(15,23,42,.28);
    gap:0;
  }
  .brand,
  .sidebar-foot{
    display:none;
  }
  .sidebar-nav{
    flex-direction:row;
    flex-wrap:nowrap;
    gap:6px;
    margin-top:0;
  }
  .sidebar-nav .item{
    flex:1 1 0;
    min-width:0;
    justify-content:center;
    flex-direction:column;
    gap:4px;
    padding:7px 4px;
    border-radius:10px;
    text-align:center;
    font-size:10px;
    transform:none;
  }
  .sidebar-nav .item.item-new-ics{
    display:flex;
    background:linear-gradient(135deg,#16a34a 0%,#15803d 100%);
    color:#fff;
    box-shadow:0 8px 16px rgba(15,23,42,.2);
  }
  .sidebar-nav .item.item-new-ics .nav-ico{
    border-color:rgba(255,255,255,.42);
    background:rgba(255,255,255,.18);
    color:#fff;
  }
  .sidebar-nav .item:hover{
    transform:none;
  }
  .sidebar-nav .item > span:last-child{
    display:block;
    font-size:10px;
    line-height:1.1;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    max-width:100%;
  }
  .nav-ico{
    width:24px;
    height:24px;
    border-radius:8px;
  }
  body.sidebar-collapsed .sidebar-nav .item{
    justify-content:center;
    flex-direction:column;
    padding:7px 4px;
  }
  body.sidebar-collapsed .sidebar-nav .item > span:last-child{
    display:block;
  }
  .app-topbar{
    height:52px;
    padding:0 10px;
    border-radius:12px;
  }
  .topbar-title{
    font-size:11px;
    gap:6px;
  }
  .topbar-title .school-id-chip{
    padding:2px 6px;
    font-size:9px;
  }
  .right{
    gap:6px;
  }
  .mobile-profile-btn{
    display:grid;
  }
  .notif-panel{
    position:absolute;
    top:calc(100% + 8px);
    right:0;
    left:auto;
    width:min(92vw,360px);
    max-height:min(62vh,440px);
    border-radius:14px;
  }
  .records-table-wrap,
  .stage-table-wrap,
  .detail-table-wrap,
  .inspection-history-table-wrap{
    overflow-x:auto;
    overflow-y:auto;
    -webkit-overflow-scrolling:touch;
    scrollbar-width:thin;
  }
  .records-table-wrap::-webkit-scrollbar,
  .stage-table-wrap::-webkit-scrollbar,
  .detail-table-wrap::-webkit-scrollbar,
  .inspection-history-table-wrap::-webkit-scrollbar{
    width:6px;
    height:6px;
  }
  .records-table-wrap::-webkit-scrollbar-thumb,
  .stage-table-wrap::-webkit-scrollbar-thumb,
  .detail-table-wrap::-webkit-scrollbar-thumb,
  .inspection-history-table-wrap::-webkit-scrollbar-thumb{
    background:#94a3b8;
    border-radius:999px;
  }
  .ics-table{
    table-layout:auto;
    width:100%;
  }
  .records-table-wrap .ics-table,
  .stage-table-wrap .ics-table,
  .detail-table-wrap .detail-table{
    width:max-content;
    min-width:100%;
  }
  .ics-table colgroup{
    display:none;
  }
  .ics-table th,
  .ics-table td{
    font-size:10px;
    padding:6px 5px;
    white-space:normal;
    word-break:break-word;
  }
  .records-table-wrap .ics-table th:first-child,
  .records-table-wrap .ics-table td:first-child,
  .stage-table-wrap .ics-table th:first-child,
  .stage-table-wrap .ics-table td:first-child{
    position:static;
    left:auto;
  }
  .staged .ics-table th:nth-child(1),
  .staged .ics-table td:nth-child(1),
  .staged .ics-table th:nth-child(5),
  .staged .ics-table td:nth-child(5),
  .staged .ics-table th:nth-child(6),
  .staged .ics-table td:nth-child(6),
  .staged .ics-table th:nth-child(8),
  .staged .ics-table td:nth-child(8){
    display:none;
  }
  .ics-records-table th:nth-child(1),
  .ics-records-table td:nth-child(1),
  .ics-records-table th:nth-child(4),
  .ics-records-table td:nth-child(4),
  .ics-records-table th:nth-child(5),
  .ics-records-table td:nth-child(5),
  .ics-records-table th:nth-child(6),
  .ics-records-table td:nth-child(6),
  .ics-records-table th:nth-child(8),
  .ics-records-table td:nth-child(8){
    display:none;
  }
  .ics-records-table th,
  .ics-records-table td{
    word-break:normal;
    overflow-wrap:normal;
  }
  .ics-records-table th:nth-child(2),
  .ics-records-table td:nth-child(2){
    min-width:120px;
  }
  .ics-records-table th:nth-child(3),
  .ics-records-table td:nth-child(3){
    min-width:84px;
  }
  .ics-records-table th:nth-child(7),
  .ics-records-table td:nth-child(7){
    min-width:96px;
  }
  .ics-records-table th:nth-child(9),
  .ics-records-table td:nth-child(9){
    min-width:96px;
  }
  .ics-records-table th:nth-child(10),
  .ics-records-table td:nth-child(10){
    min-width:124px;
    white-space:nowrap;
  }
  .actions-eul-table th:nth-child(1),
  .actions-eul-table td:nth-child(1),
  .actions-eul-table th:nth-child(4),
  .actions-eul-table td:nth-child(4),
  .actions-eul-table th:nth-child(6),
  .actions-eul-table td:nth-child(6){
    display:none;
  }
  .actions-eul-actions{
    justify-content:flex-start;
    flex-wrap:wrap;
    gap:3px;
  }
  .actions-eul-actions .small-btn,
  .actions-eul-actions .btn:not(.icon-only-btn){
    padding:4px 7px;
    font-size:10px;
  }
  .archives-main-table th:nth-child(1),
  .archives-main-table td:nth-child(1),
  .archives-main-table th:nth-child(2),
  .archives-main-table td:nth-child(2),
  .archives-main-table th:nth-child(5),
  .archives-main-table td:nth-child(5),
  .archives-main-table th:nth-child(8),
  .archives-main-table td:nth-child(8),
  .archives-main-table th:nth-child(9),
  .archives-main-table td:nth-child(9){
    display:none;
  }
  .archives-main-table th,
  .archives-main-table td{
    text-align:left;
  }
  .actions-table th:nth-child(1),
  .actions-table td:nth-child(1),
  .actions-table th:nth-child(3),
  .actions-table td:nth-child(3){
    display:none;
  }
  .icon-btn{
    width:40px;
    height:40px;
    border-radius:9px;
  }
  .fab{
    display:none;
  }
  .sheet.show{
    bottom:calc(78px + env(safe-area-inset-bottom, 0px));
  }
  body.layout-no-sidebar .sheet.show{
    bottom:20px;
  }
  .main{
    padding:4px 2px 16px;
    padding-bottom:calc(92px + env(safe-area-inset-bottom, 0px));
    gap:10px;
  }
  body.layout-no-sidebar .main{
    padding-bottom:16px;
  }
  .welcome-title{
    font-size:22px;
  }
  .dash-grid{
    grid-template-columns:1fr;
  }
  .dash-trend-chart{
    gap:4px;
    padding-left:0;
    padding-right:0;
  }
  .dash-trend-label{
    font-size:9px;
  }
}

.sheet input:focus{
  outline:none;
  border-color:var(--sheet-input-focus-border);
  box-shadow:var(--sheet-input-focus-ring);
}

.form-action{
  position:absolute;
  top:12px;
  right:16px;
}
.form-alert{
  grid-column:1 / -1;
  margin-top:4px;
  padding:8px 10px;
  border-radius:8px;
  font-size:12px;
  font-weight:600;
  display:none;
}
.form-alert.show{display:block}
.form-alert.error{
  background:#fee2e2;
  border:1px solid #fecaca;
  color:#991b1b;
}
.form-alert.info{
  background:#eff6ff;
  border:1px solid #bfdbfe;
  color:#1d4ed8;
}

.add-btn{
  background:var(--a);
  color:#fff;
  border:0;
  padding:5px 12px;
  border-radius:7px;
  font-weight:600;
  font-size:11px;

  opacity:.6;
  pointer-events:auto;
  transition:.15s;
}

.add-btn.enabled{
  opacity:1;
  pointer-events:auto;
}

.add-btn:hover.enabled{background:var(--ah)}
.add-btn.is-par-update{
  background:var(--par-accent);
}
.add-btn.is-par-update:hover.enabled{
  background:var(--par-accent-hover);
}

/* Developer Tools */
.devtools-shell{
  display:grid;
  gap:14px;
}
.devtools-hero{
  background:
    radial-gradient(850px 200px at 0% 0%, color-mix(in srgb, var(--a) 16%, transparent) 0%, transparent 65%),
    linear-gradient(140deg, color-mix(in srgb, var(--surface) 88%, var(--a) 12%) 0%, var(--surface) 100%);
  border:1px solid color-mix(in srgb, var(--border) 72%, var(--a) 28%);
}
.devtools-hero-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
}
.devtools-widget-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:10px;
}
.devtools-widget-grid.compact{
  grid-template-columns:repeat(6,minmax(0,1fr));
}
.devtools-widget{
  margin:0;
  padding:10px;
  border:1px solid color-mix(in srgb, var(--border) 84%, var(--a) 16%);
  background:linear-gradient(180deg, color-mix(in srgb, var(--surface) 92%, var(--a) 8%) 0%, var(--surface) 100%);
}
.devtools-widget-value{
  margin-top:4px;
  font-size:20px;
  font-weight:700;
  letter-spacing:.1px;
}
.devtools-widget-meta{
  margin-top:4px;
  font-size:12px;
  font-weight:600;
  color:var(--tm);
  line-height:1.3;
  word-break:break-word;
}
.devtools-panel{
  display:grid;
  gap:10px;
}
.devtools-panel-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
}
.devtools-btn-row{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.devtools-split{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
.devtools-list{
  display:grid;
  grid-template-columns:repeat(6,minmax(0,1fr));
  gap:8px;
}
.devtools-diagnostics-text{
  min-height:240px;
  font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
  line-height:1.4;
}
@media (max-width: 980px){
  .devtools-split{
    grid-template-columns:1fr;
  }
  .devtools-widget-grid.compact{
    grid-template-columns:repeat(3,minmax(0,1fr));
  }
  .devtools-list{
    grid-template-columns:repeat(3,minmax(0,1fr));
  }
}
@media (max-width: 760px){
  .devtools-widget-grid.compact{
    grid-template-columns:repeat(2,minmax(0,1fr));
  }
  .devtools-list{
    grid-template-columns:repeat(2,minmax(0,1fr));
  }
}
@media (max-width: 520px){
  .devtools-widget-grid.compact{
    grid-template-columns:1fr;
  }
  .devtools-list{
    grid-template-columns:1fr;
  }
}
.dev-feedback-card{
  margin:0;
  padding:12px;
  border:1px solid color-mix(in srgb, var(--border) 84%, var(--a) 16%);
  background:linear-gradient(180deg, color-mix(in srgb, var(--surface) 92%, var(--a) 8%) 0%, var(--surface) 100%);
}
.dev-feedback-card-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
}
.dev-feedback-card-badges{
  display:flex;
  gap:6px;
  align-items:center;
  flex-wrap:wrap;
}
.dev-feedback-card-body{
  margin:8px 0 10px;
  line-height:1.45;
  white-space:pre-wrap;
}
.dev-feedback-card-actions{
  display:flex;
  gap:7px;
  flex-wrap:wrap;
}
.dev-feedback-status{
  display:inline-flex;
  align-items:center;
  border-radius:999px;
  border:1px solid transparent;
  padding:2px 8px;
  font-size:11px;
  font-weight:700;
}
.dev-feedback-status.new{
  background:rgba(219,234,254,.85);
  color:#1e3a8a;
  border-color:rgba(96,165,250,.5);
}
.dev-feedback-status.queue{
  background:rgba(254,243,199,.9);
  color:#78350f;
  border-color:rgba(245,158,11,.55);
}
.dev-feedback-status.approved{
  background:rgba(209,250,229,.9);
  color:#065f46;
  border-color:rgba(52,211,153,.55);
}
.dev-feedback-status.resolved{
  background:rgba(237,233,254,.9);
  color:#4c1d95;
  border-color:rgba(167,139,250,.55);
}
body[data-theme="dracula"] .dev-feedback-card,
body[data-theme="crimson-black"] .dev-feedback-card{
  border-color:rgba(148,163,184,.34);
  background:rgba(255,255,255,.04);
}
body[data-theme="dracula"] .dev-feedback-card-body,
body[data-theme="crimson-black"] .dev-feedback-card-body{
  color:#e2e8f0;
}
